import{f as g,a as n,c as re,t as Ct}from"../chunks/CZY_NlAX.js";import"../chunks/D1Luo-Nw.js";import{o as se}from"../chunks/BHyL2apj.js";import{ag as ie,ai as de,al as r,ak as e,G as m,F as K,m as a,am as t,an as H,ah as oe}from"../chunks/CHIrzwsT.js";import{s as i}from"../chunks/DsvTbyZG.js";import{i as j}from"../chunks/DNv7RG3c.js";import{e as it,i as dt}from"../chunks/De-eo5w8.js";import{e as D}from"../chunks/CaHQap0G.js";import{s as U}from"../chunks/U6XQp83X.js";import{s as Vt}from"../chunks/CuoGBMhC.js";import{i as le}from"../chunks/DNR7sn_e.js";var ne=g('<div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6"><p class="text-red-800"> </p></div>'),ve=g('<div class="text-center py-12"><p class="text-gray-600">Loading...</p></div>'),xe=g('<p class="text-gray-600">No active alerts</p>'),ce=g('<div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg"><div class="flex items-center space-x-3"><span> </span> <p class="text-sm text-gray-900"> </p></div> <button class="text-blue-600 hover:text-blue-800 text-sm">Resolve</button></div>'),pe=g('<div class="space-y-2"></div>'),ge=g('<div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"><div class="bg-white rounded-lg shadow p-6"><h3 class="text-sm font-medium text-gray-500 mb-2">Total VMs</h3> <p class="text-3xl font-bold text-gray-900"> </p> <p class="text-sm text-gray-600 mt-1"> </p></div> <div class="bg-white rounded-lg shadow p-6"><h3 class="text-sm font-medium text-gray-500 mb-2">Total Customers</h3> <p class="text-3xl font-bold text-gray-900"> </p></div> <div class="bg-white rounded-lg shadow p-6"><h3 class="text-sm font-medium text-gray-500 mb-2">Monthly Revenue</h3> <p class="text-3xl font-bold text-green-600"> </p> <p class="text-sm text-gray-600 mt-1"> </p></div> <div class="bg-white rounded-lg shadow p-6"><h3 class="text-sm font-medium text-gray-500 mb-2">Active Alerts</h3> <p> </p></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="bg-white rounded-lg shadow p-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Resource Usage</h3> <div class="space-y-4"><div><div class="flex justify-between mb-1"><span class="text-sm text-gray-600">Average CPU</span> <span class="text-sm font-medium"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-blue-600 h-2 rounded-full"></div></div></div> <div><div class="flex justify-between mb-1"><span class="text-sm text-gray-600">Average Memory</span> <span class="text-sm font-medium"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-green-600 h-2 rounded-full"></div></div></div></div></div> <div class="bg-white rounded-lg shadow p-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Alerts</h3> <!></div></div></div>'),ue=g('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span class="px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-800"> </span></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap text-sm space-x-2"><button class="text-blue-600 hover:text-blue-800">Details</button> <button class="text-yellow-600 hover:text-yellow-800">Restart</button> <button class="text-red-600 hover:text-red-800">Rebuild</button></td></tr>'),me=g('<div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hostname</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IP Address</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tier</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Specs</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),ye=g('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><span class="px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-800"> </span></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td></tr>'),he=g('<div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tier</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Billing</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Monthly Fee</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),_e=g('<tr><td colspan="6" class="px-6 py-4 text-center text-sm text-gray-500">No active alerts</td></tr>'),be=g('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><!></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap"><button class="text-blue-600 hover:text-blue-800 text-sm">Resolve</button></td></tr>'),fe=g('<div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Severity</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Message</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">VM</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><!></tbody></table></div>'),we=g('<div class="mb-8"><div class="flex space-x-4 mb-6"><button>Overview</button> <button>VMs</button> <button>Customers</button> <button> </button> <button class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300">Refresh</button></div> <!> <!> <!> <!></div>'),ke=g('<div class="min-h-screen bg-gray-50"><div class="max-w-7xl mx-auto px-4 py-8"><div class="mb-8"><h1 class="text-3xl font-bold text-gray-900">ðŸ“¦ Lab by Kraliki Fleet Management</h1> <p class="text-gray-600 mt-2">Monitor and manage your Lab by Kraliki VM fleet</p></div> <!> <!> <!></div></div>');function Pe(Ft,Rt){ie(Rt,!1);const q=window.location.port==="5173"?"http://localhost:8686":"/api";let ot=K([]),lt=K([]),P=K([]),x=K(null),_=K("overview"),St=K(null),nt=K(!0),et=K(null);se(()=>{at(),setInterval(at,3e4)});async function at(){try{m(nt,!0),m(et,null);const[s,d,S,z]=await Promise.all([fetch(`${q}/vms`).then(A=>A.json()),fetch(`${q}/customers`).then(A=>A.json()),fetch(`${q}/alerts?resolved=false`).then(A=>A.json()),fetch(`${q}/metrics/fleet`).then(A=>A.json())]);m(ot,s),m(lt,d),m(P,S),m(x,z)}catch(s){m(et,s.message)}finally{m(nt,!1)}}async function mt(s){try{await fetch(`${q}/alerts/${s}/resolve`,{method:"PUT"}),m(P,a(P).filter(d=>d.id!==s)),at()}catch(d){alert("Failed to resolve alert: "+d.message)}}async function Tt(s){if(confirm("Are you sure you want to restart this VM?"))try{await fetch(`${q}/vms/${s}/restart`,{method:"POST"}),alert("Restart command sent")}catch(d){alert("Failed to restart VM: "+d.message)}}async function jt(s){if(confirm("Are you sure you want to rebuild this VM? This will reinstall all software."))try{await fetch(`${q}/vms/${s}/rebuild`,{method:"POST"}),alert("Rebuild command sent")}catch(d){alert("Failed to rebuild VM: "+d.message)}}function Dt(s){const d=a(lt).find(S=>S.id===s);return d?d.name:"Unknown"}function Pt(s){return s.vm_id&&a(ot).find(d=>d.id===s.vm_id)||null}function Bt(s){switch(s.toLowerCase()){case"online":return"bg-green-100 text-green-800";case"offline":return"bg-red-100 text-red-800";case"maintenance":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}function yt(s){switch(s.toLowerCase()){case"high":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";case"info":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}le();var vt=ke(),ht=e(vt),_t=r(e(ht),2);{var Lt=s=>{var d=ne(),S=e(d),z=e(S,!0);t(S),t(d),H(()=>i(z,a(et))),n(s,d)};j(_t,s=>{a(et)&&s(Lt)})}var bt=r(_t,2);{var Nt=s=>{var d=ve();n(s,d)};j(bt,s=>{a(nt)&&!a(x)&&s(Nt)})}var Ut=r(bt,2);{var Gt=s=>{var d=we(),S=e(d),z=e(S),A=r(z,2),xt=r(A,2),Z=r(xt,2),Ot=e(Z);t(Z);var Et=r(Z,2);t(S);var ft=r(S,2);{var It=c=>{var p=ge(),b=e(p),f=e(b),B=r(e(f),2),o=e(B,!0);t(B);var w=r(B,2),v=e(w);t(w),t(f);var k=r(f,2),$=r(e(k),2),J=e($,!0);t($),t(k);var l=r(k,2),C=r(e(l),2),y=e(C);t(C);var M=r(C,2),Q=e(M);t(M),t(l);var u=r(l,2),h=r(e(u),2),L=e(h,!0);t(h),t(u),t(b);var V=r(b,2),F=e(V),N=r(e(F),2),G=e(N),O=e(G),E=r(e(O),2),tt=e(E);t(E),t(O);var W=r(O,2),ct=e(W);t(W),t(G);var R=r(G,2),T=e(R),rt=r(e(T),2),Jt=e(rt);t(rt),t(T);var $t=r(T,2),Qt=e($t);t($t),t(R),t(N),t(F);var Mt=r(F,2),Wt=r(e(Mt),2);{var Xt=I=>{var X=xe();n(I,X)},Yt=I=>{var X=pe();it(X,5,()=>a(P).slice(0,5),dt,(pt,Y)=>{var gt=ce(),ut=e(gt),st=e(ut),Zt=e(st,!0);t(st);var At=r(st,2),te=e(At,!0);t(At),t(ut);var ee=r(ut,2);t(gt),H(ae=>{U(st,1,`px-2 py-1 text-xs font-medium rounded ${ae??""}`),i(Zt,a(Y).severity),i(te,a(Y).message)},[()=>yt(a(Y).severity)]),D("click",ee,()=>mt(a(Y).id)),n(pt,gt)}),t(X),n(I,X)};j(Wt,I=>{a(P).length===0?I(Xt):I(Yt,!1)})}t(Mt),t(V),t(p),H((I,X,pt,Y)=>{i(o,a(x).total_vms),i(v,`${a(x).online_vms??""} online, ${a(x).offline_vms??""} offline`),i(J,a(x).total_customers),i(y,`â‚¬${I??""}`),i(Q,`Cost: â‚¬${X??""}`),U(h,1,`text-3xl font-bold ${a(x).alerts_count>0?"text-red-600":"text-green-600"}`),i(L,a(x).alerts_count),i(tt,`${pt??""}%`),Vt(ct,`width: ${a(x).avg_cpu??""}%`),i(Jt,`${Y??""}%`),Vt(Qt,`width: ${a(x).avg_memory??""}%`)},[()=>a(x).monthly_revenue.toFixed(2),()=>a(x).monthly_cost.toFixed(2),()=>a(x).avg_cpu.toFixed(1),()=>a(x).avg_memory.toFixed(1)]),n(c,p)};j(ft,c=>{a(_)==="overview"&&c(It)})}var wt=r(ft,2);{var Kt=c=>{var p=me(),b=e(p),f=r(e(b));it(f,5,()=>a(ot),dt,(B,o)=>{var w=ue(),v=e(w),k=e(v,!0);t(v);var $=r(v),J=e($,!0);t($);var l=r($),C=e(l,!0);t(l);var y=r(l),M=e(y),Q=e(M,!0);t(M),t(y);var u=r(y),h=e(u),L=e(h,!0);t(h),t(u);var V=r(u),F=e(V);t(V);var N=r(V),G=e(N),O=r(G,2),E=r(O,2);t(N),t(w),H((tt,W)=>{i(k,a(o).hostname),i(J,a(o).ip_address),i(C,tt),i(Q,a(o).tier),U(h,1,`px-2 py-1 text-xs font-medium rounded ${W??""}`),i(L,a(o).status),i(F,`${a(o).cpu_cores??""}C / ${a(o).memory_gb??""}GB / ${a(o).disk_gb??""}GB`)},[()=>Dt(a(o).customer_id),()=>Bt(a(o).status)]),D("click",G,()=>m(St,a(o))),D("click",O,()=>Tt(a(o).id)),D("click",E,()=>jt(a(o).id)),n(B,w)}),t(f),t(b),t(p),n(c,p)};j(wt,c=>{a(_)==="vms"&&c(Kt)})}var kt=r(wt,2);{var Ht=c=>{var p=he(),b=e(p),f=r(e(b));it(f,5,()=>a(lt),dt,(B,o)=>{var w=ye(),v=e(w),k=e(v,!0);t(v);var $=r(v),J=e($,!0);t($);var l=r($),C=e(l,!0);t(l);var y=r(l),M=e(y),Q=e(M,!0);t(M),t(y);var u=r(y),h=e(u),L=e(h,!0);t(h),t(u);var V=r(u),F=e(V);t(V),t(w),H(N=>{i(k,a(o).name),i(J,a(o).email),i(C,a(o).company||"-"),i(Q,a(o).tier),U(h,1,`px-2 py-1 text-xs font-medium rounded ${a(o).billing_status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),i(L,a(o).billing_status),i(F,`â‚¬${N??""}`)},[()=>a(o).monthly_fee.toFixed(2)]),n(B,w)}),t(f),t(b),t(p),n(c,p)};j(kt,c=>{a(_)==="customers"&&c(Ht)})}var qt=r(kt,2);{var zt=c=>{var p=fe(),b=e(p),f=r(e(b)),B=e(f);{var o=v=>{var k=_e();n(v,k)},w=v=>{var k=re(),$=oe(k);it($,1,()=>a(P),dt,(J,l)=>{var C=be(),y=e(C),M=e(y),Q=e(M,!0);t(M),t(y);var u=r(y),h=e(u,!0);t(u);var L=r(u),V=e(L,!0);t(L);var F=r(L),N=e(F);{var G=R=>{var T=Ct();H(rt=>i(T,rt),[()=>Pt(a(l))?.hostname||a(l).vm_id]),n(R,T)},O=R=>{var T=Ct("-");n(R,T)};j(N,R=>{a(l).vm_id?R(G):R(O,!1)})}t(F);var E=r(F),tt=e(E,!0);t(E);var W=r(E),ct=e(W);t(W),t(C),H((R,T)=>{U(M,1,`px-2 py-1 text-xs font-medium rounded ${R??""}`),i(Q,a(l).severity),i(h,a(l).type),i(V,a(l).message),i(tt,T)},[()=>yt(a(l).severity),()=>new Date(a(l).created_at).toLocaleString()]),D("click",ct,()=>mt(a(l).id)),n(J,C)}),n(v,k)};j(B,v=>{a(P).length===0?v(o):v(w,!1)})}t(f),t(b),t(p),n(c,p)};j(qt,c=>{a(_)==="alerts"&&c(zt)})}t(d),H(()=>{U(z,1,`px-4 py-2 rounded-lg ${a(_)==="overview"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`),U(A,1,`px-4 py-2 rounded-lg ${a(_)==="vms"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`),U(xt,1,`px-4 py-2 rounded-lg ${a(_)==="customers"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`),U(Z,1,`px-4 py-2 rounded-lg ${a(_)==="alerts"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`),i(Ot,`Alerts ${a(P).length>0&&`(${a(P).length})`}`)}),D("click",z,()=>m(_,"overview")),D("click",A,()=>m(_,"vms")),D("click",xt,()=>m(_,"customers")),D("click",Z,()=>m(_,"alerts")),D("click",Et,at),n(s,d)};j(Ut,s=>{a(x)&&s(Gt)})}t(ht),t(vt),n(Ft,vt),de()}export{Pe as component};
