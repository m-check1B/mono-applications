import{c as z,a as n,f as c,t as dt}from"../chunks/CZY_NlAX.js";import{o as gt}from"../chunks/BHyL2apj.js";import{ag as ht,ah as C,ai as _t,m as t,aj as D,G as S,ak as e,al as l,am as s,an as E,ao as ma}from"../chunks/CHIrzwsT.js";import{s as v}from"../chunks/DsvTbyZG.js";import{i as _}from"../chunks/DNv7RG3c.js";import{e as Ra,i as La}from"../chunks/De-eo5w8.js";import{d as pt}from"../chunks/CaHQap0G.js";import{s as ya}from"../chunks/U6XQp83X.js";var ft=c('<div class="loading svelte-1uha8ag"><div class="loading-text svelte-1uha8ag">ESTABLISHING SECURE CONNECTION</div> <div class="loading-bar svelte-1uha8ag"></div> <div class="subtitle svelte-1uha8ag">Interrogating Kraliki Subsystems</div></div>'),bt=c('<div class="container svelte-1uha8ag"><div class="card pulse-scan svelte-1uha8ag" style="max-width: 600px; margin: 100px auto;"><h2 class="red svelte-1uha8ag">SYSTEM_CRITICAL // CONNECTION_FAILURE</h2> <div class="log-box mt-16 svelte-1uha8ag" style="color: var(--system-red); border-color: var(--system-red);"> </div> <button class="brutal-btn mt-16 svelte-1uha8ag" style="width: 100%; border-color: var(--system-red);">REINIT_CONNECTION_PROTOCOL</button></div></div>'),mt=c('<span class="pulse-dot green big svelte-1uha8ag"></span>'),yt=c('<span class="pulse-dot red big pulse-brutal svelte-1uha8ag"></span>'),Et=c('<span class="svelte-1uha8ag"> </span>'),xt=c('<div class="log-box svelte-1uha8ag" style="color: var(--system-red); border-color: var(--system-red);"> </div>'),St=c('<div class="log-box svelte-1uha8ag"> <!></div>'),Nt=c('<div class="stat-row svelte-1uha8ag"><span class="stat-label svelte-1uha8ag"> </span> <span> </span></div>'),At=c('<div style="margin-top: 12px;" class="svelte-1uha8ag"><div class="stat-label svelte-1uha8ag" style="margin-bottom: 6px;">Top Priorities</div> <!></div>'),Tt=c('<div class="log-box svelte-1uha8ag" style="margin-top: 12px;"> </div>'),It=c('<div class="stat-row svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Greeting</span> <span class="stat-value cyan svelte-1uha8ag"> </span></div> <div class="stat-row svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Overdue</span> <span class="stat-value red svelte-1uha8ag"> </span></div> <div class="stat-row svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Due Today</span> <span class="stat-value yellow svelte-1uha8ag"> </span></div> <!> <!>',1),Ot=c("<!> <!>",1),kt=c('<div style="color: var(--muted-foreground); font-size: 11px;" class="svelte-1uha8ag">Loading Focus by Kraliki...</div>'),Ct=c('<div style="color: var(--muted-foreground); font-size: 11px;" class="svelte-1uha8ag">No Focus data yet.</div>'),Rt=c('<div class="agents-summary svelte-1uha8ag"><div class="agent-stat svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Running</span> <span class="stat-value green svelte-1uha8ag"> </span></div> <div class="agent-stat svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Completed</span> <span class="stat-value cyan svelte-1uha8ag"> </span></div> <div class="agent-stat svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Failed</span> <span> </span></div></div> <a href="/agents" class="brutal-btn mt-16 svelte-1uha8ag" style="width: 100%;">VIEW_ALL_AGENTS</a>',1),Lt=c('<p class="hint svelte-1uha8ag">No agents currently active.</p> <a href="/agents" class="brutal-btn mt-16 svelte-1uha8ag" style="width: 100%;">MANAGE_SWARM</a>',1),Ut=c('<div class="bb-message svelte-1uha8ag"><div class="bb-header svelte-1uha8ag"><span class="bb-agent svelte-1uha8ag"> </span> <span class="bb-topic svelte-1uha8ag"> </span> <span class="bb-time svelte-1uha8ag"> </span></div> <div class="bb-content svelte-1uha8ag"> </div></div>'),Ft=c('<div class="card blackboard-card span-2 svelte-1uha8ag"><h2 class="svelte-1uha8ag"> </h2> <div class="blackboard-stats svelte-1uha8ag"><span class="svelte-1uha8ag"> </span> <span class="svelte-1uha8ag"> </span></div> <div class="blackboard-feed svelte-1uha8ag"></div> <a href="/blackboard" class="brutal-btn mt-16 svelte-1uha8ag" style="width: 100%;">VIEW_FULL_FEED</a></div>'),Gt=c('<div><div class="status-icon svelte-1uha8ag"><!></div> <div class="status-text svelte-1uha8ag"><span class="status-label svelte-1uha8ag">SYSTEM_STATUS</span> <span class="status-value svelte-1uha8ag"> </span></div> <div class="status-summary svelte-1uha8ag"><span class="svelte-1uha8ag"> </span> <!> <span class="svelte-1uha8ag"> </span></div></div> <div class="grid svelte-1uha8ag"><div class="card focus-card svelte-1uha8ag"><h2 class="glitch svelte-1uha8ag">FOCUS // TODAY <span style="margin-left: auto; display: flex; gap: 8px;" class="svelte-1uha8ag"><a href="/focus" class="brutal-btn small svelte-1uha8ag">OPEN</a> <button class="brutal-btn small outline svelte-1uha8ag"> </button></span></h2> <!></div> <div class="card actions-card svelte-1uha8ag"><h2 class="glitch svelte-1uha8ag">QUICK_ACTIONS</h2> <div class="actions-grid svelte-1uha8ag"><a href="/agents" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">ü§ñ</div> <div class="action-label svelte-1uha8ag">SPAWN_AGENT</div></a> <a href="/notebook" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">üìì</div> <div class="action-label svelte-1uha8ag">NOTEBOOK</div></a> <a href="/linear" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">üìã</div> <div class="action-label svelte-1uha8ag">VIEW_ISSUES</div></a> <a href="/health" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">‚ù§Ô∏è</div> <div class="action-label svelte-1uha8ag">HEALTH</div></a> <a href="/blackboard" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">üí¨</div> <div class="action-label svelte-1uha8ag">BLACKBOARD</div></a> <a href="/agents" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">üë•</div> <div class="action-label svelte-1uha8ag">SWARM</div></a> <a href="/recall" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">üß†</div> <div class="action-label svelte-1uha8ag">RECALL</div></a> <a href="/costs" class="action-btn svelte-1uha8ag"><div class="action-icon svelte-1uha8ag">üí∞</div> <div class="action-label svelte-1uha8ag">COSTS</div></a></div></div> <div class="card agents-card svelte-1uha8ag"><h2 class="glitch svelte-1uha8ag"> </h2> <!></div> <!></div>',1);function wt(Ua,Fa){ht(Fa,!0);let o=D(null),Ea=D(!0),$=D(null),N=D(null),P=D(null),H=D(!1),K=D(null);async function ta(){try{const a=await fetch("/api/status");if(!a.ok)throw new Error("Failed to fetch status");S(o,await a.json(),!0),S($,null)}catch(a){S($,a instanceof Error?a.message:"Unknown error",!0)}finally{S(Ea,!1)}}function Q(a){if(!a?.kraliki)return!1;const g=a.kraliki.health?.overall;return g==="healthy"||g==="degraded"}function sa(a){return a?.agentStatus?a.agentStatus.filter(g=>g.status==="running").length:0}function Ga(a){return a==null?"medium":a>=80?"high":a>=60?"medium":"low"}function Da(a){return a==="high"||a==="urgent"?"red":a==="medium"?"yellow":"cyan"}function Pa(a){if(!a)return null;const g=a.priorities||a.top_tasks?.map(p=>({title:p.title||p.task?.title||"Untitled task",priority:p.priority||Ga(p.priority_score)}))||[];return{greeting:a.greeting||"Ready to focus?",priorities:g,overdue:a.overdue??a.overdue_count??0,due_today:a.due_today??a.due_today_count??0,insight:a.insight||a.shadow_insight||a.reasoning||a.recommendation}}function Ba(a){if(!a)return null;const g=a.message||a.action||"Next action ready",p=a.reason||a.reasoning||a.suggestion;return{action:g,reason:p}}async function xa(){S(H,!0),S(K,null);try{const[a,g]=await Promise.all([fetch("/api/focus/brain?action=daily-plan",{signal:AbortSignal.timeout(15e3)}),fetch("/api/focus/brain?action=next-action",{signal:AbortSignal.timeout(15e3)})]);if(a.ok){const p=await a.json();S(N,Pa(p.data||p),!0)}if(g.ok){const p=await g.json();S(P,Ba(p.data||p),!0)}!a.ok&&!g.ok&&S(K,"Focus Brain unavailable")}catch(a){S(K,a instanceof Error?a.message:"Focus Brain error",!0)}finally{S(H,!1)}}gt(()=>{ta(),xa();const a=setInterval(ta,3e4);return()=>clearInterval(a)});var Sa=z(),Ma=C(Sa);{var ja=a=>{var g=ft();n(a,g)},Ha=a=>{var g=z(),p=C(g);{var Ka=B=>{var M=bt(),J=e(M),W=l(e(J),2),w=e(W);s(W);var X=l(W,2);X.__click=ta,s(J),s(M),E(j=>v(w,`ERROR_LOG: ${j??""}
				TRACE: SESSION_REJECTED_BY_HOST
				ACTION: RETRY_REQUIRED`),[()=>t($).toUpperCase()]),n(B,M)},Wa=B=>{var M=z(),J=C(M);{var W=w=>{var X=Gt(),j=C(X);let Na;var ea=e(j),wa=e(ea);{var Va=r=>{var i=mt();n(r,i)},Ya=r=>{var i=yt();n(r,i)};_(wa,r=>{Q(t(o))?r(Va):r(Ya,!1)})}s(ea);var la=l(ea,2),Aa=l(e(la),2),za=e(Aa,!0);s(Aa),s(la);var Ta=l(la,2),ra=e(Ta),$a=e(ra);s(ra);var Ia=l(ra,2);{var Qa=r=>{var i=Et(),f=e(i);s(i),E(()=>v(f,`ISSUES: ${t(o).linear.stats.total??""} TOTAL`)),n(r,i)};_(Ia,r=>{t(o).linear&&r(Qa)})}var Oa=l(Ia,2),Ja=e(Oa);s(Oa),s(Ta),s(j);var ka=l(j,2),va=e(ka),ia=e(va),Ca=l(e(ia)),q=l(e(Ca),2);q.__click=xa;var Xa=e(q,!0);s(q),s(Ca),s(ia);var qa=l(ia,2);{var Za=r=>{var i=xt(),f=e(i);s(i),E(()=>v(f,`FOCUS_BRAIN_OFFLINE // ${t(K)??""}`)),n(r,i)},at=r=>{var i=z(),f=C(i);{var O=m=>{var x=Ot(),T=C(x);{var R=u=>{var y=St(),d=e(y),I=l(d);{var L=b=>{var U=dt();E(()=>v(U,`
REASON: ${t(P).reason??""}`)),n(b,U)};_(I,b=>{t(P).reason&&b(L)})}s(y),E(()=>v(d,`NEXT_ACTION: ${t(P).action??""} `)),n(u,y)};_(T,u=>{t(P)&&u(R)})}var k=l(T,2);{var h=u=>{var y=It(),d=C(y),I=l(e(d),2),L=e(I,!0);s(I),s(d);var b=l(d,2),U=l(e(b),2),Z=e(U,!0);s(U),s(b);var V=l(b,2),Y=l(e(V),2),ua=e(Y,!0);s(Y),s(V);var aa=l(V,2);{var ca=F=>{var G=At(),ha=l(e(G),2);Ra(ha,17,()=>t(N).priorities.slice(0,3),La,(it,_a)=>{var pa=Nt(),fa=e(pa),nt=e(fa,!0);s(fa);var ba=l(fa,2),ot=e(ba,!0);s(ba),s(pa),E((ut,ct)=>{v(nt,t(_a).title),ya(ba,1,`stat-value ${ut??""}`,"svelte-1uha8ag"),v(ot,ct)},[()=>Da(t(_a).priority),()=>t(_a).priority.toUpperCase()]),n(it,pa)}),s(G),n(F,G)};_(aa,F=>{t(N).priorities.length&&F(ca)})}var da=l(aa,2);{var ga=F=>{var G=Tt(),ha=e(G);s(G),E(()=>v(ha,`INSIGHT: ${t(N).insight??""}`)),n(F,G)};_(da,F=>{t(N).insight&&F(ga)})}E(()=>{v(L,t(N).greeting),v(Z,t(N).overdue),v(ua,t(N).due_today)}),n(u,y)};_(k,u=>{t(N)&&u(h)})}n(m,x)},A=m=>{var x=z(),T=C(x);{var R=h=>{var u=kt();n(h,u)},k=h=>{var u=Ct();n(h,u)};_(T,h=>{t(H)?h(R):h(k,!1)},!0)}n(m,x)};_(f,m=>{t(N)||t(P)?m(O):m(A,!1)},!0)}n(r,i)};_(qa,r=>{t(K)?r(Za):r(at,!1)})}s(va);var na=l(va,4),oa=e(na),tt=e(oa);s(oa);var st=l(oa,2);{var et=r=>{var i=Rt(),f=C(i),O=e(f),A=l(e(O),2),m=e(A,!0);s(A),s(O);var x=l(O,2),T=l(e(x),2),R=e(T,!0);s(T),s(x);var k=l(x,2),h=l(e(k),2);let u;var y=e(h,!0);s(h),s(k),s(f),ma(2),E((d,I,L,b)=>{v(m,d),v(R,I),u=ya(h,1,"stat-value svelte-1uha8ag",null,u,L),v(y,b)},[()=>sa(t(o)),()=>t(o).agentStatus.filter(d=>d.status==="completed").length,()=>({red:t(o).agentStatus.filter(d=>d.status==="failed").length>0}),()=>t(o).agentStatus.filter(d=>d.status==="failed").length]),n(r,i)},lt=r=>{var i=Lt();ma(2),n(r,i)};_(st,r=>{t(o).agentStatus&&t(o).agentStatus.length>0?r(et):r(lt,!1)})}s(na);var rt=l(na,2);{var vt=r=>{var i=Ft(),f=e(i),O=e(f);s(f);var A=l(f,2),m=e(A),x=e(m);s(m);var T=l(m,2),R=e(T);s(T),s(A);var k=l(A,2);Ra(k,21,()=>t(o).blackboard.messages.slice(0,20),La,(h,u)=>{var y=Ut(),d=e(y),I=e(d),L=e(I,!0);s(I);var b=l(I,2),U=e(b);s(b);var Z=l(b,2),V=e(Z);s(Z),s(d);var Y=l(d,2),ua=e(Y);s(Y),s(y),E((aa,ca,da,ga)=>{v(L,aa),v(U,`#${ca??""}`),v(V,`[${da??""}]`),v(ua,`${ga??""}${t(u).message.length>400?"...":""}`)},[()=>t(u).agent.toUpperCase(),()=>t(u).topic.toUpperCase(),()=>t(u).time.slice(11,19),()=>t(u).message.slice(0,400)]),n(h,y)}),s(k),ma(2),s(i),E((h,u)=>{v(O,`BLACKBOARD // ${t(o).blackboard.stats.total??""} PACKETS`),v(x,`TOPICS: ${h??""}`),v(R,`ACTIVE_AGENTS: ${u??""}`)},[()=>Object.keys(t(o).blackboard.stats.by_topic).join(", ").toUpperCase(),()=>Object.keys(t(o).blackboard.stats.by_agent).length]),n(r,i)};_(rt,r=>{t(o).blackboard&&r(vt)})}s(ka),E((r,i,f,O,A)=>{Na=ya(j,1,"status-banner svelte-1uha8ag",null,Na,r),v(za,i),v($a,`AGENTS: ${f??""} RUNNING`),v(Ja,`UPTIME: ${O??""}D`),q.disabled=t(H),v(Xa,t(H)?"LOADING...":"REFRESH"),v(tt,`ACTIVE_AGENTS // ${A??""} RUNNING`)},[()=>({healthy:Q(t(o)),unhealthy:!Q(t(o))}),()=>Q(t(o))?"OPERATIONAL":"DEGRADED",()=>sa(t(o)),()=>Math.floor((t(o)?.kraliki?.system?.uptime_seconds||0)/86400),()=>sa(t(o))]),n(w,X)};_(J,w=>{t(o)&&w(W)},!0)}n(B,M)};_(p,B=>{t($)?B(Ka):B(Wa,!1)},!0)}n(a,g)};_(Ma,a=>{t(Ea)&&!t(o)?a(ja):a(Ha,!1)})}n(Ua,Sa),_t()}pt(["click"]);export{wt as component};
