import{f as y,a as f,c as bs}from"../chunks/CZY_NlAX.js";import{o as Vs}from"../chunks/BHyL2apj.js";import{ag as Ws,ak as a,an as S,ai as Xs,G as R,aj as ns,al as i,am as s,m as t,ah as cs,ao as w,aq as P,ar as Cs}from"../chunks/CHIrzwsT.js";import{s as o}from"../chunks/DsvTbyZG.js";import{i as M}from"../chunks/DNv7RG3c.js";import{e as B,i as H}from"../chunks/De-eo5w8.js";import{d as zs}from"../chunks/CaHQap0G.js";import{s as As}from"../chunks/U6XQp83X.js";import{s as q}from"../chunks/CuoGBMhC.js";var Js=y('<div class="loading-state svelte-h62oi9"><span class="loading-text svelte-h62oi9">CALCULATING_EXPENDITURES...</span></div>'),Qs=y('<div class="error-state svelte-h62oi9"><span class="error-text svelte-h62oi9"> </span></div>'),Zs=y('<div class="cli-bar svelte-h62oi9"><div class="cli-info svelte-h62oi9"><span class="cli-name svelte-h62oi9"> </span> <span class="cli-stats svelte-h62oi9"> </span></div> <div class="bar-container svelte-h62oi9"><div class="bar-fill svelte-h62oi9"></div></div> <span class="cli-cost svelte-h62oi9"> </span></div>'),sa=y('<div class="model-item svelte-h62oi9"><div class="model-header svelte-h62oi9"><span class="model-name svelte-h62oi9"> </span> <span class="model-cost svelte-h62oi9"> </span></div> <div class="model-stats svelte-h62oi9"><span class="svelte-h62oi9"> </span> <span class="svelte-h62oi9"> </span> <span class="svelte-h62oi9"> </span></div></div>'),aa=y('<div class="hour-bar svelte-h62oi9"><div class="hour-fill svelte-h62oi9"></div> <span class="hour-label svelte-h62oi9"> </span> <span class="hour-value svelte-h62oi9"> </span></div>'),ta=y('<div class="card svelte-h62oi9"><h3 class="svelte-h62oi9">HOURLY COST DISTRIBUTION // TODAY</h3> <div class="hourly-chart svelte-h62oi9"></div></div>'),ea=y('<div class="agent-row svelte-h62oi9"><span class="agent-id svelte-h62oi9"> </span> <span class="agent-cli svelte-h62oi9"> </span> <span class="agent-cost svelte-h62oi9"> </span> <span class="agent-duration svelte-h62oi9"> </span> <span> </span> <span> </span></div>'),ia=y('<div class="card svelte-h62oi9"><h3 class="svelte-h62oi9">TOP AGENTS BY COST // TODAY</h3> <p class="hint svelte-h62oi9">Efficiency = points earned per dollar spent (higher is better)</p> <div class="agent-table svelte-h62oi9"><div class="agent-row header svelte-h62oi9"><span class="svelte-h62oi9">AGENT</span> <span class="svelte-h62oi9">CLI</span> <span class="svelte-h62oi9">COST</span> <span class="svelte-h62oi9">DURATION</span> <span class="svelte-h62oi9">POINTS</span> <span class="svelte-h62oi9">EFFICIENCY</span></div> <!></div></div>'),ra=y('<div class="stats-grid svelte-h62oi9"><div class="stat-card highlight svelte-h62oi9"><span class="stat-value svelte-h62oi9"> </span> <span class="stat-label svelte-h62oi9">AGENT COST TODAY</span></div> <div class="stat-card svelte-h62oi9"><span class="stat-value svelte-h62oi9"> </span> <span class="stat-label svelte-h62oi9">7-DAY AGENT COST</span></div> <div class="stat-card svelte-h62oi9"><span class="stat-value svelte-h62oi9"> </span> <span class="stat-label svelte-h62oi9">AGENT TOKENS TODAY</span></div> <div class="stat-card svelte-h62oi9"><span class="stat-value green svelte-h62oi9"> </span> <span class="stat-label svelte-h62oi9">AGENTS RUN TODAY</span></div> <div class="stat-card svelte-h62oi9"><span class="stat-value cyan svelte-h62oi9"> </span> <span class="stat-label svelte-h62oi9">AVG COST/AGENT</span></div></div> <div class="grid-2 svelte-h62oi9"><div class="card svelte-h62oi9"><h3 class="svelte-h62oi9">AGENT COST BY CLI // TODAY</h3> <div class="cli-bars svelte-h62oi9"></div></div> <div class="card svelte-h62oi9"><h3 class="svelte-h62oi9">AGENT COST BY MODEL // TODAY</h3> <div class="model-list svelte-h62oi9"></div></div></div> <!> <!>',1),oa=y(`<div class="page svelte-h62oi9"><div class="page-header svelte-h62oi9"><h2 class="glitch svelte-h62oi9">Agent Cost Analytics // Claude Code Agents Only</h2> <div class="controls svelte-h62oi9"><button class="brutal-btn svelte-h62oi9"> </button></div></div> <div class="tracking-notice svelte-h62oi9"><span class="notice-icon svelte-h62oi9">ℹ️</span> <div class="notice-content svelte-h62oi9"><strong class="svelte-h62oi9">TRACKING SCOPE:</strong> This dashboard tracks costs from Claude Code agents spawned via the Task tool.
			Interactive CLI usage (claude, codex, gemini, opencode commands) is not currently tracked.</div></div> <!></div>`);function fa(Ns,Es){Ws(Es,!0);let n=ns(null),D=ns(!0),F=ns(null);async function V(){R(D,!0),R(F,null);try{const e=await fetch("/api/costs");if(!e.ok)throw new Error("Failed to load cost data");R(n,await e.json(),!0)}catch(e){R(F,e instanceof Error?e.message:"Failed to load costs",!0)}finally{R(D,!1)}}function N(e){return`$${e.toFixed(2)}`}function L(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()}function Is(e){const _=Math.floor(e/6e4);if(_>=60){const J=Math.floor(_/60),Q=_%60;return`${J}h ${Q}m`}return`${_}m`}function W(e){return{claude:"#33ff00",opencode:"#00d4ff",codex:"#9d4edd",gemini:"#ff9500",grok:"#ff4444"}[e]||"#6b7280"}function Ss(e){return e.includes("opus")?"OPUS":e.includes("sonnet")?"SONNET":e.includes("haiku")?"HAIKU":e.includes("gemini")?"GEMINI":e.toUpperCase().slice(0,12)}Vs(()=>{V();const e=setInterval(V,6e4);return()=>clearInterval(e)});const $s=P(()=>t(n)?.hourly_costs.reduce((e,_)=>Math.max(e,_.cost),0)||1);var X=oa(),z=a(X),ds=i(a(z),2),j=a(ds);j.__click=V;var ks=a(j,!0);s(j),s(ds),s(z);var Gs=i(z,4);{var Ds=e=>{var _=Js();f(e,_)},Ys=e=>{var _=bs(),J=cs(_);{var Q=$=>{var k=Qs(),K=a(k),Z=a(K);s(K),s(k),S(()=>o(Z,`ERROR: ${t(F)??""}`)),f($,k)},Us=$=>{var k=bs(),K=cs(k);{var Z=ss=>{var ps=ra(),as=cs(ps),ts=a(as),hs=a(ts),Rs=a(hs,!0);s(hs),w(2),s(ts);var es=i(ts,2),_s=a(es),ws=a(_s,!0);s(_s),w(2),s(es);var is=i(es,2),us=a(is),Ms=a(us,!0);s(us),w(2),s(is);var rs=i(is,2),fs=a(rs),Fs=a(fs,!0);s(fs),w(2),s(rs);var ms=i(rs,2),gs=a(ms),Ls=a(gs,!0);s(gs),w(2),s(ms),s(as);var os=i(as,2),vs=a(os),xs=i(a(vs),2);B(xs,21,()=>Object.entries(t(n).by_cli).sort((v,l)=>l[1].cost-v[1].cost),H,(v,l)=>{var h=P(()=>Cs(t(l),2));let m=()=>t(h)[0],c=()=>t(h)[1];const r=P(()=>Math.max(...Object.values(t(n).by_cli).map(O=>O.cost))||1);var p=Zs(),d=a(p),x=a(d),u=a(x,!0);s(x);var b=i(x,2),T=a(b);s(b),s(d);var g=i(d,2),E=a(g);s(g);var C=i(g,2),A=a(C,!0);s(C),s(p),S((O,Y,I,G,U)=>{q(x,`color: ${O??""}`),o(u,Y),o(T,`${c().agents??""} agents / ${I??""} tokens`),q(E,`width: ${c().cost/t(r)*100}%; background: ${G??""}`),o(A,U)},[()=>W(m()),()=>m().toUpperCase(),()=>L(c().tokens),()=>W(m()),()=>N(c().cost)]),f(v,p)}),s(xs),s(vs);var Ts=i(vs,2),ys=i(a(Ts),2);B(ys,21,()=>Object.entries(t(n).by_model).sort((v,l)=>l[1].cost-v[1].cost),H,(v,l)=>{var h=P(()=>Cs(t(l),2));let m=()=>t(h)[0],c=()=>t(h)[1];var r=sa(),p=a(r),d=a(p),x=a(d,!0);s(d);var u=i(d,2),b=a(u,!0);s(u),s(p);var T=i(p,2),g=a(T),E=a(g);s(g);var C=i(g,2),A=a(C);s(C);var O=i(C,2),Y=a(O);s(O),s(T),s(r),S((I,G,U,ls)=>{o(x,I),o(b,G),o(E,`${c().requests??""} requests`),o(A,`In: ${U??""}`),o(Y,`Out: ${ls??""}`)},[()=>Ss(m()),()=>N(c().cost),()=>L(c().input_tokens),()=>L(c().output_tokens)]),f(v,r)}),s(ys),s(Ts),s(os);var Os=i(os,2);{var js=v=>{var l=ta(),h=i(a(l),2);B(h,21,()=>t(n).hourly_costs,H,(m,c)=>{var r=aa(),p=a(r),d=i(p,2),x=a(d,!0);s(d);var u=i(d,2),b=a(u,!0);s(u),s(r),S((T,g)=>{q(p,`height: ${t(c).cost/t($s)*100}%`),o(x,T),o(b,g)},[()=>t(c).hour.slice(0,2),()=>N(t(c).cost)]),f(m,r)}),s(h),s(l),f(v,l)};M(Os,v=>{t(n).hourly_costs.length>0&&v(js)})}var Ks=i(Os,2);{var Ps=v=>{var l=ia(),h=i(a(l),4),m=i(a(h),2);B(m,17,()=>t(n).top_agents,H,(c,r)=>{var p=ea(),d=a(p),x=a(d,!0);s(d);var u=i(d,2),b=a(u,!0);s(u);var T=i(u,2),g=a(T,!0);s(T);var E=i(T,2),C=a(E,!0);s(E);var A=i(E,2);let O;var Y=a(A,!0);s(A);var I=i(A,2);let G;var U=a(I,!0);s(I),s(p),S((ls,Bs,Hs,qs)=>{o(x,t(r).id),q(u,`color: ${ls??""}`),o(b,Bs),o(g,Hs),o(C,qs),O=As(A,1,"agent-points svelte-h62oi9",null,O,{"has-points":t(r).points!==null}),o(Y,t(r).points??"--"),G=As(I,1,"agent-efficiency svelte-h62oi9",null,G,{good:t(r).efficiency&&t(r).efficiency>50,bad:t(r).efficiency&&t(r).efficiency<10}),o(U,t(r).efficiency!==null?`${t(r).efficiency} pts/$`:"--")},[()=>W(t(r).cli||"unknown"),()=>(t(r).cli||"UNKNOWN").toUpperCase(),()=>N(t(r).cost),()=>Is(t(r).duration_ms)]),f(c,p)}),s(h),s(l),f(v,l)};M(Ks,v=>{t(n).top_agents.length>0&&v(Ps)})}S((v,l,h,m)=>{o(Rs,v),o(ws,l),o(Ms,h),o(Fs,t(n).summary.total_agents_today),o(Ls,m)},[()=>N(t(n).summary.total_cost_today),()=>N(t(n).summary.total_cost_week),()=>L(t(n).summary.total_tokens_today),()=>N(t(n).summary.avg_cost_per_agent)]),f(ss,ps)};M(K,ss=>{t(n)&&ss(Z)},!0)}f($,k)};M(J,$=>{t(F)?$(Q):$(Us,!1)},!0)}f(e,_)};M(Gs,e=>{t(D)&&!t(n)?e(Ds):e(Ys,!1)})}s(X),S(()=>{j.disabled=t(D),o(ks,t(D)?"LOADING...":"REFRESH")}),f(Ns,X),Xs()}zs(["click"]);export{fa as component};
