import{f as u,a as c,c as ct}from"../chunks/CZY_NlAX.js";import{o as ua}from"../chunks/BHyL2apj.js";import{ag as _a,aj as F,ap as ut,ah as de,G as o,ak as s,al as r,an as E,ai as ya,m as e,am as t,as as ba,ao as _t,aq as fa,ar as ha}from"../chunks/CHIrzwsT.js";import{s as v}from"../chunks/DsvTbyZG.js";import{i as x}from"../chunks/DNv7RG3c.js";import{e as ge,i as xe}from"../chunks/De-eo5w8.js";import{s as yt,r as Q}from"../chunks/Bf116p4L.js";import{s as ie}from"../chunks/U6XQp83X.js";import{d as ma,e as Ke}from"../chunks/CaHQap0G.js";import{b as X}from"../chunks/C8UA6rw1.js";import{s as ga,a as xa}from"../chunks/CKCuCExv.js";import{i as Sa}from"../chunks/ojSKWpQA.js";var Ea=u('<div class="card success-card svelte-1yre5p1"><span> </span></div>'),ka=u('<div class="card error-card svelte-1yre5p1"><span> </span></div>'),Ca=u('<p class="hint svelte-1yre5p1">No items in inbox. Use quick capture or drag & drop files above.</p>'),Da=u('<div class="inbox-item svelte-1yre5p1"><div class="item-header svelte-1yre5p1"><span> </span> <span class="item-time svelte-1yre5p1"> </span></div> <div class="item-content svelte-1yre5p1"> </div> <div class="item-actions svelte-1yre5p1"><button class="item-btn process svelte-1yre5p1" title="Send to Blackboard">PROCESS</button> <button class="item-btn archive svelte-1yre5p1" title="Archive">ARCHIVE</button> <button class="item-btn delete svelte-1yre5p1" title="Delete">DELETE</button></div></div>'),Ia=u('<div class="inbox-list svelte-1yre5p1"></div>'),Oa=u('<div class="archived-item svelte-1yre5p1"><span class="item-type-small svelte-1yre5p1"> </span> <span class="archived-content svelte-1yre5p1"> </span> <button class="item-btn-small delete svelte-1yre5p1">√ó</button></div>'),Ta=u('<div class="card archived-card svelte-1yre5p1"><h3 class="svelte-1yre5p1"> </h3> <div class="archived-list svelte-1yre5p1"></div></div>'),wa=u('<div class="card capture-card svelte-1yre5p1"><h3 class="svelte-1yre5p1">QUICK CAPTURE</h3> <textarea class="capture-input svelte-1yre5p1" placeholder="Paste text, URLs, notes, ideas... (Ctrl+Enter to dump)" rows="4"></textarea> <button class="brutal-btn">DUMP</button></div> <div role="region" aria-label="File drop zone"><div class="drop-icon svelte-1yre5p1">üìÅ</div> <p class="drop-text svelte-1yre5p1">OR DRAG & DROP FILES HERE</p></div> <div class="card inbox-list-card svelte-1yre5p1"><h3 class="svelte-1yre5p1"> </h3> <!></div> <!>',1),Na=u('<span class="config-name svelte-1yre5p1"> </span>'),Aa=u('<div class="loading svelte-1yre5p1">LOADING_SCOPE_CONFIGURATION...</div>'),Pa=u('<div class="card error-card svelte-1yre5p1"><h3 style="color: var(--system-red);">CONNECTION_FAILED</h3> <p> </p></div>'),Ra=u('<p class="hint svelte-1yre5p1"> </p>'),Fa=u('<span class="scope-desc svelte-1yre5p1"> </span>'),Ua=u('<div class="scope-actions svelte-1yre5p1"><button class="action-btn edit svelte-1yre5p1" title="Edit scope">EDIT</button> <button class="action-btn delete svelte-1yre5p1" title="Delete scope">DEL</button></div>'),La=u('<div class="subpath-row svelte-1yre5p1"><span> </span> <span class="subpath-name svelte-1yre5p1"> </span> <span class="subpath-path svelte-1yre5p1"> </span></div>'),$a=u('<div class="subpaths svelte-1yre5p1"><span class="detail-label svelte-1yre5p1">SUBPATHS</span> <!></div>'),Ga=u('<div class="scope-details svelte-1yre5p1"><div class="detail-row svelte-1yre5p1"><span class="detail-label svelte-1yre5p1">PATH</span> <span class="detail-value mono svelte-1yre5p1"> </span></div> <!></div>'),ja=u('<div><div class="scope-header svelte-1yre5p1"><button type="button" class="scope-toggle svelte-1yre5p1"><div class="scope-main svelte-1yre5p1"><span> </span> <span class="scope-name svelte-1yre5p1"> </span> <!></div> <span class="expand-icon svelte-1yre5p1"> </span></button> <!></div> <!></div>'),Ba=u('<div class="card storage-card svelte-1yre5p1"><div class="storage-header svelte-1yre5p1"><div class="storage-info svelte-1yre5p1"><span class="storage-type svelte-1yre5p1"> </span> <span class="storage-base svelte-1yre5p1"> </span></div> <div class="storage-meta svelte-1yre5p1"><span class="version svelte-1yre5p1"> </span> <span class="last-checked"> </span></div></div> <!></div> <div class="scopes-list svelte-1yre5p1"></div> <div class="card config-location svelte-1yre5p1"><span class="config-label svelte-1yre5p1">CONFIG_FILE:</span> <span class="config-path svelte-1yre5p1"> </span></div>',1),Ma=u('<div class="scopes-actions svelte-1yre5p1"><!> <button class="brutal-btn outline svelte-1yre5p1">EDIT CONFIG</button> <button class="brutal-btn">+ ADD SCOPE</button> <button class="brutal-btn outline svelte-1yre5p1"> </button></div> <!>',1),Ha=u('<div class="modal-error svelte-1yre5p1"> </div>'),Ka=u('<span class="hint svelte-1yre5p1">Name cannot be changed after creation</span>'),Va=u('<div class="subpath-input-row svelte-1yre5p1"><input type="text" placeholder="Name" class="subpath-name-input svelte-1yre5p1"/> <input type="text" placeholder="Relative path" class="subpath-path-input svelte-1yre5p1"/> <button type="button" class="remove-subpath-btn svelte-1yre5p1">√ó</button></div>'),Wa=u('<span class="hint svelte-1yre5p1">No subpaths defined</span>'),Ja=u('<div class="modal-overlay svelte-1yre5p1" role="button" tabindex="0" aria-label="Close edit modal"><div class="modal svelte-1yre5p1" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1yre5p1"><h3 class="svelte-1yre5p1"> </h3> <button class="close-btn svelte-1yre5p1">√ó</button></div> <div class="modal-body svelte-1yre5p1"><!> <div class="form-group svelte-1yre5p1"><label for="scope-name" class="svelte-1yre5p1">SCOPE NAME</label> <input id="scope-name" type="text" placeholder="e.g. my-scope" class="svelte-1yre5p1"/> <!></div> <div class="form-group svelte-1yre5p1"><label for="scope-path" class="svelte-1yre5p1">PATH</label> <input id="scope-path" type="text" placeholder="/path/to/directory" class="svelte-1yre5p1"/></div> <div class="form-group svelte-1yre5p1"><label for="scope-desc" class="svelte-1yre5p1">DESCRIPTION</label> <input id="scope-desc" type="text" placeholder="What this scope contains" class="svelte-1yre5p1"/></div> <div class="form-group svelte-1yre5p1"><div class="subpaths-header svelte-1yre5p1"><span class="subpaths-label svelte-1yre5p1">SUBPATHS</span> <button type="button" class="add-subpath-btn svelte-1yre5p1">+ ADD</button></div> <!> <!></div></div> <div class="modal-footer svelte-1yre5p1"><button class="brutal-btn outline svelte-1yre5p1">CANCEL</button> <button class="brutal-btn"> </button></div></div></div>'),qa=u('<div class="modal-overlay svelte-1yre5p1" role="button" tabindex="0" aria-label="Close delete confirmation"><div class="modal small svelte-1yre5p1" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header danger svelte-1yre5p1"><h3 class="svelte-1yre5p1">DELETE SCOPE</h3></div> <div class="modal-body svelte-1yre5p1"><p>Are you sure you want to delete scope <strong> </strong>?</p> <p class="warning svelte-1yre5p1">This action cannot be undone.</p></div> <div class="modal-footer svelte-1yre5p1"><button class="brutal-btn outline svelte-1yre5p1">CANCEL</button> <button class="brutal-btn danger svelte-1yre5p1"> </button></div></div></div>'),za=u('<div class="modal-error svelte-1yre5p1"> </div>'),Xa=u('<div class="modal-overlay svelte-1yre5p1" role="button" tabindex="0" aria-label="Close config edit modal"><div class="modal svelte-1yre5p1" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1yre5p1"><h3 class="svelte-1yre5p1">EDIT WORKSPACE CONFIGURATION</h3> <button class="close-btn svelte-1yre5p1">√ó</button></div> <div class="modal-body svelte-1yre5p1"><!> <div class="form-group svelte-1yre5p1"><label for="config-name" class="svelte-1yre5p1">WORKSPACE NAME</label> <input id="config-name" type="text" placeholder="e.g. Verduona Internal" class="svelte-1yre5p1"/></div> <div class="form-group svelte-1yre5p1"><label for="config-desc" class="svelte-1yre5p1">DESCRIPTION</label> <input id="config-desc" type="text" placeholder="What this workspace contains" class="svelte-1yre5p1"/></div> <div class="form-group svelte-1yre5p1"><label for="config-version" class="svelte-1yre5p1">VERSION</label> <input id="config-version" type="text" placeholder="e.g. 1.0" class="svelte-1yre5p1"/></div> <div class="form-group svelte-1yre5p1"><label for="storage-type" class="svelte-1yre5p1">STORAGE TYPE</label> <input id="storage-type" type="text" placeholder="e.g. local, s3, etc." class="svelte-1yre5p1"/></div> <div class="form-group svelte-1yre5p1"><label for="storage-base" class="svelte-1yre5p1">STORAGE BASE PATH</label> <input id="storage-base" type="text" placeholder="/path/to/base" class="svelte-1yre5p1"/></div></div> <div class="modal-footer svelte-1yre5p1"><button class="brutal-btn outline svelte-1yre5p1">CANCEL</button> <button class="brutal-btn"> </button></div></div></div>'),Qa=u('<div class="page svelte-1yre5p1"><div class="page-header svelte-1yre5p1"><h2 class="glitch">Data // Inbox & Scopes</h2> <div class="tabs svelte-1yre5p1"><button> </button> <button>SCOPES</button></div></div> <!> <!> <!> <!></div> <!> <!> <!>',1);function ps(bt,ft){_a(ft,!0);const ce=()=>xa(Sa,"$isReadOnly",ht),[ht,mt]=ga();let ne=F("inbox"),ve=F(""),C=F(ut([])),Se=F(!1),S=F(null),ue=F(!0),U=F(!1),h=F(null),j=F(null),ae=F(ut(new Set)),Ee=F(!1),p=F(null),Ne=F(!1),se=F(null),Ae=F(!1),D=F(null);function gt(){const a=localStorage.getItem("kraliki-inbox");if(a)try{o(C,JSON.parse(a),!0)}catch{o(C,[],!0)}}function ke(){localStorage.setItem("kraliki-inbox",JSON.stringify(e(C)))}function Ve(){if(!e(ve).trim())return;const a=e(ve).trim(),l=a.startsWith("http://")||a.startsWith("https://"),i={id:Date.now().toString(),type:l?"url":"text",content:a,timestamp:new Date().toISOString(),processed:!1};o(C,[i,...e(C)],!0),ke(),o(ve,""),o(j,"Item added to inbox"),setTimeout(()=>{o(j,null)},2e3)}function xt(a){a.preventDefault(),o(Se,!0)}function St(a){a.preventDefault(),o(Se,!1)}async function Et(a){a.preventDefault(),o(Se,!1);const l=a.dataTransfer?.files;if(!(!l||l.length===0)){for(const i of Array.from(l)){const y={id:Date.now().toString()+Math.random(),type:"file",content:`${i.name} (${(i.size/1024).toFixed(1)}KB)`,timestamp:new Date().toISOString(),processed:!1};o(C,[y,...e(C)],!0)}ke(),o(j,`${l.length} file(s) added to inbox`),setTimeout(()=>{o(j,null)},2e3)}}function We(a){o(C,e(C).map(l=>l.id===a?{...l,processed:!0}:l),!0),ke()}function Je(a){o(C,e(C).filter(l=>l.id!==a),!0),ke()}async function kt(a){const l=e(C).find(i=>i.id===a);if(l)try{await fetch("/api/comms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent:"human",topic:"inbox",message:l.content})}),We(a),o(j,"Sent to Blackboard"),setTimeout(()=>{o(j,null)},2e3)}catch{o(h,"Failed to process item"),setTimeout(()=>{o(h,null)},3e3)}}async function _e(){o(ue,!0);try{const a=await fetch("/api/scopes");a.ok?(o(S,await a.json(),!0),o(h,null)):o(h,"Failed to load scopes")}catch{o(h,"Failed to connect to scopes API")}finally{o(ue,!1)}}function Ct(a){e(ae).has(a)?e(ae).delete(a):e(ae).add(a),o(ae,new Set(e(ae)),!0)}function Dt(a){return new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function It(){o(p,{name:"",path:"",description:"",isNew:!0,subpaths:[]},!0),o(Ee,!0)}function Ot(a){const l=e(S)?.config.scopes[a.name],i=l?.subpaths?Object.entries(l.subpaths).map(([y,L])=>({name:y,path:L})):[];o(p,{name:a.name,path:a.path,description:a.description||"",isNew:!1,subpaths:i},!0),o(Ee,!0)}function ye(){o(Ee,!1),o(p,null)}function Tt(){e(S)&&(o(D,{name:e(S).config.name,description:e(S).config.description||"",version:e(S).config.version,storageType:e(S).config.storage.type,storageBase:e(S).config.storage.base},!0),o(Ae,!0))}function be(){o(Ae,!1),o(D,null)}function wt(){e(p)&&(e(p).subpaths=[...e(p).subpaths,{name:"",path:""}])}function Nt(a){e(p)&&(e(p).subpaths=e(p).subpaths.filter((l,i)=>i!==a))}function Pe(a,l){(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),l())}async function At(){if(!e(p)||!e(p).name||!e(p).path){o(h,"Name and path are required");return}o(U,!0),o(h,null);try{const a={path:e(p).path,description:e(p).description||void 0};if(e(p).subpaths.length>0){a.subpaths={};for(const i of e(p).subpaths)i.name&&i.path&&(a.subpaths[i.name]=i.path)}const l=await fetch("/api/scopes",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({scopes:{[e(p).name]:a}})});if(l.ok)o(j,`Scope "${e(p).name}" saved successfully`),ye(),await _e(),setTimeout(()=>{o(j,null)},3e3);else{const i=await l.json();o(h,i.error||"Failed to save scope",!0)}}catch{o(h,"Failed to save scope")}finally{o(U,!1)}}async function Pt(){if(e(D)){o(U,!0),o(h,null);try{const a=await fetch("/api/scopes",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e(D).name,description:e(D).description||void 0,version:e(D).version,storage:{type:e(D).storageType,base:e(D).storageBase}})});if(a.ok)o(j,"Configuration saved successfully"),be(),await _e(),setTimeout(()=>{o(j,null)},3e3);else{const l=await a.json();o(h,l.error||"Failed to save configuration",!0)}}catch{o(h,"Failed to save configuration")}finally{o(U,!1)}}}function Rt(a){o(se,a,!0),o(Ne,!0)}function Ce(){o(Ne,!1),o(se,null)}async function Ft(){if(e(se)){o(U,!0),o(h,null);try{const a=await fetch("/api/scopes",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({scopes:{[e(se)]:null}})});if(a.ok)o(j,`Scope "${e(se)}" deleted`),Ce(),await _e(),setTimeout(()=>{o(j,null)},3e3);else{const l=await a.json();o(h,l.error||"Failed to delete scope",!0)}}catch{o(h,"Failed to delete scope")}finally{o(U,!1)}}}ua(()=>{gt(),_e()});var qe=Qa(),Re=de(qe),Fe=s(Re),ze=r(s(Fe),2),fe=s(ze);let Xe;fe.__click=()=>o(ne,"inbox");var Ut=s(fe);t(fe);var Qe=r(fe,2);let Ye;Qe.__click=()=>o(ne,"scopes"),t(ze),t(Fe);var Ze=r(Fe,2);{var Lt=a=>{var l=Ea(),i=s(l),y=s(i,!0);t(i),t(l),E(()=>v(y,e(j))),c(a,l)};x(Ze,a=>{e(j)&&a(Lt)})}var et=r(Ze,2);{var $t=a=>{var l=ka(),i=s(l),y=s(i,!0);t(i),t(l),E(()=>v(y,e(h))),c(a,l)};x(et,a=>{e(h)&&a($t)})}var tt=r(et,2);{var Gt=a=>{var l=wa(),i=de(l),y=r(s(i),2);ba(y),y.__keydown=_=>{_.key==="Enter"&&_.ctrlKey&&(_.preventDefault(),Ve())};var L=r(y,2);L.__click=Ve,t(i);var I=r(i,2);let B;var A=r(I,2),R=s(A),H=s(R);t(R);var K=r(R,2);{var O=_=>{var f=Ca();c(_,f)},w=_=>{var f=Ia();ge(f,21,()=>e(C).filter(k=>!k.processed),xe,(k,b)=>{var T=Da(),m=s(T),N=s(m);let d;var G=s(N,!0);t(N);var W=r(N,2),J=s(W,!0);t(W),t(m);var M=r(m,2),re=s(M,!0);t(M);var n=r(M,2),P=s(n);P.__click=()=>kt(e(b).id);var Y=r(P,2);Y.__click=()=>We(e(b).id);var Z=r(Y,2);Z.__click=()=>Je(e(b).id),t(n),t(T),E((oe,ee,he)=>{d=ie(N,1,"item-type svelte-1yre5p1",null,d,{text:e(b).type==="text",url:e(b).type==="url",file:e(b).type==="file"}),v(G,oe),v(J,ee),v(re,he)},[()=>e(b).type.toUpperCase(),()=>new Date(e(b).timestamp).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),()=>e(b).content.length>200?e(b).content.slice(0,200)+"...":e(b).content]),c(k,T)}),t(f),c(_,f)};x(K,_=>{e(C).filter(f=>!f.processed).length===0?_(O):_(w,!1)})}t(A);var $=r(A,2);{var V=_=>{var f=Ta(),k=s(f),b=s(k);t(k);var T=r(k,2);ge(T,21,()=>e(C).filter(m=>m.processed).slice(0,5),xe,(m,N)=>{var d=Oa(),G=s(d),W=s(G,!0);t(G);var J=r(G,2),M=s(J);t(J);var re=r(J,2);re.__click=()=>Je(e(N).id),t(d),E(n=>{v(W,e(N).type),v(M,`${n??""}${e(N).content.length>80?"...":""}`)},[()=>e(N).content.slice(0,80)]),c(m,d)}),t(T),t(f),E(m=>v(b,`ARCHIVED (${m??""})`),[()=>e(C).filter(m=>m.processed).length]),c(_,f)};x($,_=>{e(C).filter(f=>f.processed).length>0&&_(V)})}E((_,f)=>{L.disabled=_,B=ie(I,1,"card drop-zone svelte-1yre5p1",null,B,{dragging:e(Se)}),v(H,`INBOX ITEMS (${f??""})`)},[()=>!e(ve).trim(),()=>e(C).filter(_=>!_.processed).length]),X(y,()=>e(ve),_=>o(ve,_)),Ke("dragover",I,xt),Ke("dragleave",I,St),Ke("drop",I,Et),c(a,l)};x(tt,a=>{e(ne)==="inbox"&&a(Gt)})}var jt=r(tt,2);{var Bt=a=>{var l=Ma(),i=de(l),y=s(i);{var L=w=>{var $=Na(),V=s($,!0);t($),E(()=>v(V,e(S).config.name)),c(w,$)};x(y,w=>{e(S)&&w(L)})}var I=r(y,2);I.__click=Tt;var B=r(I,2);B.__click=It;var A=r(B,2);A.__click=_e;var R=s(A,!0);t(A),t(i);var H=r(i,2);{var K=w=>{var $=Aa();c(w,$)},O=w=>{var $=ct(),V=de($);{var _=k=>{var b=Pa(),T=r(s(b),2),m=s(T,!0);t(T),t(b),E(()=>v(m,e(h))),c(k,b)},f=k=>{var b=ct(),T=de(b);{var m=N=>{var d=Ba(),G=de(d),W=s(G),J=s(W),M=s(J),re=s(M,!0);t(M);var n=r(M,2),P=s(n,!0);t(n),t(J);var Y=r(J,2),Z=s(Y),oe=s(Z);t(Z);var ee=r(Z,2),he=s(ee);t(ee),t(Y),t(W);var me=r(W,2);{var Wt=le=>{var g=Ra(),pe=s(g,!0);t(g),E(()=>v(pe,e(S).config.description)),c(le,g)};x(me,le=>{e(S).config.description&&le(Wt)})}t(G);var Ue=r(G,2);ge(Ue,21,()=>e(S).statuses,xe,(le,g)=>{var pe=ja();let lt;var Le=s(pe),De=s(Le);De.__click=()=>Ct(e(g).name);var $e=s(De),Ie=s($e);let it;var qt=s(Ie,!0);t(Ie);var Ge=r(Ie,2),zt=s(Ge,!0);t(Ge);var Xt=r(Ge,2);{var Qt=q=>{var z=Fa(),te=s(z);t(z),E(()=>v(te,`// ${e(g).description??""}`)),c(q,z)};x(Xt,q=>{e(g).description&&q(Qt)})}t($e);var nt=r($e,2),Yt=s(nt,!0);t(nt),t(De);var Zt=r(De,2);{var ea=q=>{var z=Ua(),te=s(z);te.__click=()=>Ot(e(g));var Oe=r(te,2);Oe.__click=()=>Rt(e(g).name),t(z),c(q,z)};x(Zt,q=>{ce()||q(ea)})}t(Le);var ta=r(Le,2);{var aa=q=>{var z=Ga(),te=s(z),Oe=r(s(te),2),sa=s(Oe,!0);t(Oe),t(te);var ra=r(te,2);{var oa=je=>{var Be=$a(),la=r(s(Be),2);ge(la,17,()=>Object.entries(e(g).subpaths),xe,(ia,na)=>{var vt=fa(()=>ha(e(na),2));let va=()=>e(vt)[0],Te=()=>e(vt)[1];var Me=La(),we=s(Me);let pt;var pa=s(we,!0);t(we);var He=r(we,2),da=s(He,!0);t(He);var dt=r(He,2),ca=s(dt,!0);t(dt),t(Me),E(()=>{pt=ie(we,1,"subpath-status svelte-1yre5p1",null,pt,{ok:Te().exists,error:!Te().exists}),v(pa,Te().exists?"OK":"!"),v(da,va()),v(ca,Te().path)}),c(ia,Me)}),t(Be),c(je,Be)};x(ra,je=>{e(g).subpaths&&Object.keys(e(g).subpaths).length>0&&je(oa)})}t(z),E(()=>v(sa,e(g).path)),c(q,z)};x(ta,q=>{e(ae).has(e(g).name)&&q(aa)})}t(pe),E((q,z)=>{lt=ie(pe,1,"scope-card svelte-1yre5p1",null,lt,{error:!e(g).exists}),it=ie(Ie,1,"scope-status svelte-1yre5p1",null,it,{ok:e(g).exists,error:!e(g).exists}),v(qt,e(g).exists?"OK":"MISSING"),v(zt,q),v(Yt,z)},[()=>e(g).name.toUpperCase(),()=>e(ae).has(e(g).name)?"‚àí":"+"]),c(le,pe)}),t(Ue);var rt=r(Ue,2),ot=r(s(rt),2),Jt=s(ot);t(ot),t(rt),E((le,g)=>{v(re,le),v(P,e(S).config.storage.base),v(oe,`v${e(S).config.version??""}`),v(he,`CHECKED: ${g??""}`),v(Jt,`${e(S).workspaceDir??""}/scopes.json`)},[()=>e(S).config.storage.type.toUpperCase(),()=>Dt(e(S).lastChecked)]),c(N,d)};x(T,N=>{e(S)&&N(m)},!0)}c(k,b)};x(V,k=>{e(h)?k(_):k(f,!1)},!0)}c(w,$)};x(H,w=>{e(ue)&&!e(S)?w(K):w(O,!1)})}E(()=>{I.disabled=ce()||!e(S),yt(I,"title",ce()?"Read-only mode":"Edit configuration"),B.disabled=ce(),yt(B,"title",ce()?"Read-only mode":""),A.disabled=e(ue),v(R,e(ue)?"LOADING...":"REFRESH")}),c(a,l)};x(jt,a=>{e(ne)==="scopes"&&a(Bt)})}t(Re);var at=r(Re,2);{var Mt=a=>{var l=Ja();l.__click=ye,l.__keydown=n=>Pe(n,ye);var i=s(l);i.__click=n=>n.stopPropagation(),i.__keydown=n=>n.stopPropagation();var y=s(i),L=s(y),I=s(L,!0);t(L);var B=r(L,2);B.__click=ye,t(y);var A=r(y,2),R=s(A);{var H=n=>{var P=Ha(),Y=s(P,!0);t(P),E(()=>v(Y,e(h))),c(n,P)};x(R,n=>{e(h)&&n(H)})}var K=r(R,2),O=r(s(K),2);Q(O);var w=r(O,2);{var $=n=>{var P=Ka();c(n,P)};x(w,n=>{e(p).isNew||n($)})}t(K);var V=r(K,2),_=r(s(V),2);Q(_),t(V);var f=r(V,2),k=r(s(f),2);Q(k),t(f);var b=r(f,2),T=s(b),m=r(s(T),2);m.__click=wt,t(T);var N=r(T,2);ge(N,17,()=>e(p).subpaths,xe,(n,P,Y)=>{var Z=Va(),oe=s(Z);Q(oe);var ee=r(oe,2);Q(ee);var he=r(ee,2);he.__click=()=>Nt(Y),t(Z),X(oe,()=>e(P).name,me=>e(P).name=me),X(ee,()=>e(P).path,me=>e(P).path=me),c(n,Z)});var d=r(N,2);{var G=n=>{var P=Wa();c(n,P)};x(d,n=>{e(p).subpaths.length===0&&n(G)})}t(b),t(A);var W=r(A,2),J=s(W);J.__click=ye;var M=r(J,2);M.__click=At;var re=s(M,!0);t(M),t(W),t(i),t(l),E(n=>{v(I,n),O.disabled=!e(p).isNew,J.disabled=e(U),M.disabled=e(U),v(re,e(U)?"SAVING...":"SAVE SCOPE")},[()=>e(p).isNew?"ADD NEW SCOPE":`EDIT SCOPE: ${e(p).name.toUpperCase()}`]),X(O,()=>e(p).name,n=>e(p).name=n),X(_,()=>e(p).path,n=>e(p).path=n),X(k,()=>e(p).description,n=>e(p).description=n),c(a,l)};x(at,a=>{e(Ee)&&e(p)&&a(Mt)})}var st=r(at,2);{var Ht=a=>{var l=qa();l.__click=Ce,l.__keydown=O=>Pe(O,Ce);var i=s(l);i.__click=O=>O.stopPropagation(),i.__keydown=O=>O.stopPropagation();var y=r(s(i),2),L=s(y),I=r(s(L)),B=s(I,!0);t(I),_t(),t(L),_t(2),t(y);var A=r(y,2),R=s(A);R.__click=Ce;var H=r(R,2);H.__click=Ft;var K=s(H,!0);t(H),t(A),t(i),t(l),E(O=>{v(B,O),R.disabled=e(U),H.disabled=e(U),v(K,e(U)?"DELETING...":"DELETE")},[()=>e(se).toUpperCase()]),c(a,l)};x(st,a=>{e(Ne)&&e(se)&&a(Ht)})}var Kt=r(st,2);{var Vt=a=>{var l=Xa();l.__click=be,l.__keydown=d=>Pe(d,be);var i=s(l);i.__click=d=>d.stopPropagation(),i.__keydown=d=>d.stopPropagation();var y=s(i),L=r(s(y),2);L.__click=be,t(y);var I=r(y,2),B=s(I);{var A=d=>{var G=za(),W=s(G,!0);t(G),E(()=>v(W,e(h))),c(d,G)};x(B,d=>{e(h)&&d(A)})}var R=r(B,2),H=r(s(R),2);Q(H),t(R);var K=r(R,2),O=r(s(K),2);Q(O),t(K);var w=r(K,2),$=r(s(w),2);Q($),t(w);var V=r(w,2),_=r(s(V),2);Q(_),t(V);var f=r(V,2),k=r(s(f),2);Q(k),t(f),t(I);var b=r(I,2),T=s(b);T.__click=be;var m=r(T,2);m.__click=Pt;var N=s(m,!0);t(m),t(b),t(i),t(l),E(()=>{T.disabled=e(U),m.disabled=e(U),v(N,e(U)?"SAVING...":"SAVE CONFIG")}),X(H,()=>e(D).name,d=>e(D).name=d),X(O,()=>e(D).description,d=>e(D).description=d),X($,()=>e(D).version,d=>e(D).version=d),X(_,()=>e(D).storageType,d=>e(D).storageType=d),X(k,()=>e(D).storageBase,d=>e(D).storageBase=d),c(a,l)};x(Kt,a=>{e(Ae)&&e(D)&&a(Vt)})}E(a=>{Xe=ie(fe,1,"tab svelte-1yre5p1",null,Xe,{active:e(ne)==="inbox"}),v(Ut,`INBOX (${a??""})`),Ye=ie(Qe,1,"tab svelte-1yre5p1",null,Ye,{active:e(ne)==="scopes"})},[()=>e(C).filter(a=>!a.processed).length]),c(bt,qe),ya(),mt()}ma(["click","keydown"]);export{ps as component};
