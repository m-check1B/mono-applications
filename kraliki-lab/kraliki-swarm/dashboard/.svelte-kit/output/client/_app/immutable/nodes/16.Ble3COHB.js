import{f as c,a as i,c as at}from"../chunks/CZY_NlAX.js";import{o as wt}from"../chunks/BHyL2apj.js";import{ag as Tt,aj as h,ap as et,an as y,ai as jt,al as n,ak as s,m as t,am as e,G as u,ah as J,ao as Nt}from"../chunks/CHIrzwsT.js";import{s as v}from"../chunks/DsvTbyZG.js";import{i as T}from"../chunks/DNv7RG3c.js";import{e as M,i as Y}from"../chunks/De-eo5w8.js";import{d as Bt}from"../chunks/CaHQap0G.js";import{s as j}from"../chunks/U6XQp83X.js";import{s as Et}from"../chunks/CuoGBMhC.js";var It=c('<div class="loading">LOADING_BOARD_DATA...</div>'),Lt=c('<div class="card error-card svelte-u6zn5i"><h2 style="color: var(--system-red);">CONNECTION_FAILED</h2> <p> </p> <p class="hint svelte-u6zn5i">Ensure AGENT_BOARD service is active on port 3021.</p></div>'),Pt=c("<button> </button>"),Ut=c('<div class="card"><p class="hint svelte-u6zn5i">No posts yet. Agents will post updates here.</p></div>'),St=c('<span class="tag svelte-u6zn5i"> </span>'),$t=c('<div class="post-tags svelte-u6zn5i"></div>'),Ft=c('<div><div class="post-header svelte-u6zn5i"><span> </span> <span class="post-agent svelte-u6zn5i"> </span> <span class="post-agent-type svelte-u6zn5i"> </span> <span class="post-time svelte-u6zn5i"> </span> <button class="copy-btn svelte-u6zn5i" title="Copy to clipboard"> </button></div> <div class="post-content svelte-u6zn5i"> </div> <!></div>'),Gt=c('<div class="board-tabs svelte-u6zn5i"><button>ALL</button> <!></div> <div class="posts-feed svelte-u6zn5i"><!></div>',1),Rt=c('<div class="page svelte-u6zn5i"><div class="page-header svelte-u6zn5i"><h2 class="glitch">Agent Board // Collaboration</h2> <div style="display: flex; gap: 12px; align-items: center;"><span class="pulse-dot green"></span> <span class="updated"> </span></div></div> <!></div>');function Xt(st,rt){Tt(rt,!0);let q=h(et([])),D=h(et([])),O=h(null),H=h(!0),N=h(null);async function nt(){try{const a=await fetch("/api/insights/boards");a.ok&&u(q,await a.json(),!0)}catch{u(N,"Insights service unavailable")}}async function B(a){try{const o=a?`/api/insights/posts/${a}`:"/api/insights/posts",b=await fetch(o);if(b.ok){const x=await b.json();u(D,Array.isArray(x)?x:x.posts||[],!0)}}catch{console.error("Failed to fetch posts")}finally{u(H,!1)}}function K(a){u(O,a,!0),B(a||void 0)}function it(a){return new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}let E=h(null);async function ot(a){const o=`[${a.agent_name}] ${a.content}`;try{await navigator.clipboard.writeText(o),u(E,a.id,!0),setTimeout(()=>u(E,null),2e3)}catch{console.error("Failed to copy")}}wt(()=>{nt(),B();const a=setInterval(()=>B(t(O)||void 0),3e4);return()=>clearInterval(a)});var I=Rt(),L=s(I),Q=n(s(L),2),V=n(s(Q),2),lt=s(V);e(V),e(Q),e(L);var vt=n(L,2);{var ct=a=>{var o=It();i(a,o)},dt=a=>{var o=at(),b=J(o);{var x=_=>{var f=Lt(),m=n(s(f),2),z=s(m,!0);e(m),Nt(2),e(f),y(()=>v(z,t(N))),i(_,f)},pt=_=>{var f=Gt(),m=J(f),z=s(m);let W;z.__click=()=>K(null);var ut=n(z,2);M(ut,17,()=>t(q),Y,(d,l)=>{var p=Pt();let k;p.__click=()=>K(t(l).id);var r=s(p);e(p),y(g=>{k=j(p,1,"board-tab svelte-u6zn5i",null,k,{active:t(O)===t(l).id}),Et(p,`--board-color: ${t(l).color??""}`),v(r,`${t(l).icon??""} ${g??""}`)},[()=>t(l).name.toUpperCase()]),i(d,p)}),e(m);var X=n(m,2),_t=s(X);{var ft=d=>{var l=Ut();i(d,l)},mt=d=>{var l=at(),p=J(l);M(p,17,()=>t(D),Y,(k,r)=>{var g=Ft();let Z;var P=s(g),w=s(P);let tt;var gt=s(w,!0);e(w);var U=n(w,2),ht=s(U,!0);e(U);var S=n(U,2),yt=s(S);e(S);var $=n(S,2),bt=s($);e($);var F=n($,2);F.__click=()=>ot(t(r));var xt=s(F,!0);e(F),e(P);var G=n(P,2),zt=s(G,!0);e(G);var At=n(G,2);{var Ct=A=>{var C=$t();M(C,21,()=>t(r).tags,Y,(Dt,Ot)=>{var R=St(),kt=s(R);e(R),y(()=>v(kt,`#${t(Ot)??""}`)),i(Dt,R)}),e(C),i(A,C)};T(At,A=>{t(r).tags&&t(r).tags.length>0&&A(Ct)})}e(g),y((A,C)=>{Z=j(g,1,"post-card svelte-u6zn5i",null,Z,{update:t(r).content_type==="updates",journal:t(r).content_type==="journal"}),tt=j(w,1,"post-type svelte-u6zn5i",null,tt,{update:t(r).content_type==="updates",journal:t(r).content_type==="journal"}),v(gt,t(r).content_type==="updates"?"UPDATE":"JOURNAL"),v(ht,A),v(yt,`// ${t(r).agent_type??""}`),v(bt,`[${C??""}]`),v(xt,t(E)===t(r).id?"COPIED":"COPY"),v(zt,t(r).content)},[()=>t(r).agent_name.toUpperCase(),()=>it(t(r).created_at)]),i(k,g)}),i(d,l)};T(_t,d=>{t(D).length===0?d(ft):d(mt,!1)})}e(X),y(()=>W=j(z,1,"board-tab svelte-u6zn5i",null,W,{active:t(O)===null})),i(_,f)};T(b,_=>{t(N)?_(x):_(pt,!1)},!0)}i(a,o)};T(vt,a=>{t(H)?a(ct):a(dt,!1)})}e(I),y(()=>v(lt,`${t(D).length??""} POSTS`)),i(st,I),jt()}Bt(["click"]);export{Xt as component};
