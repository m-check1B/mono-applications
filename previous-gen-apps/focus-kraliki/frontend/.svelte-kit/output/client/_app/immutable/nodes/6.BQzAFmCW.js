import{c as B,a as v,f as y}from"../chunks/pejWV2dy.js";import"../chunks/CQ2dU6u5.js";import{f as G,p as Qe,o as Ve,Y as Xe,s as _,a as et,b as I,c,m as W,d as b,g as t,n as x,r as i,t as z,Z as tt,a6 as nt}from"../chunks/DgM1AnfY.js";import{d as rt,s as q,e as ot}from"../chunks/pi1oX53H.js";import{i as P}from"../chunks/B5hbs7lp.js";import{I as J,s as j,l as A,e as pe,i as st}from"../chunks/RjzcECkQ.js";import{c as at}from"../chunks/CnVLvYjB.js";import{a as Y,r as Z,b as it}from"../chunks/DGcJkfPx.js";import{b as _e,a as be}from"../chunks/CzAIYQz9.js";import{b as lt}from"../chunks/QknctPh7.js";import{i as ct}from"../chunks/CUTbOrLX.js";import{a as dt}from"../chunks/CBf0kXIe.js";import{B as he}from"../chunks/CYXqwoIh.js";import{l as Q,s as V}from"../chunks/BQCnAYr2.js";import{S as ve}from"../chunks/rkXZYilU.js";import{X as ut}from"../chunks/BC-kAh8h.js";import{C as Ee}from"../chunks/Be0ZnyvZ.js";import{T as ke,Z as gt}from"../chunks/BJmwsjk-.js";import{W as mt}from"../chunks/Be7P3E83.js";import{S as ft}from"../chunks/ClgZFxqt.js";import{L as se}from"../chunks/BYeCHjh2.js";import{S as pt}from"../chunks/BRDH1Nx-.js";function ae(l,r){const o=Q(r,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];J(l,V({name:"circle-check-big"},()=>o,{get iconNode(){return n},children:(d,C)=>{var u=B(),E=G(u);j(E,r,"default",{}),v(d,u)},$$slots:{default:!0}}))}function _t(l,r){const o=Q(r,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]];J(l,V({name:"message-square"},()=>o,{get iconNode(){return n},children:(d,C)=>{var u=B(),E=G(u);j(E,r,"default",{}),v(d,u)},$$slots:{default:!0}}))}function bt(l,r){const o=Q(r,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68"}],["path",{d:"M12 2v4"}],["path",{d:"m2 2 20 20"}]];J(l,V({name:"power-off"},()=>o,{get iconNode(){return n},children:(d,C)=>{var u=B(),E=G(u);j(E,r,"default",{}),v(d,u)},$$slots:{default:!0}}))}function ht(l,r){const o=Q(r,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];J(l,V({name:"power"},()=>o,{get iconNode(){return n},children:(d,C)=>{var u=B(),E=G(u);j(E,r,"default",{}),v(d,u)},$$slots:{default:!0}}))}const vt="ws://127.0.0.1:8765/ws";class Et{ws=null;wsUrl;sessionUuid=null;agentToken=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;eventCallbacks=[];errorCallbacks=[];closeCallbacks=[];heartbeatInterval=null;heartbeatIntervalMs=3e4;constructor(r){this.wsUrl=r||vt}connect(r,o){return new Promise((n,d)=>{this.sessionUuid=r,this.agentToken=o;const C=`${this.wsUrl}?session_uuid=${encodeURIComponent(r)}`;try{this.ws=new WebSocket(C),this.ws.onopen=()=>{A.info("[IIAgentClient] WebSocket connected"),this.isConnected=!0,this.reconnectAttempts=0,this.startHeartbeat(),n()},this.ws.onmessage=u=>{try{const E=JSON.parse(u.data);this.handleMessage(E)}catch(E){A.error("[IIAgentClient] Failed to parse message",E),this.notifyError(new Error("Failed to parse WebSocket message"))}},this.ws.onerror=u=>{A.error("[IIAgentClient] WebSocket error",u),this.notifyError(new Error("WebSocket connection error"))},this.ws.onclose=()=>{A.info("[IIAgentClient] WebSocket closed"),this.isConnected=!1,this.stopHeartbeat(),this.notifyClose(),this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,A.info(`[IIAgentClient] Reconnecting attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),setTimeout(()=>{this.sessionUuid&&this.agentToken&&this.connect(this.sessionUuid,this.agentToken)},this.reconnectDelay*this.reconnectAttempts))}}catch(u){d(u)}})}disconnect(){this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1,this.sessionUuid=null,this.agentToken=null,this.reconnectAttempts=0}initAgent(r){if(!this.isConnected||!this.ws)throw new Error("WebSocket not connected");const o={};this.agentToken&&(o.agent_token=this.agentToken),r.enable_focus_tools&&(o.enable_focus_tools=!0),r.enable_reviewer&&(o.enable_reviewer=!0);const n={type:"init_agent",content:{model_name:r.model_name,tool_args:o,thinking_tokens:r.thinking_tokens||0}};this.send(n)}sendQuery(r,o=[]){if(!this.isConnected||!this.ws)throw new Error("WebSocket not connected");const n={type:"query",content:{text:r,files:o,resume:!1}};this.send(n)}cancel(){if(!this.isConnected||!this.ws)throw new Error("WebSocket not connected");const r={type:"cancel",content:{}};this.send(r)}enhancePrompt(r,o,n=[]){if(!this.isConnected||!this.ws)throw new Error("WebSocket not connected");const d={type:"enhance_prompt",content:{model_name:r,text:o,files:n}};this.send(d)}ping(){!this.isConnected||!this.ws||this.send({type:"ping",content:{}})}onEvent(r){return this.eventCallbacks.push(r),()=>{const o=this.eventCallbacks.indexOf(r);o>-1&&this.eventCallbacks.splice(o,1)}}onError(r){return this.errorCallbacks.push(r),()=>{const o=this.errorCallbacks.indexOf(r);o>-1&&this.errorCallbacks.splice(o,1)}}onClose(r){return this.closeCallbacks.push(r),()=>{const o=this.closeCallbacks.indexOf(r);o>-1&&this.closeCallbacks.splice(o,1)}}getConnectionStatus(){return this.isConnected}send(r){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)throw new Error("WebSocket is not open");const o=JSON.stringify(r);this.ws.send(o)}handleMessage(r){if(r.type&&r.content!==void 0){const o={type:r.type,content:r.content};this.notifyEvent(o)}else A.warn("[IIAgentClient] Received unexpected message format",{data:r})}notifyEvent(r){this.eventCallbacks.forEach(o=>{try{o(r)}catch(n){A.error("[IIAgentClient] Event callback error",n)}})}notifyError(r){this.errorCallbacks.forEach(o=>{try{o(r)}catch(n){A.error("[IIAgentClient] Error callback error",n)}})}notifyClose(){this.closeCallbacks.forEach(r=>{try{r()}catch(o){A.error("[IIAgentClient] Close callback error",o)}})}startHeartbeat(){this.stopHeartbeat(),this.heartbeatInterval=window.setInterval(()=>{this.ping()},this.heartbeatIntervalMs)}stopHeartbeat(){this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}}var a=(l=>(l.CONNECTION_ESTABLISHED="connection_established",l.AGENT_INITIALIZED="agent_initialized",l.WORKSPACE_INFO="workspace_info",l.PROCESSING="processing",l.AGENT_THINKING="agent_thinking",l.TOOL_CALL="tool_call",l.TOOL_RESULT="tool_result",l.AGENT_RESPONSE="agent_response",l.AGENT_RESPONSE_INTERRUPTED="agent_response_interrupted",l.STREAM_COMPLETE="stream_complete",l.ERROR="error",l.SYSTEM="system",l.PONG="pong",l.UPLOAD_SUCCESS="upload_success",l.BROWSER_USE="browser_use",l.FILE_EDIT="file_edit",l.USER_MESSAGE="user_message",l.PROMPT_GENERATED="prompt_generated",l))(a||{});const ie="focus_kraliki_pending_escalation",Ce=()=>typeof window<"u"&&typeof localStorage<"u";function kt(){if(!Ce())return null;const l=localStorage.getItem(ie);if(!l)return null;try{return JSON.parse(l)}catch(r){return A.warn("Failed to parse pending escalation payload",{error:r}),localStorage.removeItem(ie),null}}function Ct(){Ce()&&localStorage.removeItem(ie)}var St=y("<!> Connecting...",1),wt=y("<!> Connect",1),It=y('<button class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"><!></button>'),xt=y('<button class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center gap-2"><!> Initialize Agent</button>'),At=y('<div class="flex items-center gap-2"><span class="text-sm text-green-500 flex items-center gap-1"><!> Connected</span> <!> <button class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center gap-2"><!> Disconnect</button></div>'),yt=y("<option> </option>"),Nt=y('<div class="mt-4 p-4 bg-card border border-border rounded-lg"><h3 class="text-lg font-semibold mb-4 flex items-center gap-2"><!> Agent Configuration</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2">Model</label> <select class="w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"></select></div> <div class="flex items-center gap-2"><input type="checkbox" id="focus-tools" class="w-4 h-4 text-primary bg-background border-input rounded focus:ring-2 focus:ring-ring"/> <label for="focus-tools" class="text-sm font-medium">Enable Focus Tools (Tasks, Knowledge, Projects)</label></div> <div class="flex items-center gap-2"><input type="checkbox" id="reviewer" class="w-4 h-4 text-primary bg-background border-input rounded focus:ring-2 focus:ring-ring"/> <label for="reviewer" class="text-sm font-medium">Enable Reviewer</label></div> <div><label class="block text-sm font-medium mb-2">Thinking Tokens (Extended Thinking)</label> <input type="number" min="0" max="10000" step="1000" class="w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"/></div></div></div>'),Tt=y('<p class="text-muted-foreground text-center py-8">No events yet. Connect to II-Agent to get started.</p>'),Ot=y('<div class="flex items-start gap-2 p-2 rounded hover:bg-accent/50 transition-colors"><span class="text-xs text-muted-foreground whitespace-nowrap pt-1"> </span> <!> <div class="flex-1 min-w-0"><div class="text-xs text-muted-foreground uppercase"> </div> <pre class="whitespace-pre-wrap break-words mt-1"> </pre></div></div>'),Rt=y("<!> Processing...",1),$t=y("<!> Send",1),Lt=y(`<div class="mt-4 border-t border-border pt-4"><form class="flex gap-3"><input type="text" placeholder="Enter your query... (e.g., 'Create a task for tomorrow')" class="flex-1 px-4 py-3 bg-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50"/> <button type="button" class="px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"><!></button> <button type="submit" class="px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"><!></button></form> <p class="text-xs text-muted-foreground mt-2">Try: "Create a knowledge item about WebSocket integration" or "List my current tasks"</p></div>`),Mt=y('<div class="mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"><div class="flex items-center gap-2 text-red-600 dark:text-red-400"><!> <span class="font-semibold">Connection Error</span></div> <p class="mt-2 text-sm text-red-700 dark:text-red-300"> </p></div>'),Gt=y('<div class="flex flex-col h-[calc(100vh-8rem)]"><div class="flex items-center justify-between pb-4 border-b border-border"><div><h1 class="text-3xl font-bold flex items-center gap-2"><!> Agent Workbench</h1> <p class="text-muted-foreground mt-1">II-Agent Integration</p></div> <div class="flex items-center gap-2"><!></div></div> <!> <div class="flex-1 mt-4 flex flex-col min-h-0"><div class="flex items-center justify-between mb-2"><h3 class="text-lg font-semibold">Event Stream</h3> <button class="px-3 py-1 text-sm bg-accent text-accent-foreground rounded-md hover:bg-accent/80 transition-colors">Clear Log</button></div> <div class="flex-1 overflow-y-auto bg-card border border-border rounded-lg p-4 space-y-2 font-mono text-sm"><!></div></div> <!> <!></div>');function sn(l,r){Qe(r,!1);let o,n=W({isConnected:!1,isConnecting:!1,isAgentInitialized:!1,error:null,sessionUuid:null,agentToken:null}),d=W({model_name:"z-ai/glm-4.7",enable_focus_tools:!0,enable_reviewer:!1,thinking_tokens:0}),C=W([]),u=W(),E=W(""),O=W(!1);const Se=[{value:"google/gemini-3-flash-preview",label:"Gemini 3 Flash"},{value:"z-ai/glm-4.7",label:"GLM-4.7"},{value:"meta-llama/llama-4-scout",label:"Llama 4 Scout (Groq)"},{value:"meta-llama/llama-3.3-70b-instruct",label:"Llama 3.3 70B (Groq)"},{value:"deepseek/deepseek-v3.2",label:"DeepSeek V3.2"}],le="agent-model-select",ce="agent-thinking-tokens";Ve(()=>{o=new Et(void 0),o.onEvent(Ne),o.onError(Te),o.onClose(Oe)}),Xe(()=>{o&&o.disconnect()});async function we(){if(!(t(n).isConnecting||t(n).isConnected)){b(n,t(n).isConnecting=!0),b(n,t(n).error=null);try{$("Requesting agent session from Focus by Kraliki...");const e=kt(),s=await dt.agent.createSession(e||void 0);b(n,t(n).sessionUuid=s.sessionUuid),b(n,t(n).agentToken=s.agentToken),$(`Session created: ${s.sessionUuid}`),e&&($("Escalation context attached to this ii-agent session."),Ct()),$("Connecting to II-Agent WebSocket..."),await o.connect(s.sessionUuid,s.agentToken),b(n,t(n).isConnected=!0),b(n,t(n).isConnecting=!1),$("Connected to II-Agent! Ready to initialize agent.")}catch(e){A.error("Connection failed:",e),b(n,t(n).error=e.detail||e.message||"Connection failed"),b(n,t(n).isConnecting=!1),b(n,t(n).isConnected=!1),D(`Connection failed: ${t(n).error}`)}}}function Ie(){o&&o.disconnect(),b(n,t(n).isConnected=!1),b(n,t(n).isAgentInitialized=!1),b(n,t(n).sessionUuid=null),b(n,t(n).agentToken=null),$("Disconnected from II-Agent")}function xe(){if(!t(n).isConnected){D("Not connected to II-Agent");return}try{$("Initializing agent..."),o.initAgent(t(d)),$(`Agent configuration sent:
- Model: ${t(d).model_name}
- Focus Tools: ${t(d).enable_focus_tools?"Enabled":"Disabled"}
- Reviewer: ${t(d).enable_reviewer?"Enabled":"Disabled"}`)}catch(e){D(`Failed to initialize agent: ${e.message}`)}}async function Ae(){if(!t(E).trim()||t(O)||!t(n).isAgentInitialized)return;const e=t(E).trim();I(E,""),I(O,!0);try{Re(e),o.sendQuery(e)}catch(s){D(`Failed to send query: ${s.message}`),I(O,!1)}}function ye(){if(t(n).isConnected)try{o.cancel(),$("Cancellation requested")}catch(e){D(`Failed to cancel: ${e.message}`)}}function Ne(e){switch(A.debug("[Agent Event]",{event:e}),e.type){case a.CONNECTION_ESTABLISHED:S(e,"Connection established");break;case a.AGENT_INITIALIZED:b(n,t(n).isAgentInitialized=!0),S(e,"Agent initialized successfully");break;case a.WORKSPACE_INFO:S(e,`Workspace: ${e.content.workspace_dir||"Unknown"}`);break;case a.PROCESSING:S(e,e.content.message||"Processing...");break;case a.AGENT_THINKING:S(e,"Agent is thinking...");break;case a.TOOL_CALL:const s=e.content.tool_name||"Unknown Tool",m=e.content.tool_input?JSON.stringify(e.content.tool_input,null,2):"";S(e,`Tool Call: ${s}
${m}`);break;case a.TOOL_RESULT:const k=e.content.result?typeof e.content.result=="string"?e.content.result:JSON.stringify(e.content.result,null,2):"No result";S(e,`Tool Result:
${k}`);break;case a.AGENT_RESPONSE:const g=e.content.response||e.content.text||"";S(e,`Agent Response:
${g}`),I(O,!1);break;case a.AGENT_RESPONSE_INTERRUPTED:S(e,"Agent response interrupted"),I(O,!1);break;case a.STREAM_COMPLETE:S(e,"Stream complete"),I(O,!1);break;case a.ERROR:const f=e.content.error||e.content.message||"Unknown error";S(e,`Error: ${f}`),I(O,!1);break;case a.SYSTEM:S(e,e.content.message||"System message");break;case a.USER_MESSAGE:S(e,e.content.text||"");break;case a.PONG:break;default:S(e,JSON.stringify(e.content,null,2));break}$e()}function Te(e){A.error("[Agent Error]",e),D(`WebSocket Error: ${e.message}`)}function Oe(){A.info("[Agent Close]"),t(n).isConnected&&(b(n,t(n).isConnected=!1),b(n,t(n).isAgentInitialized=!1),$("WebSocket connection closed"))}function S(e,s){const m={id:`${Date.now()}-${Math.random()}`,timestamp:new Date,type:e.type,content:e.content,formattedContent:s};I(C,[...t(C),m])}function $(e){const s={id:`${Date.now()}-${Math.random()}`,timestamp:new Date,type:a.SYSTEM,content:{message:e},formattedContent:e};I(C,[...t(C),s])}function D(e){const s={id:`${Date.now()}-${Math.random()}`,timestamp:new Date,type:a.ERROR,content:{error:e},formattedContent:e};I(C,[...t(C),s])}function Re(e){const s={id:`${Date.now()}-${Math.random()}`,timestamp:new Date,type:a.USER_MESSAGE,content:{text:e},formattedContent:e};I(C,[...t(C),s])}function $e(){setTimeout(()=>{t(u)&&b(u,t(u).scrollTop=t(u).scrollHeight)},100)}function Le(){confirm("Clear event log?")&&I(C,[])}function Me(e){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)}function Ge(e){switch(e){case a.CONNECTION_ESTABLISHED:return ae;case a.AGENT_INITIALIZED:return ae;case a.PROCESSING:return se;case a.AGENT_THINKING:return ft;case a.TOOL_CALL:return mt;case a.TOOL_RESULT:return ke;case a.AGENT_RESPONSE:return he;case a.ERROR:return Ee;case a.SYSTEM:return ve;case a.USER_MESSAGE:return _t;default:return ke}}function Pe(e){switch(e){case a.CONNECTION_ESTABLISHED:case a.AGENT_INITIALIZED:return"text-green-500";case a.PROCESSING:case a.AGENT_THINKING:return"text-blue-500";case a.TOOL_CALL:case a.TOOL_RESULT:return"text-purple-500";case a.AGENT_RESPONSE:return"text-primary";case a.ERROR:return"text-red-500";case a.SYSTEM:return"text-muted-foreground";case a.USER_MESSAGE:return"text-yellow-500";default:return"text-muted-foreground"}}ct();var X=Gt(),ee=c(X),te=c(ee),de=c(te),Ue=c(de);he(Ue,{class:"w-8 h-8 text-primary"}),x(),i(de),x(2),i(te);var ue=_(te,2),De=c(ue);{var We=e=>{var s=It();s.__click=we;var m=c(s);{var k=f=>{var h=St(),w=G(h);se(w,{class:"w-4 h-4 animate-spin"}),x(),v(f,h)},g=f=>{var h=wt(),w=G(h);ht(w,{class:"w-4 h-4"}),x(),v(f,h)};P(m,f=>{t(n).isConnecting?f(k):f(g,!1)})}i(s),z(()=>s.disabled=t(n).isConnecting),v(e,s)},ze=e=>{var s=At(),m=c(s),k=c(m);ae(k,{class:"w-4 h-4"}),x(),i(m);var g=_(m,2);{var f=N=>{var T=xt();T.__click=xe;var p=c(T);gt(p,{class:"w-4 h-4"}),x(),i(T),v(N,T)};P(g,N=>{t(n).isAgentInitialized||N(f)})}var h=_(g,2);h.__click=Ie;var w=c(h);bt(w,{class:"w-4 h-4"}),x(),i(h),i(s),v(e,s)};P(De,e=>{t(n).isConnected?e(ze,!1):e(We)})}i(ue),i(ee);var ge=_(ee,2);{var He=e=>{var s=Nt(),m=c(s),k=c(m);ve(k,{class:"w-5 h-5"}),x(),i(m);var g=_(m,2),f=c(g),h=c(f);Y(h,"for",le);var w=_(h,2);z(()=>{t(d),tt(()=>{})}),Y(w,"id",le),pe(w,5,()=>Se,st,(R,H)=>{var F=yt(),je=c(F,!0);i(F);var fe={};z(()=>{q(je,t(H).label),fe!==(fe=t(H).value)&&(F.value=(F.__value=t(H).value)??"")}),v(R,F)}),i(w),i(f);var N=_(f,2),T=c(N);Z(T),x(2),i(N);var p=_(N,2),L=c(p);Z(L),x(2),i(p);var M=_(p,2),K=c(M);Y(K,"for",ce);var U=_(K,2);Z(U),Y(U,"id",ce),i(M),i(g),i(s),it(w,()=>t(d).model_name,R=>b(d,t(d).model_name=R)),_e(T,()=>t(d).enable_focus_tools,R=>b(d,t(d).enable_focus_tools=R)),_e(L,()=>t(d).enable_reviewer,R=>b(d,t(d).enable_reviewer=R)),be(U,()=>t(d).thinking_tokens,R=>b(d,t(d).thinking_tokens=R)),v(e,s)};P(ge,e=>{t(n).isConnected&&!t(n).isAgentInitialized&&e(He)})}var ne=_(ge,2),re=c(ne),Fe=_(c(re),2);Fe.__click=Le,i(re);var oe=_(re,2),qe=c(oe);{var Be=e=>{var s=Tt();v(e,s)},Ke=e=>{var s=B(),m=G(s);pe(m,1,()=>t(C),k=>k.id,(k,g)=>{var f=Ot(),h=c(f),w=c(h,!0);i(h);var N=_(h,2);{let U=nt(()=>Pe(t(g).type));at(N,()=>Ge(t(g).type),(R,H)=>{H(R,{get class(){return`w-4 h-4 flex-shrink-0 mt-1 ${t(U)??""}`}})})}var T=_(N,2),p=c(T),L=c(p,!0);i(p);var M=_(p,2),K=c(M,!0);i(M),i(T),i(f),z(U=>{q(w,U),q(L,t(g).type),q(K,t(g).formattedContent||"")},[()=>Me(t(g).timestamp)]),v(k,f)}),v(e,s)};P(qe,e=>{t(C).length===0?e(Be):e(Ke,!1)})}i(oe),lt(oe,e=>I(u,e),()=>t(u)),i(ne);var me=_(ne,2);{var Ye=e=>{var s=Lt(),m=c(s),k=c(m);Z(k);var g=_(k,2);g.__click=ye;var f=c(g);ut(f,{class:"w-4 h-4"}),i(g);var h=_(g,2),w=c(h);{var N=p=>{var L=Rt(),M=G(L);se(M,{class:"w-4 h-4 animate-spin"}),x(),v(p,L)},T=p=>{var L=$t(),M=G(L);pt(M,{class:"w-4 h-4"}),x(),v(p,L)};P(w,p=>{t(O)?p(N):p(T,!1)})}i(h),i(m),x(2),i(s),z(p=>{k.disabled=t(O),g.disabled=!t(O),h.disabled=p},[()=>t(O)||!t(E).trim()]),ot("submit",m,p=>{p.preventDefault(),Ae()}),be(k,()=>t(E),p=>I(E,p)),v(e,s)};P(me,e=>{t(n).isAgentInitialized&&e(Ye)})}var Ze=_(me,2);{var Je=e=>{var s=Mt(),m=c(s),k=c(m);Ee(k,{class:"w-5 h-5"}),x(2),i(m);var g=_(m,2),f=c(g,!0);i(g),i(s),z(()=>q(f,t(n).error)),v(e,s)};P(Ze,e=>{t(n).error&&e(Je)})}i(X),v(l,X),et()}rt(["click"]);export{sn as component};
