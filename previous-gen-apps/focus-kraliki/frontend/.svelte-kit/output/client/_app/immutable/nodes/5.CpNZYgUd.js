import{c as ne,a as o,f as u,t as Gt}from"../chunks/pejWV2dy.js";import{f as z,p as Za,c as s,s as r,r as a,n as ue,g as e,t as b,i as P,b as l,a as $a,o as ws,j as Qe,a4 as Ha,y as Js,ax as qs}from"../chunks/DgM1AnfY.js";import{d as Ss,s as c,e as Xa}from"../chunks/pi1oX53H.js";import{i as g}from"../chunks/B5hbs7lp.js";import{I as Xs,s as Qs,e as Fe,i as Ze}from"../chunks/RjzcECkQ.js";import{r as Qa,b as Zs,s as G,a as ia,c as Ja}from"../chunks/DGcJkfPx.js";import{a as Pa}from"../chunks/CzAIYQz9.js";import{b as ks}from"../chunks/QknctPh7.js";import{l as $s,s as er,p as $,b as js,a as tr}from"../chunks/BQCnAYr2.js";import{d as na,w as ar,g as sr}from"../chunks/CABBFY_M.js";import{M as rr}from"../chunks/CKpkprxw.js";import{S as ir}from"../chunks/BRDH1Nx-.js";import{C as nr,M as or}from"../chunks/WZCJAQcJ.js";import"../chunks/CQ2dU6u5.js";import{U as lr}from"../chunks/BCE5MqQf.js";import{W as vr}from"../chunks/Be7P3E83.js";import{T as dr}from"../chunks/CXPUXJL5.js";import{B as cr}from"../chunks/CYXqwoIh.js";import{a as qa}from"../chunks/CBf0kXIe.js";function ur(y,m){const f=$s(m,["children","$$slots","$$events","$$legacy"]);const n=[["line",{x1:"2",x2:"22",y1:"2",y2:"22"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22"}]];Xs(y,er({name:"mic-off"},()=>f,{get iconNode(){return n},children:(v,h)=>{var L=ne(),K=z(L);Qs(K,m,"default",{}),o(v,L)},$$slots:{default:!0}}))}const pr={isRecording:!1,isProcessing:!1,provider:"gemini-native",mode:"ii-agent",model:"google/gemini-3-flash-preview",useOrchestrator:!1},gr={isConnected:!1,isInitialized:!1,sessionUuid:null,agentToken:null,currentModel:null,isProcessing:!1,error:null,eventLog:[]},ys={sessionId:null,messages:[],workflows:{},executionFeed:[],composerState:pr,iiAgentState:gr,currentAction:null,drawerState:{workflowDrawerOpen:!1,executionDrawerOpen:!1,selectedWorkflowId:null,selectedExecutionId:null}};function _r(){const{subscribe:y,set:m,update:f}=ar(ys);return{subscribe:y,initSession:n=>{f(v=>({...v,sessionId:n||crypto.randomUUID?.()||String(Date.now())}))},setCurrentAction:n=>{f(v=>({...v,currentAction:n}))},clearSession:()=>{m(ys)},addMessage:n=>{const v={...n,id:crypto.randomUUID?.()||String(Date.now()),timestamp:new Date};return f(h=>({...h,messages:[...h.messages,v]})),v},updateMessage:(n,v)=>{f(h=>({...h,messages:h.messages.map(L=>L.id===n?{...L,...v}:L)}))},deleteMessage:n=>{f(v=>({...v,messages:v.messages.filter(h=>h.id!==n)}))},clearMessages:()=>{f(n=>({...n,messages:[]}))},addWorkflow:n=>{const v={...n,id:n.telemetryId||crypto.randomUUID?.()||String(Date.now()),timestamp:new Date};return f(h=>({...h,workflows:{...h.workflows,[v.id]:v}})),v},updateWorkflow:(n,v)=>{f(h=>({...h,workflows:{...h.workflows,[n]:{...h.workflows[n],...v}}}))},deleteWorkflow:n=>{f(v=>{const{[n]:h,...L}=v.workflows;return{...v,workflows:L}})},updateWorkflowDecision:(n,v)=>{f(h=>({...h,workflows:{...h.workflows,[n]:{...h.workflows[n],decisionStatus:v,decisionAt:new Date().toISOString()}}}))},addExecutionEntry:n=>{const v={...n,id:crypto.randomUUID?.()||String(Date.now()),timestamp:new Date};return f(h=>({...h,executionFeed:[v,...h.executionFeed]})),v},updateExecutionEntry:(n,v)=>{f(h=>({...h,executionFeed:h.executionFeed.map(L=>L.id===n?{...L,...v}:L)}))},deleteExecutionEntry:n=>{f(v=>({...v,executionFeed:v.executionFeed.filter(h=>h.id!==n)}))},setExecutionFeed:n=>{f(v=>({...v,executionFeed:n}))},clearExecutionFeed:()=>{f(n=>({...n,executionFeed:[]}))},setComposerState:n=>{f(v=>({...v,composerState:{...v.composerState,...n}}))},setRecording:n=>{f(v=>({...v,composerState:{...v.composerState,isRecording:n}}))},setProcessing:n=>{f(v=>({...v,composerState:{...v.composerState,isProcessing:n}}))},setMode:n=>{f(v=>({...v,composerState:{...v.composerState,mode:n}}))},setIIAgentConnection:(n,v,h)=>{f(L=>({...L,iiAgentState:{...L.iiAgentState,isConnected:n,sessionUuid:v||L.iiAgentState.sessionUuid,agentToken:h||L.iiAgentState.agentToken,error:n?null:L.iiAgentState.error}}))},setIIAgentInitialized:(n,v)=>{f(h=>({...h,iiAgentState:{...h.iiAgentState,isInitialized:n,currentModel:v||h.iiAgentState.currentModel}}))},setIIAgentProcessing:n=>{f(v=>({...v,iiAgentState:{...v.iiAgentState,isProcessing:n}}))},setIIAgentError:n=>{f(v=>({...v,iiAgentState:{...v.iiAgentState,error:n}}))},addIIAgentEvent:n=>{const v={id:crypto.randomUUID?.()||String(Date.now()),type:n.type,content:n.content,timestamp:new Date,formattedContent:fr(n)};return f(h=>({...h,iiAgentState:{...h.iiAgentState,eventLog:[...h.iiAgentState.eventLog,v]}})),v},clearIIAgentEvents:()=>{f(n=>({...n,iiAgentState:{...n.iiAgentState,eventLog:[]}}))},openWorkflowDrawer:n=>{f(v=>({...v,drawerState:{...v.drawerState,workflowDrawerOpen:!0,selectedWorkflowId:n}}))},closeWorkflowDrawer:()=>{f(n=>({...n,drawerState:{...n.drawerState,workflowDrawerOpen:!1,selectedWorkflowId:null}}))},openExecutionDrawer:n=>{f(v=>({...v,drawerState:{...v.drawerState,executionDrawerOpen:!0,selectedExecutionId:n}}))},closeExecutionDrawer:()=>{f(n=>({...n,drawerState:{...n.drawerState,executionDrawerOpen:!1,selectedExecutionId:null}}))},getState:()=>sr({subscribe:y})}}function fr(y){switch(y.type){case"agent_response":return y.content.text||"";case"agent_thinking":return`Thinking: ${y.content.thinking||"..."}`;case"tool_call":return`Tool: ${y.content.tool_name||"unknown"}`;case"tool_result":return`Result: ${JSON.stringify(y.content.result||{}).substring(0,100)}...`;case"error":return`Error: ${y.content.error||y.content.message||"Unknown error"}`;case"system":return y.content.message||y.content.text||"System event";default:return JSON.stringify(y.content)}}const Ie=_r();na(Ie,y=>y.drawerState.selectedWorkflowId&&y.workflows[y.drawerState.selectedWorkflowId]||null);na(Ie,y=>y.drawerState.selectedExecutionId&&y.executionFeed.find(m=>m.id===y.drawerState.selectedExecutionId)||null);na(Ie,y=>{const m=Object.values(y.workflows);return m.length===0?null:m.sort((f,n)=>n.timestamp.getTime()-f.timestamp.getTime())[0]});na(Ie,y=>y.messages.slice(-20));na(Ie,y=>y.iiAgentState.isConnected&&y.iiAgentState.isInitialized);const mr=na(Ie,y=>y.composerState.isProcessing||y.iiAgentState.isProcessing);var xr=u("<!> STOP",1),br=u("<!> RECORD",1),hr=u('<button type="button" class="text-[10px] font-black uppercase px-2 py-1 border-2 border-border bg-card hover:bg-terminal-green hover:text-void transition-colors"> </button>'),jr=u('<span class="text-muted-foreground opacity-50"> </span>'),yr=u('<span class="text-system-red animate-pulse"> </span>'),wr=u('<span class="text-system-red animate-pulse"> </span>'),Sr=u('<div class="p-4 border-t-2 border-border space-y-4 bg-background"><form class="flex flex-col gap-3"><div class="flex flex-col gap-3 md:flex-row"><input type="text" placeholder="SPEAK YOUR INTENT..." class="brutal-input"/> <div class="flex gap-2"><button type="button" class="brutal-btn flex-1 md:flex-none flex items-center justify-center gap-2 whitespace-nowrap bg-white text-black dark:bg-card dark:text-foreground"><!></button> <button type="submit" class="brutal-btn px-8 bg-primary text-primary-foreground flex items-center justify-center gap-2"><!> SEND</button></div></div> <div class="flex flex-wrap gap-2"></div> <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 text-[10px] font-black uppercase tracking-widest border-t border-border/30 pt-3"><div class="flex items-center gap-4"><div class="flex items-center gap-2"><input id="audio-upload" type="file" accept="audio/*" class="hidden"/> <button type="button" class="flex items-center gap-1 hover:text-terminal-green transition-colors"><!> UPLOAD_AUDIO</button></div> <div class="flex items-center gap-2"><span class="text-muted-foreground">PROVIDER:</span> <select class="bg-card border-2 border-border px-2 py-0.5 focus:outline-none focus:border-terminal-green transition-colors cursor-pointer"><option>GEMINI_NATIVE</option><option>OPENAI_REALTIME</option></select></div></div> <div class="flex items-center gap-3"><!> <!></div></div></form></div>');function kr(y,m){Za(m,!0);let f=$(m,"inputMessage",15,""),n=$(m,"isLoading",3,!1),v=$(m,"isRecording",3,!1),h=$(m,"isProcessingAudio",3,!1),L=$(m,"supportsRecording",3,!1),K=$(m,"quickPrompts",19,()=>[]),X=$(m,"voiceProvider",15,"gemini-native"),jt=$(m,"voiceStatus",3,null),Ot=$(m,"recordingError",3,null),O=$(m,"uploadError",3,null),B=P(null);function Q(){e(B)?.click()}function Ce(I){const M=I.currentTarget;M&&m.onprovider&&m.onprovider(M.value)}function yt(I){I.preventDefault(),m.onsend?.()}var pe=Sr(),oe=s(pe),je=s(oe),ge=s(je);Qa(ge);var $e=r(ge,2),_e=s($e);_e.__click=()=>v()?m.onstop?.():m.onrecord?.();var oa=s(_e);{var la=I=>{var M=xr(),se=z(M);ur(se,{class:"w-4 h-4 text-system-red"}),ue(),o(I,M)},$t=I=>{var M=br(),se=z(M);or(se,{class:"w-4 h-4"}),ue(),o(I,M)};g(oa,I=>{v()?I(la):I($t,!1)})}a(_e);var et=r(_e,2),Vt=s(et);ir(Vt,{class:"w-4 h-4"}),ue(),a(et),a($e),a(je);var Ke=r(je,2);Fe(Ke,21,K,Ze,(I,M)=>{var se=hr();se.__click=()=>m.onprompt?.(e(M));var w=s(se,!0);a(se),b(()=>c(w,e(M))),o(I,se)}),a(Ke);var Rt=r(Ke,2),tt=s(Rt),le=s(tt),ct=s(le);ct.__change=I=>m.onupload?.(I),ks(ct,I=>l(B,I),()=>e(B));var at=r(ct,2);at.__click=Q;var ut=s(at);nr(ut,{class:"w-3.5 h-3.5"}),ue(),a(at),a(le);var pt=r(le,2),Pe=r(s(pt),2);Pe.__change=Ce;var gt=s(Pe);gt.value=gt.__value="gemini-native";var wt=r(gt);wt.value=wt.__value="openai-realtime",a(Pe),a(pt),a(tt);var st=r(tt,2),Yt=s(st);{var _t=I=>{var M=jr(),se=s(M);a(M),b(w=>c(se,`ACTIVE: ${w??""}`),[()=>Object.keys(jt().providers||{}).join(" | ")]),o(I,M)};g(Yt,I=>{jt()&&I(_t)})}var St=r(Yt,2);{var ea=I=>{var M=yr(),se=s(M);a(M),b(()=>c(se,`ERROR: ${Ot()??""}`)),o(I,M)},va=I=>{var M=ne(),se=z(M);{var w=T=>{var fe=wr(),Te=s(fe);a(fe),b(()=>c(Te,`ERROR: ${O()??""}`)),o(T,fe)};g(se,T=>{O()&&T(w)},!0)}o(I,M)};g(St,I=>{Ot()?I(ea):I(va,!1)})}a(st),a(Rt),a(oe),a(pe),b(I=>{ge.disabled=n(),_e.disabled=h()||!L(),et.disabled=I},[()=>n()||!f().trim()]),Xa("submit",oe,yt),Pa(ge,f),Zs(Pe,X),o(y,pe),$a()}Ss(["click","change"]);var Ar=u('<div class="text-[10px] mt-2 border-t border-terminal-green/30 pt-2 opacity-80 overflow-hidden"><span class="opacity-50">OUTPUT_BUFFER >></span> </div>'),Er=u('<div class="p-3 border-2 border-border bg-void text-terminal-green font-mono shadow-brutal-sm"><div class="flex items-center gap-2"><!> <span class="text-[11px] font-black uppercase tracking-tight"> </span> <span class="text-[9px] px-1.5 py-0.5 border border-terminal-green bg-terminal-green/10 uppercase font-black"> </span></div> <!></div>'),Ir=u('<div class="space-y-2"></div>'),Cr=u('<div><div><!></div> <div class="flex-1 space-y-3 min-w-0 max-w-3xl"><!> <div class="text-[10px] uppercase font-black tracking-widest text-muted-foreground"> </div> <div class="p-4 border-2 border-border bg-card shadow-card"><!></div></div></div>'),Pr=u('<div class="flex items-center gap-3 opacity-70"><div class="w-8 h-8 border-2 border-border animate-spin"></div> <div class="flex items-center gap-2 text-terminal-green font-mono text-xs"><div class="w-2 h-2 bg-terminal-green animate-ping"></div> <span class="text-[11px] font-black uppercase tracking-widest">SYSTEM_THINKING...</span></div></div>'),Tr=u('<div class="text-destructive animate-pulse">Recording...</div>'),Nr=u("<div>Processing audio...</div>"),Or=u("<div>Processing...</div>"),Rr=u('<div class="text-muted-foreground">Ready</div>'),Lr=u('<section class="flex-1 bg-card brutal-border brutal-shadow flex flex-col overflow-hidden h-full"><div class="flex flex-col gap-2 px-5 py-4 border-b-2 border-black dark:border-white bg-secondary"><div><h1 class="text-3xl font-black uppercase tracking-tighter text-foreground"> </h1> <p class="text-muted-foreground font-bold text-sm"> </p></div></div> <div class="flex-1 overflow-y-auto p-6 space-y-8 bg-background bg-grid-pattern"><!> <!></div> <div class="px-6 py-2 text-xs font-bold uppercase tracking-wider border-t-2 border-black dark:border-white bg-secondary flex items-center justify-between"><div><!></div></div> <!></section>');function Dr(y,m){Za(m,!0);const f=()=>js(Ie,"$assistantStore",v),n=()=>js(mr,"$isProcessing",v),[v,h]=tr();let L=$(m,"title",3,"Command Center"),K=$(m,"subtitle",3,"Unified AI assistant with voice, text, and workflow orchestration"),X=$(m,"inputMessage",15,""),jt=$(m,"quickPrompts",19,()=>[]),Ot=$(m,"isRecording",3,!1),O=$(m,"isProcessingAudio",3,!1),B=$(m,"supportsRecording",3,!1),Q=$(m,"voiceProvider",3,"gemini-native"),Ce=$(m,"voiceStatus",3,null),yt=$(m,"recordingError",3,null),pe=$(m,"uploadError",3,null),oe=P(void 0),je=Qe(()=>f().messages);function ge(){e(oe)&&(e(oe).scrollTop=e(oe).scrollHeight)}ws(()=>{ge()});async function $e(){if(!X().trim()||n())return;const w=X().trim();X(""),Ie.addMessage({role:"user",content:w,source:"text"}),m.onsend?.({detail:{message:w}}),ge()}function _e(){m.onrecord?.()}function oa(){m.onstop?.()}function la(w){m.onupload?.(w)}function $t(w){m.onprovider?.(w)}function et(w){X(w)}function Vt(w){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(w)}function Ke(w){return w==="voice"?"ðŸŽ¤":""}var Rt={scrollToBottom:ge},tt=Lr(),le=s(tt),ct=s(le),at=s(ct),ut=s(at,!0);a(at);var pt=r(at,2),Pe=s(pt,!0);a(pt),a(ct),a(le);var gt=r(le,2),wt=s(gt);Fe(wt,17,()=>e(je),w=>w.id,(w,T)=>{var fe=Cr(),Te=s(fe),ta=s(Te);{var ft=we=>{lr(we,{class:"w-5 h-5"})},kt=we=>{var Ne=ne(),ra=z(Ne);{var rt=Be=>{dr(Be,{class:"w-5 h-5"})},zt=Be=>{cr(Be,{class:"w-5 h-5"})};g(ra,Be=>{e(T).role==="system"?Be(rt):Be(zt,!1)},!0)}o(we,Ne)};g(ta,we=>{e(T).role==="user"?we(ft):we(kt,!1)})}a(Te);var aa=r(Te,2),At=s(aa);{var sa=we=>{var Ne=Ir();Fe(Ne,21,()=>e(T).metadata.toolCalls,Ze,(ra,rt)=>{var zt=Er(),Be=s(zt),ja=s(Be);{let Ht=Qe(()=>e(rt).status==="running"?"animate-spin":"");vr(ja,{get class(){return`w-3.5 h-3.5 ${e(Ht)??""}`}})}var da=r(ja,2),ca=s(da);a(da);var ya=r(da,2),Ta=s(ya,!0);a(ya),a(Be);var Na=r(Be,2);{var Oa=Ht=>{var mt=Ar(),wa=r(s(mt));a(mt),b(Dt=>c(wa,` ${Dt??""}`),[()=>typeof e(rt).result=="string"?e(rt).result:JSON.stringify(e(rt).result)]),o(Ht,mt)};g(Na,Ht=>{e(rt).result&&Ht(Oa)})}a(zt),b(()=>{c(ca,`EXEC: ${e(rt).name??""}`),c(Ta,e(rt).status)}),o(ra,zt)}),a(Ne),o(we,Ne)};g(At,we=>{e(T).metadata?.toolCalls&&e(T).metadata.toolCalls.length>0&&we(sa)})}var ye=r(At,2),Lt=s(ye);a(ye);var ba=r(ye,2),ha=s(ba);rr(ha,{get content(){return e(T).content}}),a(ba),a(aa),a(fe),b((we,Ne)=>{G(fe,1,`flex items-start gap-4 ${e(T).role==="user"?"flex-row-reverse":""} animate-fade-in`),G(Te,1,`w-10 h-10 border-2 border-border flex items-center justify-center flex-shrink-0 font-bold shadow-brutal-sm
					${e(T).role==="user"?"bg-primary text-primary-foreground":e(T).role==="system"?"bg-system-red text-white":"bg-secondary text-secondary-foreground"}`),c(Lt,`${we??""} ${Ne??""}`)},[()=>Vt(e(T).timestamp),()=>Ke(e(T).source)]),o(w,fe)});var st=r(wt,2);{var Yt=w=>{var T=Pr();o(w,T)};g(st,w=>{n()&&w(Yt)})}a(gt),ks(gt,w=>l(oe,w),()=>e(oe));var _t=r(gt,2),St=s(_t),ea=s(St);{var va=w=>{var T=Tr();o(w,T)},I=w=>{var T=ne(),fe=z(T);{var Te=ft=>{var kt=Nr();o(ft,kt)},ta=ft=>{var kt=ne(),aa=z(kt);{var At=ye=>{var Lt=Or();o(ye,Lt)},sa=ye=>{var Lt=Rr();o(ye,Lt)};g(aa,ye=>{n()?ye(At):ye(sa,!1)},!0)}o(ft,kt)};g(fe,ft=>{O()?ft(Te):ft(ta,!1)},!0)}o(w,T)};g(ea,w=>{Ot()?w(va):w(I,!1)})}a(St),a(_t);var M=r(_t,2);kr(M,{get isLoading(){return n()},get quickPrompts(){return jt()},get isRecording(){return Ot()},get isProcessingAudio(){return O()},get supportsRecording(){return B()},get voiceProvider(){return Q()},get voiceStatus(){return Ce()},get recordingError(){return yt()},get uploadError(){return pe()},onsend:$e,onrecord:_e,onstop:oa,onupload:la,onprovider:$t,onprompt:et,get inputMessage(){return X()},set inputMessage(w){X(w)}}),a(tt),b(()=>{c(ut,L()),c(Pe,K())}),o(y,tt);var se=$a(Rt);return h(),se}var Ur=u('<span class="demo-notice svelte-x1i5gj">Showing demo data - login to Focus for real data</span>'),Mr=u('<span class="svelte-x1i5gj">Capture anything, turn it into projects, sync to swarm execution.</span>'),Fr=u('<a target="_blank" class="brutal-btn small outline svelte-x1i5gj">LOCAL</a>'),Kr=u('<div class="loading-state svelte-x1i5gj"><div class="loader svelte-x1i5gj"></div> <span></span></div>'),Br=u('<span class="capture-error svelte-x1i5gj"> </span>'),Wr=u('<div class="pulse-priority svelte-x1i5gj"><span></span> <span> </span></div>'),Gr=u('<div class="pulse-priorities svelte-x1i5gj"></div>'),Vr=u('<div class="pulse-muted svelte-x1i5gj">No priorities yet.</div>'),Yr=u('<div class="pulse-greeting svelte-x1i5gj"> </div> <!> <div class="pulse-stats svelte-x1i5gj"><span class="pulse-stat danger svelte-x1i5gj"> </span> <span class="pulse-stat svelte-x1i5gj"> </span></div>',1),zr=u('<div class="pulse-muted svelte-x1i5gj">Loading daily plan...</div>'),Hr=u('<div class="pulse-muted svelte-x1i5gj">No daily plan yet.</div>'),Jr=u('<div class="pulse-reason svelte-x1i5gj"> </div>'),qr=u('<div class="pulse-action svelte-x1i5gj"> </div> <!>',1),Xr=u('<div class="pulse-muted svelte-x1i5gj">Loading next action...</div>'),Qr=u('<div class="pulse-muted svelte-x1i5gj">No next action available.</div>'),Zr=u('<div class="summary-type svelte-x1i5gj"><span class="summary-dot svelte-x1i5gj"></span> <span class="summary-label svelte-x1i5gj"> </span> <span class="summary-count svelte-x1i5gj"> </span></div>'),$r=u('<div class="summary-total svelte-x1i5gj"> </div> <div class="summary-types svelte-x1i5gj"></div>',1),ei=u('<div class="pulse-muted svelte-x1i5gj">Loading summary...</div>'),ti=u('<div class="pulse-muted svelte-x1i5gj"> </div>'),ai=u('<div class="pulse-muted svelte-x1i5gj">Summary unavailable.</div>'),si=u('<div class="snapshot-item svelte-x1i5gj"><div class="snapshot-title svelte-x1i5gj"> </div> <span> </span> <span class="snapshot-meta svelte-x1i5gj"> </span></div>'),ri=u('<div class="snapshot-empty svelte-x1i5gj">No projects yet.</div>'),ii=u('<div class="snapshot-item svelte-x1i5gj"><span> </span> <span class="snapshot-title svelte-x1i5gj"> </span> <span> </span></div>'),ni=u('<div class="snapshot-empty svelte-x1i5gj">No tasks yet.</div>'),oi=u('<div class="cli-row svelte-x1i5gj"><span class="cli-name svelte-x1i5gj"> </span> <span class="cli-model svelte-x1i5gj"> </span> <span class="cli-note svelte-x1i5gj"> </span></div>'),li=u('<div class="auth-notice svelte-x1i5gj"><span class="notice-icon svelte-x1i5gj">&#128274;</span> <span>Login to Focus by Kraliki for full Brain access. Demo data shown above.</span> <a target="_blank" class="brutal-btn small svelte-x1i5gj">LOGIN</a></div>'),vi=u('<div class="command-hero svelte-x1i5gj"><div class="hero-top svelte-x1i5gj"><span class="hero-tag svelte-x1i5gj">FOCUS MODE</span> <span><!></span></div> <h3 class="command-title svelte-x1i5gj">COMMAND CENTER</h3> <p class="command-subtitle svelte-x1i5gj">Unified AI assistant with voice, text, and workflow orchestration.</p> <div class="hero-stats svelte-x1i5gj"><div class="hero-stat svelte-x1i5gj"><span class="stat-value svelte-x1i5gj"> </span> <span class="stat-label svelte-x1i5gj">PROJECTS</span></div> <div class="hero-stat svelte-x1i5gj"><span class="stat-value svelte-x1i5gj"> </span> <span class="stat-label svelte-x1i5gj">TASKS</span></div> <div class="hero-stat svelte-x1i5gj"><span class="stat-value svelte-x1i5gj"> </span> <span class="stat-label svelte-x1i5gj">IN_PROGRESS</span></div> <div class="hero-stat svelte-x1i5gj"><span class="stat-value svelte-x1i5gj"> </span> <span class="stat-label svelte-x1i5gj">COMPLETED</span></div></div></div> <div class="command-layout svelte-x1i5gj"><div class="command-main svelte-x1i5gj"><div class="command-panel svelte-x1i5gj"><!></div> <div class="capture-zone svelte-x1i5gj"><div class="capture-header"><h4 class="svelte-x1i5gj">SEAMLESS CAPTURE</h4> <p class="svelte-x1i5gj">Drop files, paste images, or dump raw text. The Brain auto-organizes.</p></div> <div class="capture-input-row svelte-x1i5gj"><input type="text" class="capture-input svelte-x1i5gj" placeholder="Type anything to capture instantly..."/> <button class="brutal-btn svelte-x1i5gj">CAPTURE</button></div> <div class="capture-meta svelte-x1i5gj"><span>Supports images, text, and links. Paste anywhere.</span> <!></div></div></div> <div class="command-side svelte-x1i5gj"><div class="pulse-card svelte-x1i5gj"><div class="pulse-title svelte-x1i5gj">DAILY PLAN</div> <!></div> <div class="pulse-card svelte-x1i5gj"><div class="pulse-title svelte-x1i5gj">NEXT ACTION</div> <!></div> <div class="pulse-card svelte-x1i5gj"><div class="pulse-title svelte-x1i5gj">KNOWLEDGE SUMMARY</div> <!></div> <div class="pulse-actions svelte-x1i5gj"><button class="brutal-btn small outline svelte-x1i5gj"> </button> <button class="brutal-btn small svelte-x1i5gj">OPEN BRAIN</button></div></div></div> <div class="snapshot-grid svelte-x1i5gj"><div class="snapshot-card svelte-x1i5gj"><div class="snapshot-header svelte-x1i5gj"><h4 class="svelte-x1i5gj">PROJECTS SNAPSHOT</h4> <button class="brutal-btn small outline svelte-x1i5gj">VIEW ALL</button></div> <div class="snapshot-list svelte-x1i5gj"><!> <!></div></div> <div class="snapshot-card svelte-x1i5gj"><div class="snapshot-header svelte-x1i5gj"><h4 class="svelte-x1i5gj">TASKS SNAPSHOT</h4> <button class="brutal-btn small outline svelte-x1i5gj">VIEW ALL</button></div> <div class="snapshot-list svelte-x1i5gj"><!> <!></div></div> <div class="snapshot-card svelte-x1i5gj"><div class="snapshot-header svelte-x1i5gj"><h4 class="svelte-x1i5gj">LINEAR SYNC</h4> <button class="brutal-btn small outline svelte-x1i5gj">OPEN SYNC</button></div> <div class="snapshot-list svelte-x1i5gj"><div class="snapshot-metric svelte-x1i5gj"><span class="metric-value svelte-x1i5gj"> </span> <span class="metric-label svelte-x1i5gj">SYNCED</span></div> <div class="snapshot-metric svelte-x1i5gj"><span class="metric-value svelte-x1i5gj"> </span> <span class="metric-label svelte-x1i5gj">PENDING</span></div> <div class="snapshot-metric svelte-x1i5gj"><span class="metric-value svelte-x1i5gj"> </span> <span class="metric-label svelte-x1i5gj">RATE</span></div></div></div> <div class="snapshot-card svelte-x1i5gj"><div class="snapshot-header svelte-x1i5gj"><h4 class="svelte-x1i5gj">LOCAL CLI (LAB)</h4> <span class="snapshot-meta svelte-x1i5gj">CONTAINER</span></div> <div class="snapshot-list cli-list svelte-x1i5gj"></div></div></div> <!>',1),di=u('<p class="project-desc svelte-x1i5gj"> </p>'),ci=u('<button type="button"><div class="project-header svelte-x1i5gj"><span class="project-name svelte-x1i5gj"> </span> <span> </span></div> <!> <div class="project-progress svelte-x1i5gj"><div class="progress-bar svelte-x1i5gj"><div class="progress-fill svelte-x1i5gj"></div></div> <span class="progress-text svelte-x1i5gj"> </span></div></button>'),ui=u('<div class="projects-section svelte-x1i5gj"><div class="section-header svelte-x1i5gj"><h3>PROJECTS</h3> <button class="brutal-btn small svelte-x1i5gj">+ NEW PROJECT</button></div> <div class="projects-grid svelte-x1i5gj"></div></div>'),pi=u('<button class="brutal-btn small outline svelte-x1i5gj">SHOW ALL</button>'),gi=u('<span class="task-desc svelte-x1i5gj"> </span>'),_i=u('<a class="task-linear-link svelte-x1i5gj" target="_blank"> </a>'),fi=u('<button class="sync-btn svelte-x1i5gj">SYNC TO LINEAR</button>'),mi=u('<div class="task-card svelte-x1i5gj"><div class="task-main svelte-x1i5gj"><span></span> <div class="task-info svelte-x1i5gj"><span class="task-title svelte-x1i5gj"> </span> <!></div></div> <div class="task-meta svelte-x1i5gj"><span> </span> <span> </span> <!></div></div>'),xi=u('<div class="empty-state svelte-x1i5gj"><div class="empty-icon svelte-x1i5gj">&#128203;</div> <p class="svelte-x1i5gj">No tasks found</p></div>'),bi=u('<div class="tasks-section svelte-x1i5gj"><div class="section-header svelte-x1i5gj"><h3><!></h3> <div class="task-filters svelte-x1i5gj"><!> <button class="brutal-btn small svelte-x1i5gj">+ NEW TASK</button></div></div> <div class="status-filters svelte-x1i5gj"><span class="filter-label svelte-x1i5gj">Filter:</span> <button class="filter-btn active svelte-x1i5gj"> </button> <button class="filter-btn svelte-x1i5gj"> </button> <button class="filter-btn svelte-x1i5gj"> </button> <button class="filter-btn svelte-x1i5gj"> </button></div> <div class="task-list detailed svelte-x1i5gj"><!> <!></div></div>'),hi=u('<div class="synced-item svelte-x1i5gj"><span class="synced-title svelte-x1i5gj"> </span> <span class="synced-id svelte-x1i5gj"> </span> <span> </span></div>'),ji=u('<div class="empty-state small svelte-x1i5gj"><p class="svelte-x1i5gj">No tasks synced to Linear yet</p></div>'),yi=u('<div class="unsynced-item svelte-x1i5gj"><span class="unsynced-title svelte-x1i5gj"> </span> <span> </span> <button class="brutal-btn small svelte-x1i5gj">SYNC NOW</button></div>'),wi=u('<div class="empty-state small svelte-x1i5gj"><p class="svelte-x1i5gj">All tasks are synced!</p></div>'),Si=u('<div class="sync-section svelte-x1i5gj"><div class="section svelte-x1i5gj"><h3 class="svelte-x1i5gj">LINEAR SYNC STATUS</h3> <div class="sync-stats svelte-x1i5gj"><div class="sync-stat svelte-x1i5gj"><span class="sync-value svelte-x1i5gj"> </span> <span class="sync-label svelte-x1i5gj">Synced to Linear</span></div> <div class="sync-stat svelte-x1i5gj"><span class="sync-value svelte-x1i5gj"> </span> <span class="sync-label svelte-x1i5gj">Not Synced</span></div> <div class="sync-stat svelte-x1i5gj"><span class="sync-value svelte-x1i5gj"> </span> <span class="sync-label svelte-x1i5gj">Sync Rate</span></div></div> <div class="sync-progress svelte-x1i5gj"><div class="sync-bar svelte-x1i5gj"><div class="sync-fill svelte-x1i5gj"></div></div></div></div> <div class="section svelte-x1i5gj"><h3 class="svelte-x1i5gj">SYNCED TASKS</h3> <div class="synced-list svelte-x1i5gj"><!> <!></div></div> <div class="section svelte-x1i5gj"><h3 class="svelte-x1i5gj">UNSYNCED TASKS</h3> <div class="unsynced-list svelte-x1i5gj"><!> <!></div></div></div>'),ki=u('<div class="priority-item svelte-x1i5gj"><span></span> <span class="priority-title svelte-x1i5gj"> </span></div>'),Ai=u('<div class="priorities svelte-x1i5gj"><h4 class="svelte-x1i5gj">TOP PRIORITIES</h4> <!></div>'),Ei=u('<div class="plan-insight svelte-x1i5gj"><span class="insight-icon svelte-x1i5gj">&#128161;</span> <span> </span></div>'),Ii=u('<div class="daily-plan svelte-x1i5gj"><div class="greeting svelte-x1i5gj"> </div> <!> <div class="plan-stats svelte-x1i5gj"><div class="plan-stat svelte-x1i5gj"><span class="plan-stat-value danger svelte-x1i5gj"> </span> <span class="plan-stat-label svelte-x1i5gj">OVERDUE</span></div> <div class="plan-stat svelte-x1i5gj"><span class="plan-stat-value svelte-x1i5gj"> </span> <span class="plan-stat-label svelte-x1i5gj">DUE TODAY</span></div></div> <!></div>'),Ci=u('<div class="loading-state small svelte-x1i5gj"><div class="loader svelte-x1i5gj"></div> <span>Loading your daily plan...</span></div>'),Pi=u('<div class="empty-state small svelte-x1i5gj"><p class="svelte-x1i5gj">No daily plan available</p></div>'),Ti=u('<div class="action-reason svelte-x1i5gj"> </div>'),Ni=u('<div class="next-action svelte-x1i5gj"><div class="action-text svelte-x1i5gj"> </div> <!></div>'),Oi=u('<div class="empty-state small svelte-x1i5gj"><p class="svelte-x1i5gj">Loading next action...</p></div>'),Ri=u('<pre class="response-data svelte-x1i5gj"> </pre>'),Li=u('<div><div class="response-message svelte-x1i5gj"> </div> <!></div>'),Di=u('<div><div class="response-message svelte-x1i5gj"> </div></div>'),Ui=u('<div class="auth-notice svelte-x1i5gj"><span class="notice-icon svelte-x1i5gj">&#128274;</span> <span>Login to Focus by Kraliki for full Brain access. Demo data shown above.</span> <a target="_blank" class="brutal-btn small svelte-x1i5gj">LOGIN</a></div>'),Mi=u('<div class="brain-section svelte-x1i5gj"><div class="section brain-card svelte-x1i5gj"><div class="section-header svelte-x1i5gj"><h3 class="svelte-x1i5gj">DAILY PLAN</h3> <button class="brutal-btn small outline svelte-x1i5gj"> </button></div> <!></div> <div class="section brain-card next-action-card svelte-x1i5gj"><h3 class="svelte-x1i5gj">NEXT ACTION</h3> <!></div> <div class="section brain-card svelte-x1i5gj"><h3 class="svelte-x1i5gj">ASK THE BRAIN</h3> <div class="brain-input-container svelte-x1i5gj"><input type="text" class="brain-input svelte-x1i5gj" placeholder="Ask anything about your work..."/> <button class="brutal-btn svelte-x1i5gj"> </button></div> <!></div> <div class="section brain-card svelte-x1i5gj"><h3 class="svelte-x1i5gj">QUICK CAPTURE</h3> <p class="brain-hint svelte-x1i5gj">Just type anything - the Brain will auto-categorize it as an idea, task, note, or plan.</p> <div class="brain-input-container svelte-x1i5gj"><textarea class="brain-textarea svelte-x1i5gj" placeholder="I have an idea... / Remember to... / My goal is..." rows="3"></textarea> <button class="brutal-btn svelte-x1i5gj"> </button></div> <!></div> <!></div>'),Fi=u('<div class="page svelte-x1i5gj"><div class="page-header svelte-x1i5gj"><h2 class="glitch"></h2> <div class="header-badges svelte-x1i5gj"><span class="status-badge svelte-x1i5gj"> </span> <span><!></span></div></div> <div><div class="banner-content svelte-x1i5gj"><span class="banner-icon svelte-x1i5gj">&#9201;</span> <div class="banner-text svelte-x1i5gj"><strong class="svelte-x1i5gj"></strong> <!></div> <div class="banner-actions svelte-x1i5gj"><a target="_blank" class="brutal-btn small svelte-x1i5gj">OPEN FOCUS</a> <!></div></div></div> <div class="focus-tabs svelte-x1i5gj"><button>COMMAND</button> <button>PROJECTS</button> <button>TASKS</button> <button>LINEAR SYNC</button> <button>AI BRAIN</button></div> <!></div>');function nn(y,m){Za(m,!0);let f=P("checking"),n=P("unknown"),v=P("https://focus.verduona.dev"),h="http://127.0.0.1:3017",L=P(Ha([])),K=P(Ha([])),X=P(null),jt=P("all"),Ot=P(!0),O=P("overview"),B=P(!1),Q=P(null),Ce=P(null),yt=P(""),pe=P(null),oe=P(""),je=P(null),ge=P(!1),$e=P(null),_e=P(null);const oa=["I have an idea for...","Note to self:","What should I do next?","My goal is to..."],la=[{name:"OpenCode CLI",model:"GLM-4.7",note:"Default"},{name:"Claude Code CLI",model:"GLM-4.7",note:"Z.AI plan"},{name:"Cline",model:"GLM-4.7",note:"Local"},{name:"Agentic coding",model:"Grok Code Fast",note:"Speed"}];let $t=P(""),et=P(""),Vt=P(!1),Ke=P(!1),Rt=P(!1),tt=P(null),le=P(null),ct=P("gemini-native"),at=P(null),ut=P(null),pt=P(null),Pe=P(Ha([]));const gt={pending:"todo",todo:"todo",in_progress:"in_progress",inprogress:"in_progress",started:"in_progress",completed:"done",done:"done",archived:"archived",canceled:"archived",cancelled:"archived"},wt=[{id:"demo-1",name:"Kraliki Integration",description:"Connect swarm agents to Focus",status:"active",task_count:5,completed_count:2},{id:"demo-2",name:"Revenue Q1 2026",description:"Hit 3-5K MRR target",status:"active",task_count:8,completed_count:3},{id:"demo-3",name:"AI Academy Launch",description:"L1-L4 training curriculum",status:"active",task_count:12,completed_count:1}],st=[{id:"t1",title:"Build Focus by Kraliki API proxy",status:"done",priority:"high",project_id:"demo-1",linear_id:"KRA-101"},{id:"t2",title:"Create projects UI component",status:"in_progress",priority:"high",project_id:"demo-1"},{id:"t3",title:"Implement task sync to Linear",status:"todo",priority:"medium",project_id:"demo-1"},{id:"t4",title:"SenseIt first paying customer",status:"in_progress",priority:"urgent",project_id:"demo-2",linear_id:"BIZ-001"},{id:"t5",title:"Voice by Kraliki demo ready",status:"todo",priority:"high",project_id:"demo-2"}];function Yt(t){if(typeof t=="number")return t<=1?"urgent":t===2?"high":t===3?"medium":"low";const i=String(t||"").toLowerCase();return i==="urgent"||i==="critical"||i==="p1"?"urgent":i==="high"||i==="p2"?"high":i==="medium"||i==="normal"||i==="p3"?"medium":i==="low"||i==="p4"?"low":"medium"}function _t(t){const i=String(t.status||t.state||"todo").toLowerCase(),d=gt[i]||"todo";return{id:t.id,title:t.title,description:t.description||void 0,status:d,priority:Yt(t.priority),project_id:t.project_id||t.projectId||t.projectID||t.project?.id,linear_id:t.linear_id||t.linearId,linear_url:t.linear_url||t.linearUrl,created_at:t.created_at||t.createdAt,due_date:t.due_date||t.dueDate}}function St(t){const i=String(t.status||"active").toLowerCase(),d=i==="archived"?"archived":i==="completed"?"completed":"active";return{id:t.id,name:t.name,description:t.description||void 0,status:d,task_count:t.task_count??t.taskCount??0,completed_count:t.completed_count??t.completedCount??0,created_at:t.created_at||t.createdAt}}function ea(t,i){return Array.isArray(t)?t:t?.[i]?t[i]:[]}function va(t){return t==null?"medium":t>=80?"high":t>=60?"medium":"low"}function I(t){if(!t)return null;const d=(t.priorities||t.top_tasks||[]).map(S=>{const V=S.priority??S.priority_score,te=typeof V=="number"&&V>4?va(V):Yt(V);return{title:S.title||S.task?.title||"Untitled task",priority:te}});return{greeting:t.greeting||"Ready to focus?",priorities:d,overdue:t.overdue??t.overdue_count??0,due_today:t.due_today??t.due_today_count??0,insight:t.insight||t.shadow_insight||t.reasoning||t.recommendation}}function M(t){if(!t)return null;const i=t.message||t.action||"Next action ready",d=t.reason||t.reasoning||t.suggestion;return{action:i,task:t.task,reason:d}}function se(t){const i=t.trim();if(!i)return!1;const d=i.toLowerCase(),S=[/\?$/,/^(what|when|where|who|why|how|can you|could you|please|show|find|search|help)/i,/^(do |does |is |are |was |were |will |would |should i)/i];for(const te of S)if(te.test(d))return!1;const V=[/^(idea|note|task|plan|goal|strategy|remember|don't forget|need to|should|must|todo)/i,/^(i have an? |my |the |a |an )/i];for(const te of V)if(te.test(d))return!0;return i.length<120&&!i.includes("?")}function w(){const t=qa.getToken();return t?{Authorization:`Bearer ${t}`}:{}}async function T(t,i={}){const d={...w(),...i.headers||{}};return fetch(t,{...i,headers:d})}async function fe(t,i){const d=await T(`/api/brain/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(2e4)}),S=await d.json().catch(()=>null);return d.ok?S:{success:!1,message:S?.message||S?.error||"Focus Brain unavailable"}}async function Te(t,i){const d=t.trim();if(d){i?.addUserMessage&&Ie.addMessage({role:"user",content:d,source:i.source||"text"}),Ie.setProcessing(!0);try{const S=se(d),V=S?await fe("capture",{input:d,create:!0}):await fe("ask",{question:d});Ie.addMessage({role:V.success?"assistant":"system",content:V.message||(S?"Captured in Focus.":"Focus Brain replied."),source:"text"}),S&&await Ne()}catch(S){Ie.addMessage({role:"system",content:S instanceof Error?S.message:"Focus Brain request failed.",source:"text"})}finally{Ie.setProcessing(!1)}}}async function ta(){const t=e(et).trim();t&&(l(et,""),await Te(t,{addUserMessage:!0,source:"text"}))}async function ft(t){await Te(t.detail.message)}async function kt(){l(f,"checking");try{const t=await T("/api/brain/health",{signal:AbortSignal.timeout(5e3)});if(t.ok){const i=await t.json();l(f,i.status==="ok"||i.status==="healthy"?"online":"offline",!0)}else l(f,"offline")}catch{l(f,"offline")}}async function aa(){try{const t=await T("/api/projects",{signal:AbortSignal.timeout(1e4)});if(t.status===401||t.status===403){l(n,"unauthenticated"),l(L,wt.map(St),!0);return}if(t.ok){const i=await t.json(),d=ea(i,"projects");l(L,d.map(St),!0),l(n,"authenticated")}else l(L,wt.map(St),!0),l(n,"unauthenticated")}catch{l(L,wt.map(St),!0),l(n,"unauthenticated")}}async function At(t){l(jt,t?"project":"all",!0);try{const i=t?`/api/tasks?projectId=${t}`:"/api/tasks",d=await T(i,{signal:AbortSignal.timeout(1e4)});if(d.status===401||d.status===403){l(n,"unauthenticated");const S=t?st.filter(V=>V.project_id===t):st;l(K,S.map(_t),!0);return}if(d.ok){const S=await d.json(),V=ea(S,"tasks");l(K,V.map(_t),!0),e(n)==="unknown"&&l(n,"authenticated")}else{const S=t?st.filter(V=>V.project_id===t):st;l(K,S.map(_t),!0)}}catch{const i=t?st.filter(d=>d.project_id===t):st;l(K,i.map(_t),!0)}}function sa(t){l(X,t,!0),t?At(t):At()}async function ye(){l(B,!0);try{const t=await T("/api/brain/daily-plan",{signal:AbortSignal.timeout(15e3)});if(t.ok){const i=await t.json();l(Q,I(i.data||i),!0)}}catch{}finally{l(B,!1)}}async function Lt(){try{const t=await T("/api/brain/next-action",{signal:AbortSignal.timeout(15e3)});if(t.ok){const i=await t.json();l(Ce,M(i.data||i),!0)}}catch{}}async function ba(){await ye(),await Lt(),await Ne()}async function ha(){if(e(yt).trim()){l(B,!0),l(pe,null);try{const t=await fe("ask",{question:e(yt)});l(pe,t,!0)}catch(t){l(pe,{success:!1,message:t instanceof Error?t.message:"Focus Brain unavailable"},!0)}finally{l(B,!1)}}}async function we(){if(e(oe).trim()){l(B,!0),l(je,null);try{const t=await fe("capture",{input:e(oe),create:!0});l(je,t,!0),e(je)?.success&&l(oe,"")}catch(t){l(je,{success:!1,message:t instanceof Error?t.message:"Capture failed"},!0)}finally{l(B,!1)}}}async function Ne(){l(ge,!0),l(_e,null);try{const t=await T("/api/brain/summary",{signal:AbortSignal.timeout(15e3)});if(t.status===401||t.status===403){l(n,"unauthenticated"),l(_e,"Authentication required");return}if(t.ok){const i=await t.json(),d=i.data||i;d?.types?l($e,d,!0):(l($e,null),l(_e,"Summary unavailable"))}else l(_e,"Failed to load summary")}catch(t){l(_e,t instanceof Error?t.message:"Summary error",!0)}finally{l(ge,!1)}}async function ra(t){try{const i=await T(`/api/linear/sync-task/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({labels:["GIN","GIN-DEV"],priority:"medium",team_key:"PRO"}),signal:AbortSignal.timeout(1e4)});if(i.ok){const d=await i.json();if(d.success){const S=e(K).findIndex(V=>V.id===t);S!==-1&&(e(K)[S].linear_id=d.linear_id,e(K)[S].linear_url=d.linear_url),alert(`Synced to Linear: ${d.message}`)}else alert(`Sync failed: ${d.message}`)}else alert("Failed to sync to Linear")}catch{alert("Error syncing to Linear")}}async function rt(){try{const t=await qa.assistant.getProviders(),i=t.providers||t.data?.providers||{};l(at,{providers:i},!0)}catch{l(at,null)}}function zt(t){l(ct,t,!0)}function Be(){!e(Vt)||e(Ke)||(l(tt,null),l(le,null),navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{l(pt,t,!0),l(Ke,!0),l(Pe,[],!0);const i={mimeType:"audio/webm"};l(ut,new MediaRecorder(t,i),!0),e(ut).ondataavailable=d=>{d.data.size>0&&l(Pe,[...e(Pe),d.data],!0)},e(ut).onstop=()=>{da()},e(ut).start()}).catch(()=>{l(tt,"Microphone access denied"),l(Ke,!1)}))}function ja(){!e(Ke)||!e(ut)||(l(Ke,!1),e(ut).stop(),e(pt)&&(e(pt).getTracks().forEach(t=>t.stop()),l(pt,null)))}async function da(){if(e(Pe).length!==0){l(Rt,!0),l(le,null);try{const t=new Blob(e(Pe),{type:"audio/webm"});l(Pe,[],!0);const d=(await qa.assistant.transcribeAudio(t,"en",e(ct))).transcript||"";if(!d)throw new Error("No transcript returned");await Te(d,{addUserMessage:!0,source:"voice"})}catch(t){l(le,t instanceof Error?t.message:"Voice processing failed",!0)}finally{l(Rt,!1)}}}async function ca(t){l(le,null);try{const i=new FormData;i.append("file",t,t.name);const d=await T("/api/captures/upload",{method:"POST",body:i,signal:AbortSignal.timeout(3e4)});if(!d.ok){const V=await d.text();throw new Error(V||"Upload failed")}const S=await d.json();Ie.addMessage({role:"assistant",content:`Captured: ${S.title||t.name}`,source:"text"}),await Ne()}catch(i){l(le,i instanceof Error?i.message:"Capture upload failed",!0)}}async function ya(t){const i=t.currentTarget,d=i?.files?.[0];d&&(await ca(d),i&&(i.value=""))}function Ta(t){t.preventDefault()}async function Na(t){t.preventDefault();const i=t.dataTransfer?.files?.[0];if(i){await ca(i);return}const d=t.dataTransfer?.getData("text/plain");d&&await Te(d,{addUserMessage:!0,source:"text"})}async function Oa(t){const i=t.clipboardData?.items;if(i){for(const d of i)if(d.type.startsWith("image/")){t.preventDefault();const S=d.getAsFile();S&&await ca(S);return}}}ws(()=>{l(v,window.location.origin,!0),l(Vt,!!navigator?.mediaDevices?.getUserMedia),rt(),(async()=>(await Promise.all([kt(),aa(),At()]),l(Ot,!1)))();const i=setInterval(kt,3e4),d=S=>{Oa(S)};return window.addEventListener("paste",d),()=>{clearInterval(i),window.removeEventListener("paste",d)}});const Ht=Qe(()=>{const t=new Map;for(const i of e(L))t.set(i.id,{total:i.task_count||0,completed:i.completed_count||0});if(e(jt)==="all"){for(const[i]of t)t.set(i,{total:0,completed:0});for(const i of e(K)){if(!i.project_id)continue;const d=t.get(i.project_id)||{total:0,completed:0};d.total+=1,i.status==="done"&&(d.completed+=1),t.set(i.project_id,d)}}else if(e(jt)==="project"&&e(X)){const i=t.get(e(X))||{total:0,completed:0};if(i.total===0&&i.completed===0){for(const d of e(K))d.project_id===e(X)&&(i.total+=1,d.status==="done"&&(i.completed+=1));t.set(e(X),i)}}return t}),mt=Qe(()=>e(L).map(t=>{const i=e(Ht).get(t.id);return{...t,task_count:i?.total??t.task_count??0,completed_count:i?.completed??t.completed_count??0}})),wa=Qe(()=>e(mt).find(t=>t.id===e(X))),Dt=Qe(()=>e(X)?e(K).filter(t=>t.project_id===e(X)):e(K)),As=Qe(()=>e(mt).length),Es=Qe(()=>e(mt).filter(t=>t.status==="active").length),xt=Qe(()=>e(K).length),Is=Qe(()=>e(K).filter(t=>t.status==="done").length),Cs=Qe(()=>e(K).filter(t=>t.status==="in_progress").length),Et=Qe(()=>e(K).filter(t=>t.linear_id).length);function Ra(t){switch(t){case"urgent":return"priority-urgent";case"high":return"priority-high";case"medium":return"priority-medium";default:return"priority-low"}}function Sa(t){switch(t){case"done":return"status-done";case"in_progress":return"status-progress";case"archived":return"status-archived";default:return"status-todo"}}Js(()=>{(e(O)==="brain"||e(O)==="overview")&&!e(Q)&&(ye(),Lt()),(e(O)==="brain"||e(O)==="overview")&&!e($e)&&!e(ge)&&Ne(),e(O)==="sync"&&e(jt)!=="all"&&(l(X,null),At())});var La=Fi(),Da=s(La),es=s(Da);es.textContent="Focus by Kraliki // Strategy to Execution";var ts=r(es,2),Ua=s(ts),Ps=s(Ua);a(Ua);var Ma=r(Ua,2),Ts=s(Ma);{var Ns=t=>{var i=Gt("FOCUS: CHECKING...");o(t,i)},Os=t=>{var i=ne(),d=z(i);{var S=te=>{var It=Gt("FOCUS: ONLINE");o(te,It)},V=te=>{var It=Gt("FOCUS: OFFLINE");o(te,It)};g(d,te=>{e(f)==="online"?te(S):te(V,!1)},!0)}o(t,i)};g(Ts,t=>{e(f)==="checking"?t(Ns):t(Os,!1)})}a(Ma),a(ts),a(Da);var ka=r(Da,2);let as;var ss=s(ka),Fa=r(s(ss),2),rs=s(Fa);rs.textContent="Focus by Kraliki: AI Brain Organizer";var Rs=r(rs,2);{var Ls=t=>{var i=Ur();o(t,i)},Ds=t=>{var i=Mr();o(t,i)};g(Rs,t=>{e(n)==="unauthenticated"?t(Ls):t(Ds,!1)})}a(Fa);var is=r(Fa,2),ns=s(is),Us=r(ns,2);{var Ms=t=>{var i=Fr();ia(i,"href",h),o(t,i)};g(Us,t=>{e(f)==="online"&&t(Ms)})}a(is),a(ss),a(ka);var Ka=r(ka,2),Ba=s(Ka);let os;Ba.__click=()=>l(O,"overview");var Wa=r(Ba,2);let ls;Wa.__click=()=>l(O,"projects");var Ga=r(Wa,2);let vs;Ga.__click=()=>l(O,"tasks");var Va=r(Ga,2);let ds;Va.__click=()=>l(O,"sync");var cs=r(Va,2);let us;cs.__click=()=>l(O,"brain"),a(Ka);var Fs=r(Ka,2);{var Ks=t=>{var i=Kr(),d=r(s(i),2);d.textContent="Loading Focus by Kraliki data...",a(i),o(t,i)},Bs=t=>{var i=ne(),d=z(i);{var S=te=>{var It=vi(),ua=z(It),pa=s(ua),ga=r(s(pa),2),Ut=s(ga);{var Mt=p=>{var _=Gt("FOCUS: CHECKING...");o(p,_)},Jt=p=>{var _=ne(),A=z(_);{var F=x=>{var N=Gt("FOCUS: ONLINE");o(x,N)},Z=x=>{var N=Gt("FOCUS: OFFLINE");o(x,N)};g(A,x=>{e(f)==="online"?x(F):x(Z,!1)},!0)}o(p,_)};g(Ut,p=>{e(f)==="checking"?p(Mt):p(Jt,!1)})}a(ga),a(pa);var qt=r(pa,6),Ft=s(qt),it=s(Ft),Y=s(it,!0);a(it),ue(2),a(Ft);var me=r(Ft,2),nt=s(me),Ct=s(nt,!0);a(nt),ue(2),a(me);var ve=r(me,2),Oe=s(ve),Se=s(Oe,!0);a(Oe),ue(2),a(ve);var Re=r(ve,2),xe=s(Re),We=s(xe,!0);a(xe),ue(2),a(Re),a(qt),a(ua);var de=r(ua,2),ae=s(de),be=s(ae),Ge=s(be);Dr(Ge,{title:"Command Center",subtitle:"Unified AI assistant with voice, text, and workflow orchestration",get quickPrompts(){return oa},get isRecording(){return e(Ke)},get isProcessingAudio(){return e(Rt)},get supportsRecording(){return e(Vt)},get voiceProvider(){return e(ct)},get voiceStatus(){return e(at)},get recordingError(){return e(tt)},get uploadError(){return e(le)},onsend:ft,onrecord:Be,onstop:ja,onupload:ya,onprovider:zt,get inputMessage(){return e($t)},set inputMessage(p){l($t,p,!0)}}),a(be);var Le=r(be,2),re=r(s(Le),2),ke=s(re);Qa(ke),ke.__keydown=p=>p.key==="Enter"&&ta();var Ae=r(ke,2);Ae.__click=ta,a(re);var Pt=r(re,2),Kt=r(s(Pt),2);{var bt=p=>{var _=Br(),A=s(_,!0);a(_),b(()=>c(A,e(le))),o(p,_)};g(Kt,p=>{e(le)&&p(bt)})}a(Pt),a(Le),a(ae);var ot=r(ae,2),Ve=s(ot),E=r(s(Ve),2);{var C=p=>{var _=Yr(),A=z(_),F=s(A,!0);a(A);var Z=r(A,2);{var x=Xe=>{var Zt=Gr();Fe(Zt,21,()=>e(Q).priorities.slice(0,3),Ze,(zs,xs)=>{var za=Wr(),bs=s(za),hs=r(bs,2),Hs=s(hs,!0);a(hs),a(za),b(()=>{G(bs,1,`priority-dot ${e(xs).priority??""}`,"svelte-x1i5gj"),c(Hs,e(xs).title)}),o(zs,za)}),a(Zt),o(Xe,Zt)},N=Xe=>{var Zt=Vr();o(Xe,Zt)};g(Z,Xe=>{e(Q).priorities?.length?Xe(x):Xe(N,!1)})}var q=r(Z,2),ce=s(q),dt=s(ce);a(ce);var Me=r(ce,2),qe=s(Me);a(Me),a(q),b(()=>{c(F,e(Q).greeting),c(dt,`OVERDUE: ${(e(Q).overdue||0)??""}`),c(qe,`DUE TODAY: ${(e(Q).due_today||0)??""}`)}),o(p,_)},Ye=p=>{var _=ne(),A=z(_);{var F=x=>{var N=zr();o(x,N)},Z=x=>{var N=Hr();o(x,N)};g(A,x=>{e(B)?x(F):x(Z,!1)},!0)}o(p,_)};g(E,p=>{e(Q)?p(C):p(Ye,!1)})}a(Ve);var ze=r(Ve,2),Tt=r(s(ze),2);{var ht=p=>{var _=qr(),A=z(_),F=s(A,!0);a(A);var Z=r(A,2);{var x=N=>{var q=Jr(),ce=s(q,!0);a(q),b(()=>c(ce,e(Ce).reason)),o(N,q)};g(Z,N=>{e(Ce).reason&&N(x)})}b(()=>c(F,e(Ce).action)),o(p,_)},lt=p=>{var _=ne(),A=z(_);{var F=x=>{var N=Xr();o(x,N)},Z=x=>{var N=Qr();o(x,N)};g(A,x=>{e(B)?x(F):x(Z,!1)},!0)}o(p,_)};g(Tt,p=>{e(Ce)?p(ht):p(lt,!1)})}a(ze);var D=r(ze,2),H=r(s(D),2);{var De=p=>{var _=$r(),A=z(_),F=s(A);a(A);var Z=r(A,2);Fe(Z,21,()=>e($e).types.slice(0,5),Ze,(x,N)=>{var q=Zr(),ce=s(q),dt=r(ce,2),Me=s(dt,!0);a(dt);var qe=r(dt,2),Xe=s(qe,!0);a(qe),a(q),b(Zt=>{Ja(ce,`background-color: ${(e(N).color||"var(--terminal-green)")??""}`),c(Me,Zt),c(Xe,e(N).count)},[()=>e(N).type.toUpperCase()]),o(x,q)}),a(Z),b(()=>c(F,`TOTAL ITEMS: ${e($e).total_items??""}`)),o(p,_)},Ee=p=>{var _=ne(),A=z(_);{var F=x=>{var N=ei();o(x,N)},Z=x=>{var N=ne(),q=z(N);{var ce=Me=>{var qe=ti(),Xe=s(qe,!0);a(qe),b(()=>c(Xe,e(_e))),o(Me,qe)},dt=Me=>{var qe=ai();o(Me,qe)};g(q,Me=>{e(_e)?Me(ce):Me(dt,!1)},!0)}o(x,N)};g(A,x=>{e(ge)?x(F):x(Z,!1)},!0)}o(p,_)};g(H,p=>{e($e)?p(De):p(Ee,!1)})}a(D);var Ue=r(D,2),ie=s(Ue);ie.__click=ba;var He=s(ie,!0);a(ie);var j=r(ie,2);j.__click=()=>l(O,"brain"),a(Ue),a(ot),a(de);var k=r(de,2),U=s(k),ee=s(U),W=r(s(ee),2);W.__click=()=>l(O,"projects"),a(ee);var R=r(ee,2),J=s(R);Fe(J,17,()=>e(mt).slice(0,4),Ze,(p,_)=>{var A=si(),F=s(A),Z=s(F,!0);a(F);var x=r(F,2),N=s(x,!0);a(x);var q=r(x,2),ce=s(q);a(q),a(A),b(dt=>{c(Z,e(_).name),G(x,1,`snapshot-status ${e(_).status??""}`,"svelte-x1i5gj"),c(N,dt),c(ce,`${e(_).completed_count??""}/${e(_).task_count??""} tasks`)},[()=>e(_).status.toUpperCase()]),o(p,A)});var he=r(J,2);{var Je=p=>{var _=ri();o(p,_)};g(he,p=>{e(mt).length===0&&p(Je)})}a(R),a(U);var Xt=r(U,2),Bt=s(Xt),Aa=r(s(Bt),2);Aa.__click=()=>l(O,"tasks"),a(Bt);var Ea=r(Bt,2),Ia=s(Ea);Fe(Ia,17,()=>e(K).slice(0,6),Ze,(p,_)=>{var A=ii(),F=s(A),Z=s(F,!0);a(F);var x=r(F,2),N=s(x,!0);a(x);var q=r(x,2),ce=s(q,!0);a(q),a(A),b((dt,Me,qe,Xe)=>{G(F,1,`task-status ${dt??""}`,"svelte-x1i5gj"),c(Z,Me),c(N,e(_).title),G(q,1,`task-priority ${qe??""}`,"svelte-x1i5gj"),c(ce,Xe)},[()=>Sa(e(_).status),()=>e(_).status.replace("_"," ").toUpperCase(),()=>Ra(e(_).priority),()=>e(_).priority.toUpperCase()]),o(p,A)});var Ya=r(Ia,2);{var Nt=p=>{var _=ni();o(p,_)};g(Ya,p=>{e(K).length===0&&p(Nt)})}a(Ea),a(Xt);var vt=r(Xt,2),Wt=s(vt),_a=r(s(Wt),2);_a.__click=()=>l(O,"sync"),a(Wt);var fa=r(Wt,2),Qt=s(fa),ma=s(Qt),Ca=s(ma,!0);a(ma),ue(2),a(Qt);var xa=r(Qt,2),ps=s(xa),Ws=s(ps,!0);a(ps),ue(2),a(xa);var gs=r(xa,2),_s=s(gs),Gs=s(_s);a(_s),ue(2),a(gs),a(fa),a(vt);var fs=r(vt,2),ms=r(s(fs),2);Fe(ms,21,()=>la,Ze,(p,_)=>{var A=oi(),F=s(A),Z=s(F,!0);a(F);var x=r(F,2),N=s(x,!0);a(x);var q=r(x,2),ce=s(q,!0);a(q),a(A),b(()=>{c(Z,e(_).name),c(N,e(_).model),c(ce,e(_).note)}),o(p,A)}),a(ms),a(fs),a(k);var Vs=r(k,2);{var Ys=p=>{var _=li(),A=r(s(_),4);a(_),b(()=>ia(A,"href",e(v))),o(p,_)};g(Vs,p=>{e(n)==="unauthenticated"&&p(Ys)})}b((p,_)=>{G(ga,1,`hero-status ${e(f)??""}`,"svelte-x1i5gj"),c(Y,e(As)),c(Ct,e(xt)),c(Se,e(Cs)),c(We,e(Is)),Ae.disabled=p,ie.disabled=e(B)||e(ge),c(He,e(B)||e(ge)?"LOADING...":"REFRESH"),c(Ca,e(Et)),c(Ws,e(xt)-e(Et)),c(Gs,`${_??""}%`)},[()=>!e(et).trim(),()=>e(xt)>0?Math.round(e(Et)/e(xt)*100):0]),Xa("dragover",Le,Ta),Xa("drop",Le,Na),Pa(ke,()=>e(et),p=>l(et,p)),o(te,It)},V=te=>{var It=ne(),ua=z(It);{var pa=Ut=>{var Mt=ui(),Jt=s(Mt),qt=r(s(Jt),2);a(Jt);var Ft=r(Jt,2);Fe(Ft,21,()=>e(mt),Ze,(it,Y)=>{var me=ci();let nt;me.__click=()=>sa(e(Y).id===e(X)?null:e(Y).id);var Ct=s(me),ve=s(Ct),Oe=s(ve,!0);a(ve);var Se=r(ve,2),Re=s(Se,!0);a(Se),a(Ct);var xe=r(Ct,2);{var We=re=>{var ke=di(),Ae=s(ke,!0);a(ke),b(()=>c(Ae,e(Y).description)),o(re,ke)};g(xe,re=>{e(Y).description&&re(We)})}var de=r(xe,2),ae=s(de),be=s(ae);a(ae);var Ge=r(ae,2),Le=s(Ge);a(Ge),a(de),a(me),b(re=>{nt=G(me,1,"project-card svelte-x1i5gj",null,nt,{selected:e(X)===e(Y).id,active:e(Y).status==="active"}),c(Oe,e(Y).name),G(Se,1,`project-status ${e(Y).status??""}`,"svelte-x1i5gj"),c(Re,re),Ja(be,`width: ${e(Y).task_count>0?e(Y).completed_count/e(Y).task_count*100:0}%`),c(Le,`${e(Y).completed_count??""}/${e(Y).task_count??""} tasks`)},[()=>e(Y).status.toUpperCase()]),o(it,me)}),a(Ft),a(Mt),b(()=>{qt.disabled=e(n)==="unauthenticated",ia(qt,"title",e(n)==="unauthenticated"?"Login to Focus to create projects":"")}),o(Ut,Mt)},ga=Ut=>{var Mt=ne(),Jt=z(Mt);{var qt=it=>{var Y=bi(),me=s(Y),nt=s(me),Ct=s(nt);{var ve=E=>{var C=Gt();b(()=>c(C,`TASKS // ${e(wa).name??""}`)),o(E,C)},Oe=E=>{var C=Gt("ALL TASKS");o(E,C)};g(Ct,E=>{e(wa)?E(ve):E(Oe,!1)})}a(nt);var Se=r(nt,2),Re=s(Se);{var xe=E=>{var C=pi();C.__click=()=>sa(null),o(E,C)};g(Re,E=>{e(X)&&E(xe)})}var We=r(Re,2);a(Se),a(me);var de=r(me,2),ae=r(s(de),2),be=s(ae);a(ae);var Ge=r(ae,2),Le=s(Ge);a(Ge);var re=r(Ge,2),ke=s(re);a(re);var Ae=r(re,2),Pt=s(Ae);a(Ae),a(de);var Kt=r(de,2),bt=s(Kt);Fe(bt,17,()=>e(Dt),Ze,(E,C)=>{var Ye=mi(),ze=s(Ye),Tt=s(ze),ht=r(Tt,2),lt=s(ht),D=s(lt,!0);a(lt);var H=r(lt,2);{var De=W=>{var R=gi(),J=s(R,!0);a(R),b(()=>c(J,e(C).description)),o(W,R)};g(H,W=>{e(C).description&&W(De)})}a(ht),a(ze);var Ee=r(ze,2),Ue=s(Ee),ie=s(Ue,!0);a(Ue);var He=r(Ue,2),j=s(He,!0);a(He);var k=r(He,2);{var U=W=>{var R=_i(),J=s(R,!0);a(R),b(()=>{ia(R,"href",e(C).linear_url||"#"),c(J,e(C).linear_id)}),o(W,R)},ee=W=>{var R=fi();R.__click=()=>ra(e(C).id),b(()=>R.disabled=e(n)==="unauthenticated"),o(W,R)};g(k,W=>{e(C).linear_id?W(U):W(ee,!1)})}a(Ee),a(Ye),b((W,R,J,he,Je)=>{G(Tt,1,`task-status-dot ${W??""}`,"svelte-x1i5gj"),c(D,e(C).title),G(Ue,1,`task-priority ${R??""}`,"svelte-x1i5gj"),c(ie,J),G(He,1,`task-status-badge ${he??""}`,"svelte-x1i5gj"),c(j,Je)},[()=>Sa(e(C).status),()=>Ra(e(C).priority),()=>e(C).priority.toUpperCase(),()=>Sa(e(C).status),()=>e(C).status.replace("_"," ").toUpperCase()]),o(E,Ye)});var ot=r(bt,2);{var Ve=E=>{var C=xi();o(E,C)};g(ot,E=>{e(Dt).length===0&&E(Ve)})}a(Kt),a(Y),b((E,C,Ye)=>{We.disabled=e(n)==="unauthenticated",c(be,`ALL (${e(Dt).length??""})`),c(Le,`TODO (${E??""})`),c(ke,`IN PROGRESS (${C??""})`),c(Pt,`DONE (${Ye??""})`)},[()=>e(Dt).filter(E=>E.status==="todo").length,()=>e(Dt).filter(E=>E.status==="in_progress").length,()=>e(Dt).filter(E=>E.status==="done").length]),o(it,Y)},Ft=it=>{var Y=ne(),me=z(Y);{var nt=ve=>{var Oe=Si(),Se=s(Oe),Re=r(s(Se),2),xe=s(Re),We=s(xe),de=s(We,!0);a(We),ue(2),a(xe);var ae=r(xe,2),be=s(ae),Ge=s(be,!0);a(be),ue(2),a(ae);var Le=r(ae,2),re=s(Le),ke=s(re);a(re),ue(2),a(Le),a(Re);var Ae=r(Re,2),Pt=s(Ae),Kt=s(Pt);a(Pt),a(Ae),a(Se);var bt=r(Se,2),ot=r(s(bt),2),Ve=s(ot);Fe(Ve,17,()=>e(K).filter(D=>D.linear_id),Ze,(D,H)=>{var De=hi(),Ee=s(De),Ue=s(Ee,!0);a(Ee);var ie=r(Ee,2),He=s(ie,!0);a(ie);var j=r(ie,2),k=s(j,!0);a(j),a(De),b((U,ee)=>{c(Ue,e(H).title),c(He,e(H).linear_id),G(j,1,`synced-status ${U??""}`,"svelte-x1i5gj"),c(k,ee)},[()=>Sa(e(H).status),()=>e(H).status.replace("_"," ").toUpperCase()]),o(D,De)});var E=r(Ve,2);{var C=D=>{var H=ji();o(D,H)};g(E,D=>{e(Et)===0&&D(C)})}a(ot),a(bt);var Ye=r(bt,2),ze=r(s(Ye),2),Tt=s(ze);Fe(Tt,17,()=>e(K).filter(D=>!D.linear_id),Ze,(D,H)=>{var De=yi(),Ee=s(De),Ue=s(Ee,!0);a(Ee);var ie=r(Ee,2),He=s(ie,!0);a(ie);var j=r(ie,2);j.__click=()=>ra(e(H).id),a(De),b((k,U)=>{c(Ue,e(H).title),G(ie,1,`unsynced-priority ${k??""}`,"svelte-x1i5gj"),c(He,U),j.disabled=e(n)==="unauthenticated"},[()=>Ra(e(H).priority),()=>e(H).priority.toUpperCase()]),o(D,De)});var ht=r(Tt,2);{var lt=D=>{var H=wi();o(D,H)};g(ht,D=>{e(xt)-e(Et)===0&&D(lt)})}a(ze),a(Ye),a(Oe),b(D=>{c(de,e(Et)),c(Ge,e(xt)-e(Et)),c(ke,`${D??""}%`),Ja(Kt,`width: ${e(xt)>0?e(Et)/e(xt)*100:0}%`)},[()=>e(xt)>0?Math.round(e(Et)/e(xt)*100):0]),o(ve,Oe)},Ct=ve=>{var Oe=ne(),Se=z(Oe);{var Re=xe=>{var We=Mi(),de=s(We),ae=s(de),be=r(s(ae),2);be.__click=ye;var Ge=s(be,!0);a(be),a(ae);var Le=r(ae,2);{var re=j=>{var k=Ii(),U=s(k),ee=s(U,!0);a(U);var W=r(U,2);{var R=Nt=>{var vt=Ai(),Wt=r(s(vt),2);Fe(Wt,17,()=>e(Q).priorities,Ze,(_a,fa)=>{var Qt=ki(),ma=s(Qt),Ca=r(ma,2),xa=s(Ca,!0);a(Ca),a(Qt),b(()=>{G(ma,1,`priority-dot ${e(fa).priority??""}`,"svelte-x1i5gj"),c(xa,e(fa).title)}),o(_a,Qt)}),a(vt),o(Nt,vt)};g(W,Nt=>{e(Q).priorities&&e(Q).priorities.length>0&&Nt(R)})}var J=r(W,2),he=s(J),Je=s(he),Xt=s(Je,!0);a(Je),ue(2),a(he);var Bt=r(he,2),Aa=s(Bt),Ea=s(Aa,!0);a(Aa),ue(2),a(Bt),a(J);var Ia=r(J,2);{var Ya=Nt=>{var vt=Ei(),Wt=r(s(vt),2),_a=s(Wt,!0);a(Wt),a(vt),b(()=>c(_a,e(Q).insight)),o(Nt,vt)};g(Ia,Nt=>{e(Q).insight&&Nt(Ya)})}a(k),b(()=>{c(ee,e(Q).greeting),c(Xt,e(Q).overdue||0),c(Ea,e(Q).due_today||0)}),o(j,k)},ke=j=>{var k=ne(),U=z(k);{var ee=R=>{var J=Ci();o(R,J)},W=R=>{var J=Pi();o(R,J)};g(U,R=>{e(B)?R(ee):R(W,!1)},!0)}o(j,k)};g(Le,j=>{e(Q)?j(re):j(ke,!1)})}a(de);var Ae=r(de,2),Pt=r(s(Ae),2);{var Kt=j=>{var k=Ni(),U=s(k),ee=s(U,!0);a(U);var W=r(U,2);{var R=J=>{var he=Ti(),Je=s(he,!0);a(he),b(()=>c(Je,e(Ce).reason)),o(J,he)};g(W,J=>{e(Ce).reason&&J(R)})}a(k),b(()=>c(ee,e(Ce).action)),o(j,k)},bt=j=>{var k=Oi();o(j,k)};g(Pt,j=>{e(Ce)?j(Kt):j(bt,!1)})}a(Ae);var ot=r(Ae,2),Ve=r(s(ot),2),E=s(Ve);Qa(E),E.__keydown=j=>j.key==="Enter"&&ha();var C=r(E,2);C.__click=ha;var Ye=s(C,!0);a(C),a(Ve);var ze=r(Ve,2);{var Tt=j=>{var k=Li();let U;var ee=s(k),W=s(ee,!0);a(ee);var R=r(ee,2);{var J=he=>{var Je=Ri(),Xt=s(Je,!0);a(Je),b(Bt=>c(Xt,Bt),[()=>JSON.stringify(e(pe).data,null,2)]),o(he,Je)};g(R,he=>{e(pe).data&&he(J)})}a(k),b(()=>{U=G(k,1,"brain-response svelte-x1i5gj",null,U,{success:e(pe).success,error:!e(pe).success}),c(W,e(pe).message)}),o(j,k)};g(ze,j=>{e(pe)&&j(Tt)})}a(ot);var ht=r(ot,2),lt=r(s(ht),4),D=s(lt);qs(D);var H=r(D,2);H.__click=we;var De=s(H,!0);a(H),a(lt);var Ee=r(lt,2);{var Ue=j=>{var k=Di();let U;var ee=s(k),W=s(ee,!0);a(ee),a(k),b(()=>{U=G(k,1,"brain-response svelte-x1i5gj",null,U,{success:e(je).success,error:!e(je).success}),c(W,e(je).message)}),o(j,k)};g(Ee,j=>{e(je)&&j(Ue)})}a(ht);var ie=r(ht,2);{var He=j=>{var k=Ui(),U=r(s(k),4);a(k),b(()=>ia(U,"href",e(v))),o(j,k)};g(ie,j=>{e(n)==="unauthenticated"&&j(He)})}a(We),b((j,k)=>{be.disabled=e(B),c(Ge,e(B)?"LOADING...":"REFRESH"),E.disabled=e(B)||e(n)==="unauthenticated",C.disabled=j,c(Ye,e(B)?"THINKING...":"ASK"),D.disabled=e(B)||e(n)==="unauthenticated",H.disabled=k,c(De,e(B)?"CAPTURING...":"CAPTURE")},[()=>e(B)||!e(yt).trim()||e(n)==="unauthenticated",()=>e(B)||!e(oe).trim()||e(n)==="unauthenticated"]),Pa(E,()=>e(yt),j=>l(yt,j)),Pa(D,()=>e(oe),j=>l(oe,j)),o(xe,We)};g(Se,xe=>{e(O)==="brain"&&xe(Re)},!0)}o(ve,Oe)};g(me,ve=>{e(O)==="sync"?ve(nt):ve(Ct,!1)},!0)}o(it,Y)};g(Jt,it=>{e(O)==="tasks"?it(qt):it(Ft,!1)},!0)}o(Ut,Mt)};g(ua,Ut=>{e(O)==="projects"?Ut(pa):Ut(ga,!1)},!0)}o(te,It)};g(d,te=>{e(O)==="overview"?te(S):te(V,!1)},!0)}o(t,i)};g(Fs,t=>{e(Ot)?t(Ks):t(Bs,!1)})}a(La),b(()=>{c(Ps,`${e(Es)??""} PROJECTS`),G(Ma,1,`focus-badge ${e(f)??""}`,"svelte-x1i5gj"),as=G(ka,1,"integration-banner svelte-x1i5gj",null,as,{online:e(f)==="online",demo:e(n)==="unauthenticated"}),ia(ns,"href",e(v)),os=G(Ba,1,"focus-tab svelte-x1i5gj",null,os,{active:e(O)==="overview"}),ls=G(Wa,1,"focus-tab svelte-x1i5gj",null,ls,{active:e(O)==="projects"}),vs=G(Ga,1,"focus-tab svelte-x1i5gj",null,vs,{active:e(O)==="tasks"}),ds=G(Va,1,"focus-tab svelte-x1i5gj",null,ds,{active:e(O)==="sync"}),us=G(cs,1,"focus-tab brain-tab svelte-x1i5gj",null,us,{active:e(O)==="brain"})}),o(y,La),$a()}Ss(["click","keydown"]);export{nn as component};
