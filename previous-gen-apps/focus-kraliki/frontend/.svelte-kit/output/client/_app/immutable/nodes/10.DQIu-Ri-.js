import{f as c,a as n}from"../chunks/pejWV2dy.js";import{p as pt,o as ut,s,t as h,a as mt,c as t,b as A,i as P,n as w,r as e,g as r,f as xt,j as ae}from"../chunks/DgM1AnfY.js";import{d as ft,s as o}from"../chunks/pi1oX53H.js";import{i as j}from"../chunks/B5hbs7lp.js";import{l as _t,e as ie,i as oe}from"../chunks/RjzcECkQ.js";import{a as de}from"../chunks/CBf0kXIe.js";import{e as bt}from"../chunks/Ck-hEq_X.js";import{C as le}from"../chunks/DhnkCbLb.js";import{S as Pe}from"../chunks/ClgZFxqt.js";import{S as ne}from"../chunks/Cxs3zBwr.js";var gt=c('<div class="flex items-center justify-center h-64"><div class="flex items-center gap-3"><div class="w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin"></div> <p class="text-sm text-muted-foreground">Loading insights…</p></div></div>'),yt=c('<p class="text-xs text-muted-foreground">No telemetry breakdown available yet.</p>'),ht=c('<li class="flex items-center justify-between"><span class="text-muted-foreground"> </span> <span class="font-semibold"> </span></li>'),wt=c('<ul class="text-sm space-y-2"></ul>'),kt=c('<p class="text-xs text-muted-foreground">No runs recorded yet.</p>'),St=c('<span class="text-[11px] uppercase tracking-wide"> </span>'),jt=c('<li class="flex flex-col gap-0.5 text-muted-foreground border-b border-border/60 pb-1 last:border-0 last:pb-0"><div class="flex items-center justify-between"><span> </span> <span> </span></div> <!></li>'),Ct=c('<ul class="space-y-2 text-sm"></ul>'),Rt=c('<div class="rounded-xl border border-border p-3"><p class="text-xs text-muted-foreground"> </p> <p class="text-lg font-semibold"> </p></div>'),At=c('<section class="bg-card border border-border rounded-2xl p-5 space-y-3"><div class="flex items-center justify-between"><p class="text-sm font-semibold">Usage history</p> <button class="text-xs text-primary hover:text-primary/80">Forecast</button></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm"></div></section>'),Pt=c('<div class="grid grid-cols-1 lg:grid-cols-3 gap-4"><section class="bg-card border border-border rounded-2xl p-5 space-y-3"><div class="flex items-center justify-between"><p class="text-sm font-semibold flex items-center gap-2"><!> Usage</p> <button class="text-xs text-primary hover:text-primary/80">Ask assistant</button></div> <p class="text-2xl font-bold"> </p> <p class="text-xs text-muted-foreground"> </p></section> <section class="bg-card border border-border rounded-2xl p-5 space-y-3"><div class="flex items-center justify-between"><p class="text-sm font-semibold flex items-center gap-2"><!> Subscription</p> <button class="text-xs text-primary hover:text-primary/80">Tell assistant</button></div> <p class="text-2xl font-bold capitalize"> </p> <p class="text-xs text-muted-foreground"> </p></section> <section class="bg-card border border-border rounded-2xl p-5 space-y-3"><div class="flex items-center justify-between"><p class="text-sm font-semibold flex items-center gap-2"><!> Orchestration</p> <button class="text-xs text-primary hover:text-primary/80">Review</button></div> <p class="text-2xl font-bold"> </p> <p class="text-xs text-muted-foreground"> </p></section></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4"><section class="bg-card border border-border rounded-2xl p-5 space-y-3"><div class="flex items-center justify-between"><p class="text-sm font-semibold">Route breakdown</p> <button class="text-xs text-primary hover:text-primary/80">Analyze</button></div> <!></section> <section class="bg-card border border-border rounded-2xl p-5 space-y-3"><div class="flex items-center justify-between"><p class="text-sm font-semibold">Recent runs</p> <button class="text-xs text-primary hover:text-primary/80">Summarize</button></div> <!></section></div> <!>',1),Dt=c('<div class="space-y-6"><header class="flex flex-col gap-4"><div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div><h1 class="text-3xl font-bold flex items-center gap-2"><!> Insights</h1> <p class="text-muted-foreground">Usage, subscription, and orchestration telemetry at a glance.</p></div> <button class="flex items-center gap-2 px-3 py-2 text-sm rounded-full border border-border hover:bg-accent/40 transition-colors"><!> Ask assistant</button></div> <div class="bg-gradient-to-br from-primary/10 via-accent/10 to-secondary/10 border border-primary/20 rounded-2xl p-4"><div class="flex items-center justify-between flex-wrap gap-3"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center"><!></div> <div><p class="text-xs text-muted-foreground">Account Status</p> <p class="font-semibold"> </p></div></div> <div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center"><!></div> <div><p class="text-xs text-muted-foreground">BYOK Status</p> <p class="font-semibold"> </p></div></div> <div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center"><!></div> <div><p class="text-xs text-muted-foreground">Orchestrations</p> <p class="font-semibold"> </p></div></div></div></div></header> <!></div>');function Nt(De,Oe){pt(Oe,!0);let g=P(null),C=P(null),v=P(null),ce=P(!0);ut(async()=>{try{const[l,y,k]=await Promise.all([de.settings.getUsageStats(),de.billing.subscriptionStatus(),de.ai.telemetrySummary()]);A(g,l,!0),A(C,y,!0),A(v,k,!0)}catch(l){_t.error("Failed to load insights",l)}finally{A(ce,!1)}});function _(l){bt({prompt:l})}let ve=ae(()=>r(v)?.routeBreakdown||r(v)?.routes||[]),pe=ae(()=>r(v)?.recentRuns||r(v)?.history||[]),ue=ae(()=>r(v)?.usageHistory||[]);var D=Dt(),O=t(D),z=t(O),F=t(z),me=t(F),ze=t(me);le(ze,{class:"w-8 h-8 text-primary"}),w(),e(me),w(2),e(F);var U=s(F,2);U.__click=()=>_("Give me a health summary of my workspace.");var Fe=t(U);Pe(Fe,{class:"w-4 h-4"}),w(),e(U),e(z);var xe=s(z,2),fe=t(xe),B=t(fe),K=t(B),Ue=t(K);ne(Ue,{class:"w-5 h-5 text-primary"}),e(K);var _e=s(K,2),be=s(t(_e),2),Be=t(be,!0);e(be),e(_e),e(B);var E=s(B,2),H=t(E),Ke=t(H);le(Ke,{class:"w-5 h-5 text-blue-600"}),e(H);var ge=s(H,2),ye=s(t(ge),2),Ee=t(ye,!0);e(ye),e(ge),e(E);var he=s(E,2),I=t(he),He=t(I);Pe(He,{class:"w-5 h-5 text-green-600"}),e(I);var we=s(I,2),ke=s(t(we),2),Ie=t(ke,!0);e(ke),e(we),e(he),e(fe),e(xe),e(O);var Le=s(O,2);{var Ne=l=>{var y=gt();n(l,y)},Te=l=>{var y=Pt(),k=xt(y),L=t(k),N=t(L),T=t(N),Ye=t(T);ne(Ye,{class:"w-4 h-4 text-primary"}),w(),e(T);var qe=s(T,2);qe.__click=()=>_("How is my usage trending versus limits?"),e(N);var Y=s(N,2),Ge=t(Y,!0);e(Y);var Se=s(Y,2),Me=t(Se);e(Se),e(L);var q=s(L,2),G=t(q),M=t(G),$e=t(M);ne($e,{class:"w-4 h-4 text-primary"}),w(),e(M);var Je=s(M,2);Je.__click=()=>_("Do I need to adjust my subscription or billing?"),e(G);var $=s(G,2),Qe=t($,!0);e($);var je=s($,2),Ve=t(je);e(je),e(q);var Ce=s(q,2),J=t(Ce),Q=t(J),We=t(Q);le(We,{class:"w-4 h-4 text-primary"}),w(),e(Q);var Xe=s(Q,2);Xe.__click=()=>_("Review my orchestrator telemetry and suggest improvements."),e(J);var V=s(J,2),Ze=t(V,!0);e(V);var Re=s(V,2),et=t(Re);e(Re),e(Ce),e(k);var W=s(k,2),X=t(W),Z=t(X),tt=s(t(Z),2);tt.__click=()=>_("Analyze orchestrated vs deterministic routes and recommend improvements."),e(Z);var rt=s(Z,2);{var st=a=>{var i=yt();n(a,i)},at=a=>{var i=wt();ie(i,21,()=>r(ve),oe,(b,d)=>{var p=ht(),m=t(p),u=t(m,!0);e(m);var x=s(m,2),f=t(x,!0);e(x),e(p),h(()=>{o(u,r(d).route||r(d).name),o(f,r(d).count??r(d).value)}),n(b,p)}),e(i),n(a,i)};j(rt,a=>{r(ve).length===0?a(st):a(at,!1)})}e(X);var Ae=s(X,2),ee=t(Ae),it=s(t(ee),2);it.__click=()=>_("Summarize my last few orchestrations and outcomes."),e(ee);var ot=s(ee,2);{var dt=a=>{var i=kt();n(a,i)},lt=a=>{var i=Ct();ie(i,21,()=>r(pe).slice(0,5),oe,(b,d)=>{var p=jt(),m=t(p),u=t(m),x=t(u,!0);e(u);var f=s(u,2),te=t(f,!0);e(f),e(m);var R=s(m,2);{var re=S=>{var se=St(),vt=t(se);e(se),h(()=>o(vt,`Decision: ${r(d).decisionStatus??""}`)),n(S,se)};j(R,S=>{r(d).decisionStatus&&S(re)})}e(p),h(S=>{o(x,r(d).label||r(d).route||"Run"),o(te,S)},[()=>r(d).confidence?`${(r(d).confidence*100).toFixed(0)}%`:r(d).result||""]),n(b,p)}),e(i),n(a,i)};j(ot,a=>{r(pe).length===0?a(dt):a(lt,!1)})}e(Ae),e(W);var nt=s(W,2);{var ct=a=>{var i=At(),b=t(i),d=s(t(b),2);d.__click=()=>_("Review my usage history and forecast when I will hit limits."),e(b);var p=s(b,2);ie(p,21,()=>r(ue).slice(0,4),oe,(m,u)=>{var x=Rt(),f=t(x),te=t(f,!0);e(f);var R=s(f,2),re=t(R,!0);e(R),e(x),h(()=>{o(te,r(u).label||r(u).period||"Period"),o(re,r(u).value??r(u).count??0)}),n(m,x)}),e(p),e(i),n(a,i)};j(nt,a=>{r(ue).length>0&&a(ct)})}h((a,i)=>{o(Ge,r(g)?.usageCount??0),o(Me,`Remaining: ${r(g)?.remainingUsage??"∞"??""} · BYOK: ${r(g)?.hasCustomKey?"On":"Off"}`),o(Qe,r(C)?.status||"free"),o(Ve,`Renews: 
					${a??""}`),o(Ze,r(v)?.orchestratedCount??0),o(et,`Deterministic: ${r(v)?.deterministicCount??0??""} · Avg Confidence: 
					${i??""}`)},[()=>r(C)?.currentPeriodEnd?new Date(r(C).currentPeriodEnd*1e3).toLocaleDateString():"n/a",()=>r(v)?.averageConfidence?r(v).averageConfidence.toFixed(2):"n/a"]),n(l,y)};j(Le,l=>{r(ce)?l(Ne):l(Te,!1)})}e(D),h(()=>{o(Be,r(g)?.isPremium?"Premium":"Free Tier"),o(Ee,r(g)?.hasCustomKey?"Enabled":"Disabled"),o(Ie,r(v)?.orchestratedCount??0)}),n(De,D),mt()}ft(["click"]);export{Nt as component};
