import{f as _,a as h}from"../chunks/pejWV2dy.js";import"../chunks/CQ2dU6u5.js";import{p as pe,o as ue,s as c,t as T,g as e,a as ve,b as l,c as o,m as y,n as x,r as a,d as fe}from"../chunks/DgM1AnfY.js";import{d as be,e as ge,s as M}from"../chunks/pi1oX53H.js";import{i as C}from"../chunks/B5hbs7lp.js";import{e as q,l as he,i as ye}from"../chunks/RjzcECkQ.js";import{r as E,s as $}from"../chunks/DGcJkfPx.js";import{b as xe,a as _e}from"../chunks/CzAIYQz9.js";import{b as we}from"../chunks/QknctPh7.js";import{i as ke}from"../chunks/CUTbOrLX.js";import{a as K}from"../chunks/CBf0kXIe.js";import{M as Te}from"../chunks/CKpkprxw.js";import{S as Se}from"../chunks/ClgZFxqt.js";import{S as Ie}from"../chunks/BRDH1Nx-.js";import{U as Me}from"../chunks/BCE5MqQf.js";import{B as Q}from"../chunks/CYXqwoIh.js";var Ce=_('<p class="whitespace-pre-wrap break-words"> </p>'),$e=_('<div><div><!></div> <div class="flex-1 max-w-3xl"><div><!></div> <p> </p></div></div>'),De=_('<div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full bg-accent flex items-center justify-center"><!></div> <div class="flex-1 max-w-3xl"><div class="p-4 rounded-lg bg-card border border-border"><div class="flex gap-2"><div class="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style="animation-delay: 0ms"></div> <div class="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style="animation-delay: 150ms"></div> <div class="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style="animation-delay: 300ms"></div></div></div></div></div>'),Ue=_("<li> </li>"),Oe=_('<div class="bg-card border border-border rounded-lg p-4 mb-4"><h2 class="text-lg font-semibold mb-2">Orchestrated Workflow</h2> <p class="text-sm text-muted-foreground mb-2"> </p> <ul class="list-disc pl-5 space-y-1"></ul></div>'),je=_(`<div class="flex flex-col h-[calc(100vh-8rem)]"><div class="flex items-center justify-between pb-4 border-b border-border"><div><h1 class="text-3xl font-bold flex items-center gap-2"><!> AI Chat</h1> <p class="text-muted-foreground mt-1">Powered by Claude & GPT-4</p></div> <div class="flex items-center gap-4"><label class="inline-flex items-center gap-2 text-sm"><input type="checkbox" class="rounded border-border"/> Use Orchestrator</label> <button class="px-4 py-2 text-sm bg-accent text-accent-foreground rounded-md hover:bg-accent/80 transition-colors">Clear Chat</button></div></div> <div class="flex-1 overflow-y-auto py-6 space-y-4"><!> <!></div> <!> <div class="pt-4 border-t border-border"><form class="flex gap-3"><input type="text" placeholder="Type your message... (e.g., 'Create a task for tomorrow')" class="flex-1 px-4 py-3 bg-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50"/> <button type="submit" class="px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"><!> <span class="hidden sm:inline">Send</span></button></form> <p class="text-xs text-muted-foreground mt-2">Try: "Create a high priority task for tomorrow" or "Analyze my productivity patterns"</p></div></div>`);function Ve(V,X){pe(X,!1);let d=y([]),u=y(""),v=y(!1),f=y(),D=y(!1),w=y(null);ue(()=>{const t=localStorage.getItem("chat_history");if(t)try{const r=JSON.parse(t);l(d,r.map(s=>({...s,timestamp:new Date(s.timestamp)})))}catch(r){he.error("Failed to parse chat history",r)}e(d).length===0&&l(d,[{role:"assistant",content:"Hi! I'm your AI assistant powered by Claude and GPT-4. I can help you with task management, natural language processing, and productivity insights. How can I assist you today?",timestamp:new Date}])});async function Y(){if(!e(u).trim()||e(v))return;const t={role:"user",content:e(u).trim(),timestamp:new Date};l(d,[...e(d),t]),l(u,""),l(v,!0),setTimeout(()=>z(),100);try{const r=e(d).slice(-10).map(i=>({role:i.role,content:i.content}));let s="";if(e(D)){const i=await K.ai.orchestrateTask({input:t.content});l(w,i);const k=i.workflow?.map(p=>`- Step ${p.step}: ${p.action} (${p.estimatedMinutes} min)`).join("\\n")||"No steps provided.";s=`**Main Task:** ${i.mainTask?.title||"Untitled"}\\n\\n${k}\\n\\nConfidence: ${i.confidence??"n/a"}`}else{const i=await K.ai.chat({message:t.content,conversation_history:r.slice(0,-1)});s=i.response||i.message||"I apologize, but I could not generate a response.",l(w,null)}const m={role:"assistant",content:s,timestamp:new Date};l(d,[...e(d),m]),localStorage.setItem("chat_history",JSON.stringify(e(d))),setTimeout(()=>z(),100)}catch(r){const s={role:"assistant",content:`Sorry, I encountered an error: ${r.detail||"Unknown error"}`,timestamp:new Date};l(d,[...e(d),s])}finally{l(v,!1)}}function z(){e(f)&&fe(f,e(f).scrollTop=e(f).scrollHeight)}function Z(){confirm("Are you sure you want to clear the chat history?")&&(l(d,[{role:"assistant",content:"Chat cleared. How can I help you?",timestamp:new Date}]),localStorage.removeItem("chat_history"))}function ee(t){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t)}ke();var U=je(),O=o(U),j=o(O),F=o(j),te=o(F);Se(te,{class:"w-8 h-8 text-primary"}),x(),a(F),x(2),a(j);var G=c(j,2),A=o(G),J=o(A);E(J),x(),a(A);var re=c(A,2);re.__click=Z,a(G),a(O);var S=c(O,2),L=o(S);q(L,1,()=>e(d),t=>t.timestamp.getTime(),(t,r)=>{var s=$e(),m=o(s),i=o(m);{var k=n=>{Me(n,{class:"w-4 h-4"})},p=n=>{Q(n,{class:"w-4 h-4"})};C(i,n=>{e(r).role==="user"?n(k):n(p,!1)})}a(m);var b=c(m,2),g=o(b),ne=o(g);{var le=n=>{var N=Ce(),me=o(N,!0);a(N),T(()=>M(me,e(r).content)),h(n,N)},de=n=>{Te(n,{get content(){return e(r).content}})};C(ne,n=>{e(r).role==="user"?n(le):n(de,!1)})}a(g);var B=c(g,2),ce=o(B,!0);a(B),a(b),a(s),T(n=>{$(s,1,`flex items-start gap-3 ${e(r).role==="user"?"flex-row-reverse":""}`),$(m,1,`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${e(r).role==="user"?"bg-primary text-primary-foreground":"bg-accent text-accent-foreground"}`),$(g,1,`p-4 rounded-lg ${e(r).role==="user"?"bg-primary text-primary-foreground ml-auto":"bg-card border border-border"}`),$(B,1,`text-xs text-muted-foreground mt-1 ${e(r).role==="user"?"text-right":""}`),M(ce,n)},[()=>ee(e(r).timestamp)]),h(t,s)});var ae=c(L,2);{var oe=t=>{var r=De(),s=o(r),m=o(s);Q(m,{class:"w-4 h-4"}),a(s),x(2),a(r),h(t,r)};C(ae,t=>{e(v)&&t(oe)})}a(S),we(S,t=>l(f,t),()=>e(f));var R=c(S,2);{var se=t=>{var r=Oe(),s=c(o(r),2),m=o(s);a(s);var i=c(s,2);q(i,5,()=>e(w).workflow||[],ye,(k,p)=>{var b=Ue(),g=o(b);a(b),T(()=>M(g,`Step ${e(p).step??""}: ${e(p).action??""} (${e(p).estimatedMinutes??""} min)`)),h(k,b)}),a(i),a(r),T(()=>M(m,`Main Task: ${(e(w).mainTask?.title||"Untitled")??""}`)),h(t,r)};C(R,t=>{e(w)&&t(se)})}var W=c(R,2),H=o(W),I=o(H);E(I);var P=c(I,2),ie=o(P);Ie(ie,{class:"w-4 h-4"}),x(2),a(P),a(H),x(2),a(W),a(U),T(t=>{I.disabled=e(v),P.disabled=t},[()=>e(v)||!e(u).trim()]),xe(J,()=>e(D),t=>l(D,t)),ge("submit",H,t=>{t.preventDefault(),Y()}),_e(I,()=>e(u),t=>l(u,t)),h(V,U),ve()}be(["click"]);export{Ve as component};
