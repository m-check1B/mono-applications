import{c as me,a as c,f as g}from"../chunks/pejWV2dy.js";import{f as fe,p as lt,o as ct,y as pt,g as e,b as i,c as a,s,t as S,a as ut,i as b,j as ce,n as h,r}from"../chunks/DgM1AnfY.js";import{d as vt,s as y}from"../chunks/pi1oX53H.js";import{i as H}from"../chunks/B5hbs7lp.js";import{I as Ae,s as Ne,e as We,i as Se}from"../chunks/RjzcECkQ.js";import{b as Re,r as pe,s as mt}from"../chunks/DGcJkfPx.js";import{a as ue}from"../chunks/CzAIYQz9.js";import{l as Te,s as Ee,a as ft,b as bt}from"../chunks/BQCnAYr2.js";import{g as Ce}from"../chunks/CABBFY_M.js";import{w as l}from"../chunks/CKwKpirn.js";import{a as gt}from"../chunks/CBf0kXIe.js";import{e as _t}from"../chunks/Ck-hEq_X.js";import{S as ve}from"../chunks/ClgZFxqt.js";import"../chunks/CQ2dU6u5.js";import{S as xt}from"../chunks/Cxs3zBwr.js";import{T as ht}from"../chunks/cgRD4-iY.js";function yt(k,_){const w=Te(_,["children","$$slots","$$events","$$legacy"]);const $=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];Ae(k,Ee({name:"user-plus"},()=>w,{get iconNode(){return $},children:(M,m)=>{var p=me(),u=fe(p);Ne(u,_,"default",{}),c(M,p)},$$slots:{default:!0}}))}function kt(k,_){const w=Te(_,["children","$$slots","$$events","$$legacy"]);const $=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}]];Ae(k,Ee({name:"users"},()=>w,{get iconNode(){return $},children:(M,m)=>{var p=me(),u=fe(p);Ne(u,_,"default",{}),c(M,p)},$$slots:{default:!0}}))}var wt=g('<p class="text-xs text-muted-foreground"> </p>'),$t=g('<button><p class="font-medium"> </p> <p class="text-xs text-muted-foreground"> </p></button>'),Mt=g('<span class="text-sm text-muted-foreground"> </span>'),It=g('<p class="text-muted-foreground">Select or create a workspace to manage members.</p>'),Wt=g('<p class="text-muted-foreground">No members yet. Invite teammates to collaborate.</p>'),St=g('<tr class="border-b border-border/60"><td class="py-2"><p class="font-medium"> </p> <p class="text-xs text-muted-foreground"> </p></td><td class="py-2"><select class="px-2 py-1 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring text-xs"><option>Member</option><option>Admin</option><option disabled>Owner</option></select></td><td class="py-2 text-right"><button class="p-2 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors"><!></button></td></tr>'),Rt=g('<div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="text-left text-muted-foreground border-b border-border"><th class="py-2">Member</th><th class="py-2">Role</th><th class="py-2 text-right">Actions</th></tr></thead><tbody></tbody></table></div>'),Ct=g('<div class="space-y-6"><div><h1 class="text-3xl font-bold">Team Workspaces</h1> <p class="text-muted-foreground mt-1">Manage shared workspaces, roles, and invites</p></div> <div class="flex flex-wrap gap-2 text-xs sm:text-sm"><button class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-dashed border-primary/40 text-primary hover:bg-primary/10 transition"><!> Ask for staffing plan</button> <button class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-dashed border-primary/40 text-primary hover:bg-primary/10 transition"><!> Craft invite note</button> <button class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-dashed border-primary/40 text-primary hover:bg-primary/10 transition"><!> Review access & roles</button></div> <!> <div class="grid grid-cols-1 lg:grid-cols-3 gap-4"><div class="bg-card border border-border rounded-lg p-6 space-y-4"><div class="flex items-center gap-2"><!> <h2 class="text-lg font-semibold">Your Workspaces</h2></div> <div class="space-y-3"></div> <div class="border-t border-border pt-4 space-y-2"><h3 class="text-sm font-semibold">Create Workspace</h3> <input type="text" placeholder="Name" class="w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"/> <input type="text" placeholder="Description" class="w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"/> <button class="w-full px-3 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors">Create</button></div></div> <div class="bg-card border border-border rounded-lg p-6 space-y-4 lg:col-span-2"><div class="flex items-center gap-2"><!> <h2 class="text-lg font-semibold">Invite Team Members</h2></div> <p class="text-sm text-muted-foreground">Invite teammates to collaborate in your active workspace.</p> <div class="grid grid-cols-1 md:grid-cols-3 gap-3"><input type="email" placeholder="team@company.com" class="md:col-span-2 px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"/> <select class="px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"><option>Member</option><option>Admin</option></select></div> <div class="flex items-center gap-3"><button class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors">Send Invite</button> <!></div></div></div> <div class="bg-card border border-border rounded-lg p-6 space-y-4"><div class="flex items-center gap-2"><!> <h2 class="text-lg font-semibold">Workspace Members</h2></div> <!></div></div>');function Jt(k,_){lt(_,!0);const w=()=>bt(l,"$workspacesStore",$),[$,M]=ft();let m=b(""),p=b("MEMBER"),u=b(""),R=b(""),n=b(null),C=b(null),A=b(null),q=b(null),I=ce(w),De=ce(()=>e(I).workspaces),N=ce(()=>e(I).members);ct(async()=>{await l.loadWorkspaces();const t=Ce(l);i(n,t.activeWorkspaceId,!0),e(n)&&await l.loadMembers(e(n))}),pt(()=>{e(I).activeWorkspaceId&&e(I).activeWorkspaceId!==e(n)&&(i(n,e(I).activeWorkspaceId,!0),l.loadMembers(e(n)))});async function He(t){i(n,t,!0),await l.switchWorkspace(t)}async function qe(){if(!e(n)||!e(m).trim())return;const t=await l.inviteMember(e(n),e(m).trim(),e(p));t.success?(i(m,""),i(C,"Invitation sent!")):i(C,t.error||"Could not invite member",!0)}async function Oe(t,o){e(n)&&await l.updateMemberRole(e(n),t.id,o)}function ze(t,o){const d=o.currentTarget;d&&Oe(t,d.value)}async function Be(t){e(n)&&confirm(`Remove ${t.email||t.name||"member"} from workspace?`)&&await l.removeMember(e(n),t.id)}async function Pe(){if(!e(u).trim())return;await gt.workspaces.create({name:e(u).trim(),description:e(R)}),i(u,""),i(R,""),await l.loadWorkspaces();const t=Ce(l);i(n,t.activeWorkspaceId,!0),e(n)&&await l.loadMembers(e(n))}function je(t){i(A,t,!0),e(q)&&clearTimeout(e(q)),i(q,setTimeout(()=>{i(A,null)},2500),!0)}function O(t,o){_t({prompt:t,context:o}),je("Sent to assistant. Continue in the Assistant tab.")}function Ue(){const t={workspaceId:e(n),memberCount:e(N).length},o=`Review the staffing plan for my workspace${e(n)?` (${e(n)})`:""}. Highlight role gaps and onboarding priorities.`;O(o,t)}function Fe(){O("Draft an invite note to attract collaborators to my Focus by Kraliki workspace.")}function Ke(){O("Analyze workspace roles and recommend access or security adjustments.",{memberRoles:e(N).map(o=>o.role)})}var z=Ct(),B=s(a(z),2),T=a(B);T.__click=Ue;var Ye=a(T);ve(Ye,{class:"w-3.5 h-3.5"}),h(),r(T);var E=s(T,2);E.__click=Fe;var Ge=a(E);ve(Ge,{class:"w-3.5 h-3.5"}),h(),r(E);var P=s(E,2);P.__click=Ke;var Je=a(P);ve(Je,{class:"w-3.5 h-3.5"}),h(),r(P),r(B);var be=s(B,2);{var Le=t=>{var o=wt(),d=a(o,!0);r(o),S(()=>y(d,e(A))),c(t,o)};H(be,t=>{e(A)&&t(Le)})}var j=s(be,2),U=a(j),F=a(U),Qe=a(F);kt(Qe,{class:"w-5 h-5 text-primary"}),h(2),r(F);var K=s(F,2);We(K,21,()=>e(De),Se,(t,o)=>{var d=$t();d.__click=()=>He(e(o).id);var W=a(d),te=a(W,!0);r(W);var v=s(W,2),x=a(v);r(v),r(d),S(()=>{mt(d,1,`w-full text-left px-3 py-2 rounded-md border ${e(n)===e(o).id?"border-primary bg-primary/10":"border-border hover:bg-accent/40"}`),y(te,e(o).name),y(x,`${(e(o).memberCount||0)??""} member${e(o).memberCount===1?"":"s"}`)}),c(t,d)}),r(K);var ge=s(K,2),Y=s(a(ge),2);pe(Y);var G=s(Y,2);pe(G);var Ve=s(G,2);Ve.__click=Pe,r(ge),r(U);var _e=s(U,2),J=a(_e),Xe=a(J);yt(Xe,{class:"w-5 h-5 text-primary"}),h(2),r(J);var L=s(J,4),Q=a(L);pe(Q);var V=s(Q,2),X=a(V);X.value=X.__value="MEMBER";var xe=s(X);xe.value=xe.__value="ADMIN",r(V),r(L);var he=s(L,2),Z=a(he);Z.__click=qe;var Ze=s(Z,2);{var et=t=>{var o=Mt(),d=a(o,!0);r(o),S(()=>y(d,e(C))),c(t,o)};H(Ze,t=>{e(C)&&t(et)})}r(he),r(_e),r(j);var ye=s(j,2),ee=a(ye),tt=a(ee);xt(tt,{class:"w-5 h-5 text-primary"}),h(2),r(ee);var rt=s(ee,2);{var at=t=>{var o=It();c(t,o)},ot=t=>{var o=me(),d=fe(o);{var W=v=>{var x=Wt();c(v,x)},te=v=>{var x=Rt(),ke=a(x),we=s(a(ke));We(we,21,()=>e(N),Se,(st,f,At)=>{var re=St(),ae=a(re),oe=a(ae),nt=a(oe,!0);r(oe);var $e=s(oe,2),it=a($e,!0);r($e),r(ae);var se=s(ae),D=a(se);D.__change=le=>ze(e(f),le);var ne=a(D);ne.value=ne.__value="MEMBER";var ie=s(ne);ie.value=ie.__value="ADMIN";var Me=s(ie);Me.value=Me.__value="OWNER",r(D),r(se);var Ie=s(se),de=a(Ie);de.__click=()=>Be(e(f));var dt=a(de);ht(dt,{class:"w-4 h-4"}),r(de),r(Ie),r(re),S(()=>{y(nt,e(f).name||e(f).email||e(f).userId),y(it,e(f).email)}),Re(D,()=>e(f).role,le=>e(f).role=le),c(st,re)}),r(we),r(ke),r(x),c(v,x)};H(d,v=>{e(N).length===0?v(W):v(te,!1)},!0)}c(t,o)};H(rt,t=>{e(n)?t(ot,!1):t(at)})}r(ye),r(z),S(()=>Z.disabled=!e(m)),ue(Y,()=>e(u),t=>i(u,t)),ue(G,()=>e(R),t=>i(R,t)),ue(Q,()=>e(m),t=>i(m,t)),Re(V,()=>e(p),t=>i(p,t)),c(k,z),ut(),M()}vt(["click","change"]);export{Jt as component};
