import{v as K,E as q,f as N}from"./DgM1AnfY.js";import{B as D}from"./B5hbs7lp.js";import{g as _,w as g,d as P}from"./CABBFY_M.js";import{a as b}from"./CBf0kXIe.js";import{l as S,I as U,s as z}from"./RjzcECkQ.js";import{c as W,a as R}from"./pejWV2dy.js";import"./CQ2dU6u5.js";import{l as B,s as j}from"./BQCnAYr2.js";function ge(n,s,...i){var t=new D(n);K(()=>{const c=s()??null;t.ensure(c,c&&(u=>c(u,...i)))},q)}let $,L;function A(n){if(typeof document>"u")return;clearTimeout($),clearTimeout(L);const s=document.createElement("style"),i=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);s.appendChild(i);const t=()=>document.head.appendChild(s),c=()=>document.head.removeChild(s);if(typeof window.getComputedStyle<"u"){t(),n(),window.getComputedStyle(s).opacity,c();return}if(typeof window.requestAnimationFrame<"u"){t(),n(),window.requestAnimationFrame(c);return}t(),$=window.setTimeout(()=>{n(),L=window.setTimeout(c,120)},120)}function k(n){return n.filter(s=>s.length>0)}const F={getItem:n=>null,setItem:(n,s)=>{}},h=typeof document<"u",Q=["dark","light","system"],H=g("mode-watcher-mode"),O=g("mode-watcher-theme"),T=Z(),G=te(),J=g(void 0),x=ee(),I=g(!0),X=g([]),Y=g([]),he=re(),ye=ne();function Z(){const n="system",s=h?localStorage:F,i=s.getItem(c());let t=E(i)?i:n;function c(){return _(H)}const{subscribe:u,set:d}=g(t,()=>{if(!h)return;const e=r=>{if(r.key!==c())return;const o=r.newValue;E(o)?d(t=o):d(t=n)};return addEventListener("storage",e),()=>removeEventListener("storage",e)});function a(e){d(t=e),s.setItem(c(),t)}return{subscribe:u,set:a}}function ee(){const n=h?localStorage:F,s=n.getItem(t());let i=s??"";function t(){return _(O)}const{subscribe:c,set:u}=g(i,()=>{if(!h)return;const a=e=>{if(e.key!==t())return;const r=e.newValue;u(r===null?i="":i=r)};return addEventListener("storage",a),()=>removeEventListener("storage",a)});function d(a){u(i=a),n.setItem(t(),i)}return{subscribe:c,set:d}}function te(){let s=!0;const{subscribe:i,set:t}=g(void 0,()=>{if(!h)return;const d=e=>{s&&t(e.matches?"light":"dark")},a=window.matchMedia("(prefers-color-scheme: light)");return a.addEventListener("change",d),()=>a.removeEventListener("change",d)});function c(){if(!h)return;const d=window.matchMedia("(prefers-color-scheme: light)");t(d.matches?"light":"dark")}function u(d){s=d}return{subscribe:i,query:c,tracking:u}}function re(){const{subscribe:n}=P([T,G,J,I,X,Y],([s,i,t,c,u,d])=>{if(!h)return;const a=s==="system"?i:s,e=k(u),r=k(d);function o(){const l=document.documentElement,f=document.querySelector('meta[name="theme-color"]');a==="light"?(e.length&&l.classList.remove(...e),r.length&&l.classList.add(...r),l.style.colorScheme="light",f&&t&&f.setAttribute("content",t.light)):(r.length&&l.classList.remove(...r),e.length&&l.classList.add(...e),l.style.colorScheme="dark",f&&t&&f.setAttribute("content",t.dark))}return c?A(o):o(),a});return{subscribe:n}}function ne(){const{subscribe:n}=P([x,I],([s,i])=>{if(!h)return;function t(){document.documentElement.setAttribute("data-theme",s)}return i?A(t):t(),s});return{subscribe:n}}function E(n){return typeof n!="string"?!1:Q.includes(n)}function we(n){T.set(n)}function be(n){x.set(n)}function ve(n){return n}function Se({defaultMode:n="system",themeColors:s,darkClassNames:i=["dark"],lightClassNames:t=[],defaultTheme:c="",modeStorageKey:u="mode-watcher-mode",themeStorageKey:d="mode-watcher-theme"}){const a=document.documentElement,e=localStorage.getItem(u)||n,r=localStorage.getItem(d)||c,o=e==="light"||e==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(o?(i.length&&a.classList.remove(...i),t.length&&a.classList.add(...t)):(t.length&&a.classList.remove(...t),i.length&&a.classList.add(...i)),a.style.colorScheme=o?"light":"dark",s){const l=document.querySelector('meta[name="theme-color"]');l&&l.setAttribute("content",e==="light"?s.light:s.dark)}r&&(a.setAttribute("data-theme",r),localStorage.setItem(d,r)),localStorage.setItem(u,e)}const C={taskReminders:!0,dailyDigest:!0,pomodoroAlerts:!0,projectUpdates:!1},se={isSupported:!1,permission:"default",isSubscribed:!1,isLoading:!1,error:null,preferences:C};function oe(){const n=g(se),{subscribe:s,set:i,update:t}=n;function c(){return typeof window>"u"?!1:"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}function u(e){const r="=".repeat((4-e.length%4)%4),o=(e+r).replace(/-/g,"+").replace(/_/g,"/"),l=window.atob(o),f=new Uint8Array(l.length);for(let p=0;p<l.length;++p)f[p]=l.charCodeAt(p);return f}async function d(){try{const e=await b.notifications.getPreferences();return t(r=>({...r,preferences:{...C,...e}})),{success:!0}}catch(e){return S.error("Failed to load notification preferences",e),{success:!1,error:e.message}}}async function a(){t(e=>({...e,isLoading:!0,error:null}));try{const e=await Notification.requestPermission();return t(r=>({...r,permission:e,isLoading:!1})),e==="granted"}catch{return t(r=>({...r,isLoading:!1,error:"Failed to request permission"})),!1}}return{subscribe:s,async initialize(){const e=c(),r=e?Notification.permission:"denied";if(t(o=>({...o,isSupported:e,permission:r})),!e)return{success:!1,error:"Push notifications not supported"};try{const l=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return t(f=>({...f,isSubscribed:!!l})),l&&await d(),{success:!0}}catch(o){return S.error("Failed to check subscription",o),{success:!1,error:o.message}}},requestPermission:a,async enablePush(){const e=_(n);if(!e.isSupported)return{success:!1,error:"Push notifications not supported"};if(e.permission!=="granted"&&!await a())return{success:!1,error:"Permission denied"};t(r=>({...r,isLoading:!0,error:null}));try{const o=(await b.notifications.getVapidKey()).publicKey;if(!o)throw new Error("VAPID key not configured on server");const l=await navigator.serviceWorker.ready,f=u(o),p=await l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:f.buffer}),w=p.getKey("p256dh"),y=p.getKey("auth");if(!w||!y)throw new Error("Failed to get subscription keys");return await b.notifications.subscribe({endpoint:p.endpoint,keys:{p256dh:btoa(String.fromCharCode(...new Uint8Array(w))),auth:btoa(String.fromCharCode(...new Uint8Array(y)))}}),t(v=>({...v,isSubscribed:!0,isLoading:!1})),{success:!0}}catch(r){return S.error("Subscription failed",r),t(o=>({...o,isLoading:!1,error:r.message||"Subscription failed"})),{success:!1,error:r.message}}},async disablePush(){t(e=>({...e,isLoading:!0,error:null}));try{const r=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return r&&(await r.unsubscribe(),await b.notifications.unsubscribe()),t(o=>({...o,isSubscribed:!1,isLoading:!1})),{success:!0}}catch(e){return t(r=>({...r,isLoading:!1,error:e.message||"Unsubscribe failed"})),{success:!1,error:e.message}}},loadPreferences:d,async updatePreferences(e){t(r=>({...r,isLoading:!0,error:null}));try{return await b.notifications.updatePreferences(e),t(r=>({...r,preferences:{...r.preferences,...e},isLoading:!1})),{success:!0}}catch(r){return t(o=>({...o,isLoading:!1,error:r.message||"Failed to update preferences"})),{success:!1,error:r.message}}},async testNotification(){try{return await b.notifications.test(),{success:!0}}catch(e){return{success:!1,error:e.message}}}}}const _e=oe(),ie=n=>n;function V(n){const s=n-1;return s*s*s+1}function M(n){const s=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return s?[parseFloat(s[1]),s[2]||"px"]:[n,"px"]}function $e(n,{delay:s=0,duration:i=400,easing:t=ie}={}){const c=+getComputedStyle(n).opacity;return{delay:s,duration:i,easing:t,css:u=>`opacity: ${u*c}`}}function Le(n,{delay:s=0,duration:i=400,easing:t=V,x:c=0,y:u=0,opacity:d=0}={}){const a=getComputedStyle(n),e=+a.opacity,r=a.transform==="none"?"":a.transform,o=e*(1-d),[l,f]=M(c),[p,w]=M(u);return{delay:s,duration:i,easing:t,css:(y,v)=>`
			transform: ${r} translate(${(1-y)*l}${f}, ${(1-y)*p}${w});
			opacity: ${e-o*v}`}}function ke(n,{delay:s=0,duration:i=400,easing:t=V,axis:c="y"}={}){const u=getComputedStyle(n),d=+u.opacity,a=c==="y"?"height":"width",e=parseFloat(u[a]),r=c==="y"?["top","bottom"]:["left","right"],o=r.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),l=parseFloat(u[`padding${o[0]}`]),f=parseFloat(u[`padding${o[1]}`]),p=parseFloat(u[`margin${o[0]}`]),w=parseFloat(u[`margin${o[1]}`]),y=parseFloat(u[`border${o[0]}Width`]),v=parseFloat(u[`border${o[1]}Width`]);return{delay:s,duration:i,easing:t,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*d};${a}: ${m*e}px;padding-${r[0]}: ${m*l}px;padding-${r[1]}: ${m*f}px;margin-${r[0]}: ${m*p}px;margin-${r[1]}: ${m*w}px;border-${r[0]}-width: ${m*y}px;border-${r[1]}-width: ${m*v}px;min-${a}: 0`}}function Ee(n,s){const i=B(s,["children","$$slots","$$events","$$legacy"]);const t=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]];U(n,j({name:"download"},()=>i,{get iconNode(){return t},children:(c,u)=>{var d=W(),a=N(d);z(a,s,"default",{}),R(c,d)},$$slots:{default:!0}}))}export{Ee as D,he as a,ye as b,G as c,ve as d,we as e,be as f,I as g,X as h,E as i,O as j,Le as k,Y as l,H as m,ge as n,_e as o,ke as p,$e as q,Se as s,J as t};
