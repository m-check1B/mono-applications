import"../chunks/DsnmJJEf.js";import{s as l,o as wt,a as kt,h as $t}from"../chunks/BFqu7qA2.js";import{p as ct,c as yt,f as ut,a as o,d as p,e as a,r as t,s,h as x,y as V,t as B,o as e,A as tt,B as gt,b as mt,w as it,x as pt,$ as bt,z as R}from"../chunks/BuVZNLKp.js";import{i as lt}from"../chunks/-3rtMcgp.js";import{C as xt,B as vt,s as Ct}from"../chunks/BFcXF936.js";import{t as ht}from"../chunks/CO_IWAlQ.js";import"../chunks/BHREJsOX.js";import{w as ot}from"../chunks/CnWtx_-E.js";import{S as dt}from"../chunks/B7_pnCb2.js";import{e as ft}from"../chunks/CXIvCxzw.js";import{p as _t}from"../chunks/DE8jeng6.js";import{B as E}from"../chunks/VXoEeBoC.js";var At=p('<div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-gray-900 dark:text-white">Live Calls</h2> <!></div>'),Nt=gt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-9.9a9 9 0 000 12.728"></path></svg>'),St=gt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>'),Mt=gt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"></path></svg>'),Tt=p('<div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow"><div class="flex items-center justify-between mb-3"><div><div class="text-sm font-medium text-gray-900 dark:text-white"> </div> <div class="text-xs text-gray-600 dark:text-gray-400"> </div></div> <!></div> <div class="bg-gray-50 dark:bg-gray-700/50 rounded p-3 mb-3"><div class="flex items-center justify-between mb-2"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">Customer</span> <!></div> <div class="text-sm font-semibold text-gray-900 dark:text-white"> </div> <div class="text-xs text-gray-600 dark:text-gray-400"> </div></div> <div class="flex items-center justify-between"><div class="flex items-center gap-2"><svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-mono font-semibold text-gray-900 dark:text-white"> </span></div> <div class="flex gap-1"><!> <!> <!></div></div></div>'),Pt=p('<div class="grid grid-cols-1 xl:grid-cols-2 gap-4"></div>'),Dt=p('<div class="text-center py-12"><svg class="w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg> <p class="text-gray-600 dark:text-gray-400">No active calls</p> <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">Calls will appear here when agents are on calls</p></div>');function jt(rt,U){ct(U,!0);let C=_t(U,"calls",19,()=>[]);const P=v=>{const _=Math.floor(v/60),w=v%60;return`${_}:${w.toString().padStart(2,"0")}`},at=v=>{switch(v){case"positive":return"success";case"negative":return"danger";default:return"gray"}},f=v=>{console.log("Listen to call",v)},A=v=>{console.log("Whisper to agent",v)},N=v=>{console.log("Barge into call",v)};xt(rt,{header:_=>{var w=At(),L=s(a(w),2);E(L,{variant:"success",children:(Q,S)=>{x();var k=V();B(()=>l(k,`${C().length??""} active`)),o(Q,k)},$$slots:{default:!0}}),t(w),o(_,w)},children:(_,w)=>{var L=yt(),Q=ut(L);{var S=$=>{var d=Pt();ft(d,21,C,i=>i.id,(i,r)=>{var c=Tt(),u=a(c),q=a(u),z=a(q),st=a(z,!0);t(z);var K=s(z,2),X=a(K);t(K),t(q);var et=s(q,2);{let n=tt(()=>e(r).status==="active"?"success":"warning");E(et,{get variant(){return e(n)},children:(T,y)=>{x();var J=V();B(()=>l(J,e(r).status==="active"?"ACTIVE":"ON HOLD")),o(T,J)},$$slots:{default:!0}})}t(u);var G=s(u,2),D=a(G),Y=s(a(D),2);{let n=tt(()=>at(e(r).sentiment));E(Y,{get variant(){return e(n)},children:(T,y)=>{x();var J=V();B(()=>l(J,e(r).sentiment==="positive"?"ðŸ˜Š":e(r).sentiment==="negative"?"ðŸ˜ž":"ðŸ˜")),o(T,J)},$$slots:{default:!0}})}t(D);var F=s(D,2),Z=a(F,!0);t(F);var g=s(F,2),I=a(g,!0);t(g),t(G);var j=s(G,2),b=a(j),W=s(a(b),2),h=a(W,!0);t(W),t(b);var m=s(b,2),H=a(m);vt(H,{variant:"secondary",size:"sm",onclick:()=>f(e(r).id),title:"Listen to call",children:(n,T)=>{var y=Nt();o(n,y)},$$slots:{default:!0}});var M=s(H,2);vt(M,{variant:"secondary",size:"sm",onclick:()=>A(e(r).id),title:"Whisper to agent",children:(n,T)=>{var y=St();o(n,y)},$$slots:{default:!0}});var O=s(M,2);vt(O,{variant:"primary",size:"sm",onclick:()=>N(e(r).id),title:"Join call",children:(n,T)=>{var y=Mt();o(n,y)},$$slots:{default:!0}}),t(m),t(j),t(c),B(n=>{l(st,e(r).agentName),l(X,`Agent ID: ${e(r).agentId??""}`),l(Z,e(r).customerName),l(I,e(r).customerPhone),l(h,n)},[()=>P(e(r).duration)]),o(i,c)}),t(d),o($,d)},k=$=>{var d=Dt();o($,d)};lt(Q,$=>{C().length>0?$(S):$(k,!1)})}o(_,L)},$$slots:{header:!0,default:!0}}),mt()}var Bt=p('<h2 class="text-lg font-semibold text-gray-900 dark:text-white">Team Status</h2>'),Lt=p('<div class="bg-primary-50 dark:bg-primary-900/20 rounded p-2 mb-3"><div class="flex items-center justify-between"><div class="text-xs text-gray-700 dark:text-gray-300"><div class="font-medium"> </div></div> <div class="text-xs font-mono font-semibold text-primary-600 dark:text-primary-400"> </div></div></div>'),zt=p('<div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow"><div class="flex items-start justify-between mb-3"><div class="flex-1"><div class="font-semibold text-gray-900 dark:text-white"> </div> <div class="text-xs text-gray-600 dark:text-gray-400"> </div></div> <!></div> <!> <div class="grid grid-cols-3 gap-2"><div class="text-center"><div class="text-lg font-bold text-gray-900 dark:text-white"> </div> <div class="text-xs text-gray-600 dark:text-gray-400">Calls</div></div> <div class="text-center"><div class="text-lg font-bold text-gray-900 dark:text-white"> </div> <div class="text-xs text-gray-600 dark:text-gray-400">Avg</div></div> <div class="text-center"><div class="text-lg font-bold text-gray-900 dark:text-white"> </div> <div class="text-xs text-gray-600 dark:text-gray-400">CSAT</div></div></div></div>'),Gt=p('<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"></div>'),It=p('<div class="text-center py-12"><svg class="w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <p class="text-gray-600 dark:text-gray-400">No agents found</p> <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">Agent status will appear here</p></div>');function Wt(rt,U){ct(U,!0);let C=_t(U,"agents",19,()=>[]);const P=A=>{switch(A){case"available":return"success";case"on-call":return"primary";case"break":return"warning";case"offline":return"gray";default:return"gray"}},at=A=>{switch(A){case"available":return"ðŸŸ¢";case"on-call":return"ðŸ“ž";case"break":return"â˜•";case"offline":return"âš«";default:return"âšª"}},f=A=>`${Math.floor(A/60)}:${(A%60).toString().padStart(2,"0")}`;xt(rt,{header:N=>{var v=Bt();o(N,v)},children:(N,v)=>{var _=yt(),w=ut(_);{var L=S=>{var k=Gt();ft(k,21,C,$=>$.id,($,d)=>{var i=zt(),r=a(i),c=a(r),u=a(c),q=a(u,!0);t(u);var z=s(u,2),st=a(z,!0);t(z),t(c);var K=s(c,2);{let h=tt(()=>P(e(d).status));E(K,{get variant(){return e(h)},children:(m,H)=>{x();var M=V();B((O,n)=>l(M,`${O??""} ${n??""}`),[()=>at(e(d).status),()=>e(d).status.toUpperCase()]),o(m,M)},$$slots:{default:!0}})}t(r);var X=s(r,2);{var et=h=>{var m=Lt(),H=a(m),M=a(H),O=a(M),n=a(O,!0);t(O),t(M);var T=s(M,2),y=a(T,!0);t(T),t(H),t(m),B(J=>{l(n,e(d).currentCall.customerName),l(y,J)},[()=>f(e(d).currentCall.duration)]),o(h,m)};lt(X,h=>{e(d).currentCall&&h(et)})}var G=s(X,2),D=a(G),Y=a(D),F=a(Y,!0);t(Y),x(2),t(D);var Z=s(D,2),g=a(Z),I=a(g,!0);t(g),x(2),t(Z);var j=s(Z,2),b=a(j),W=a(b);t(b),x(2),t(j),t(G),t(i),B(h=>{l(q,e(d).name),l(st,e(d).email),l(F,e(d).stats.callsToday),l(I,h),l(W,`${e(d).stats.satisfaction??""}%`)},[()=>f(e(d).stats.avgDuration)]),o($,i)}),t(k),o(S,k)},Q=S=>{var k=It();o(S,k)};lt(w,S=>{C().length>0?S(L):S(Q,!1)})}o(N,_)},$$slots:{header:!0,default:!0}}),mt()}var Ht=p('<div class="flex justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),Ot=p('<div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-gray-900 dark:text-white">Call Queue</h2> <!></div>'),Jt=p('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700"><thead><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Customer</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Wait Time</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Priority</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Campaign</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"><tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"><div>James Brown</div> <div class="text-xs text-gray-500">+1 (555) 111-2222</div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400">1:23</td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400">Sales Q4</td></tr><tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"><div>Lisa Anderson</div> <div class="text-xs text-gray-500">+1 (555) 333-4444</div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400">0:45</td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400">Support</td></tr></tbody></table></div>'),Rt=p('<div class="grid grid-cols-1 md:grid-cols-4 gap-6"><!> <!> <!> <!></div> <!> <!> <!> <div class="fixed bottom-4 right-4"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg px-4 py-2 flex items-center space-x-2 border border-gray-200 dark:border-gray-700"><div></div> <span class="text-sm font-medium text-gray-700 dark:text-gray-300"> </span></div></div>',1),Vt=p('<div class="space-y-6"><div class="flex justify-between items-center"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Supervisor Cockpit</h1> <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">Real-time monitoring and team management</p></div> <div class="flex items-center gap-3"><!> <!></div></div> <!></div>');function ra(rt,U){ct(U,!0);let C=it(!0),P=it(null),at=it(null),f=it(pt([]));const A=async()=>{try{R(C,!0),R(at,null);const i=await ht.telephony.getAllActiveCalls.query();R(f,i.map(r=>({id:r.id,agentName:r.agent?`${r.agent.firstName} ${r.agent.lastName}`:"Unknown",agentId:r.agent?.id||"N/A",customerName:"Customer",customerPhone:r.fromNumber||r.toNumber,duration:r.duration||0,sentiment:"neutral",status:r.status==="IN_PROGRESS"?"active":r.status==="ON_HOLD"?"on-hold":"active"})),!0),console.log("âœ… Loaded live calls:",e(f).length)}catch(i){console.error("Failed to load live calls:",i),R(at,i.message,!0),R(f,[{id:"1",agentName:"John Doe",agentId:"AGT001",customerName:"Alice Johnson",customerPhone:"+1 (555) 234-5678",duration:187,sentiment:"positive",status:"active"},{id:"2",agentName:"Sarah Smith",agentId:"AGT002",customerName:"Bob Williams",customerPhone:"+1 (555) 876-5432",duration:95,sentiment:"neutral",status:"active"}],!0)}finally{R(C,!1)}};let N=pt([{id:"AGT001",name:"John Doe",email:"john.doe@company.com",status:"on-call",currentCall:{customerName:"Alice Johnson",duration:187},stats:{callsToday:18,avgDuration:245,satisfaction:96}},{id:"AGT002",name:"Sarah Smith",email:"sarah.smith@company.com",status:"on-call",currentCall:{customerName:"Bob Williams",duration:95},stats:{callsToday:22,avgDuration:198,satisfaction:94}},{id:"AGT003",name:"Mike Chen",email:"mike.chen@company.com",status:"on-call",currentCall:{customerName:"Carol Martinez",duration:240},stats:{callsToday:15,avgDuration:312,satisfaction:89}},{id:"AGT004",name:"Emma Davis",email:"emma.davis@company.com",status:"available",stats:{callsToday:20,avgDuration:220,satisfaction:97}},{id:"AGT005",name:"David Wilson",email:"david.wilson@company.com",status:"break",stats:{callsToday:17,avgDuration:265,satisfaction:92}}]);async function v(){try{await A();const i=await ht.supervisor.getOverview.query();R(P,i,!0)}catch(i){console.error("Failed to load supervisor dashboard:",i),R(P,{stats:{activeCalls:e(f).length,availableAgents:N.filter(r=>r.status==="available").length,avgWaitTime:32,satisfaction:94}},!0)}finally{R(C,!1)}}wt(async()=>{await v();const i=setInterval(v,15e3);return()=>clearInterval(i)}),kt(()=>{ot.disconnect()});var _=Vt();$t(i=>{bt.title="Supervisor Dashboard - Voice by Kraliki"});var w=a(_),L=s(a(w),2),Q=a(L);E(Q,{variant:"success",class:"text-sm",children:(i,r)=>{x();var c=V();B(u=>l(c,`ðŸŸ¢ ${u??""} Available`),[()=>N.filter(u=>u.status==="available").length]),o(i,c)},$$slots:{default:!0}});var S=s(Q,2);E(S,{variant:"primary",class:"text-sm",children:(i,r)=>{x();var c=V();B(()=>l(c,`ðŸ“ž ${e(f).length??""} Active Calls`)),o(i,c)},$$slots:{default:!0}}),t(L),t(w);var k=s(w,2);{var $=i=>{var r=Ht();o(i,r)},d=i=>{var r=Rt(),c=ut(r),u=a(c);{let g=tt(()=>e(P)?.stats?.activeCalls||e(f).length);dt(u,{title:"Active Calls",get value(){return e(g)},subtitle:"Calls in progress"})}var q=s(u,2);{let g=tt(()=>e(P)?.stats?.availableAgents||N.filter(I=>I.status==="available").length);dt(q,{title:"Available Agents",get value(){return e(g)},subtitle:"Ready to take calls"})}var z=s(q,2);{let g=tt(()=>`${e(P)?.stats?.avgWaitTime||32}s`);dt(z,{title:"Avg Wait Time",get value(){return e(g)},subtitle:"Queue wait time"})}var st=s(z,2);{let g=tt(()=>`${e(P)?.stats?.satisfaction||94}%`);dt(st,{title:"Team CSAT",get value(){return e(g)},subtitle:"Customer satisfaction"})}t(c);var K=s(c,2);jt(K,{get calls(){return e(f)}});var X=s(K,2);Wt(X,{get agents(){return N}});var et=s(X,2);xt(et,{header:I=>{var j=Ot(),b=s(a(j),2);E(b,{variant:"primary",children:(W,h)=>{x();var m=V("5 waiting");o(W,m)},$$slots:{default:!0}}),t(j),o(I,j)},children:(I,j)=>{var b=Jt(),W=a(b),h=s(a(W)),m=a(h),H=s(a(m),2),M=a(H);E(M,{variant:"danger",children:(y,J)=>{x();var nt=V("HIGH");o(y,nt)},$$slots:{default:!0}}),t(H),x(),t(m);var O=s(m),n=s(a(O),2),T=a(n);E(T,{variant:"primary",children:(y,J)=>{x();var nt=V("NORMAL");o(y,nt)},$$slots:{default:!0}}),t(n),x(),t(O),t(h),t(W),t(b),o(I,b)},$$slots:{header:!0,default:!0}});var G=s(et,2),D=a(G),Y=a(D),F=s(Y,2),Z=a(F,!0);t(F),t(D),t(G),B(()=>{Ct(Y,1,`w-2 h-2 rounded-full ${ot.connected?"bg-green-500 animate-pulse":"bg-red-500"}`),l(Z,ot.connected?"Live Monitoring":ot.reconnecting?"Reconnecting...":"Disconnected")}),o(i,r)};lt(k,i=>{e(C)?i($):i(d,!1)})}t(_),o(rt,_),mt()}export{ra as component};
