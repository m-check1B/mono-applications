import"../chunks/DsnmJJEf.js";import{s as h,d as Qe,o as Fe,a as Ye,h as Je}from"../chunks/BFqu7qA2.js";import{w as J,x as ie,o as a,z as j,p as Pe,j as ke,c as De,f as Ce,a as i,d as w,e as t,r as e,h as T,s,B as pe,t as O,A as ve,b as Ie,y as X,$ as Ke}from"../chunks/BuVZNLKp.js";import{i as ae}from"../chunks/-3rtMcgp.js";import{e as Ae,i as Xe}from"../chunks/CXIvCxzw.js";import{C as Ve,B as le,s as Ue}from"../chunks/BFcXF936.js";import{t as m,e as qe,s as Le,q as K,f as R,a as we}from"../chunks/BIGR8jnV.js";import{p as Me,s as Ze}from"../chunks/DE8jeng6.js";import{t as $e}from"../chunks/CO_IWAlQ.js";import{a as et}from"../chunks/BJWdoB8n.js";import{w as _e}from"../chunks/CnWtx_-E.js";import{s as Oe,S as tt}from"../chunks/B7_pnCb2.js";import{B as oe}from"../chunks/VXoEeBoC.js";import{b as at}from"../chunks/JKg-keVi.js";class rt{#e=J(ie([]));get activeCalls(){return a(this.#e)}set activeCalls(l){j(this.#e,l,!0)}#t=J(ie([]));get queuedCalls(){return a(this.#t)}set queuedCalls(l){j(this.#t,l,!0)}constructor(){_e.onMessage(l=>{l.type==="call:created"?this.addCall(l.call):l.type==="call:updated"?this.updateCall(l.call):l.type==="call:ended"&&this.removeCall(l.callId)})}addCall(l){l.status==="QUEUED"?this.queuedCalls=[...this.queuedCalls,l]:(l.status==="IN_PROGRESS"||l.status==="RINGING")&&(this.activeCalls=[...this.activeCalls,l])}updateCall(l){this.activeCalls=this.activeCalls.filter(r=>r.id!==l.id),this.queuedCalls=this.queuedCalls.filter(r=>r.id!==l.id),this.addCall(l)}removeCall(l){this.activeCalls=this.activeCalls.filter(r=>r.id!==l),this.queuedCalls=this.queuedCalls.filter(r=>r.id!==l)}setActiveCalls(l){this.activeCalls=l.filter(r=>r.status==="IN_PROGRESS"||r.status==="RINGING")}setQueuedCalls(l){this.queuedCalls=l.filter(r=>r.status==="QUEUED")}}new rt;var st=w("<div><!></div>"),it=w('<div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-gray-900 dark:text-white">Active Call</h2> <!></div>'),lt=pe('<svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> ',1),ot=pe('<svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg> Transfer',1),nt=pe('<svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M5 3a2 2 0 00-2 2v1c0 8.284 6.716 15 15 15h1a2 2 0 002-2v-3.28a1 1 0 00-.684-.948l-4.493-1.498a1 1 0 00-1.21.502l-1.13 2.257a11.042 11.042 0 01-5.516-5.517l2.257-1.128a1 1 0 00.502-1.21L9.228 3.683A1 1 0 008.279 3H5z"></path></svg> Hang Up',1),dt=pe('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg> Mute',1),vt=pe('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> Notes',1),ct=pe('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> History',1),ut=w(`<div class="space-y-6"><div class="text-center"><div class="text-5xl font-mono font-bold text-gray-900 dark:text-white tabular-nums svelte-15b407x"> </div> <div class="text-sm text-gray-600 dark:text-gray-400 mt-2">Call Duration</div></div> <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2"><div class="flex items-center justify-between"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">Customer</span> <!></div> <div class="text-lg font-semibold text-gray-900 dark:text-white"> </div> <div class="text-sm text-gray-600 dark:text-gray-400"> </div></div> <div class="grid grid-cols-2 gap-4"><div><div class="flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 mb-2"><div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg> <span>Microphone</span></div> <span> </span></div> <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 overflow-hidden"><div class="h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-300 ease-out"></div></div></div> <div><div class="flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 mb-2"><div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg> <span>Headset</span></div> <span> </span></div> <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 overflow-hidden"><div class="h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300 ease-out"></div></div></div></div> <div class="bg-gray-900 dark:bg-black rounded-lg p-4 h-32 overflow-y-auto"><div class="space-y-2 text-sm"><div><span class="font-semibold text-blue-400">CUSTOMER:</span> <span class="ml-2 text-gray-300">Hi, I'm having trouble with my billing account.</span></div> <div><span class="font-semibold text-green-400">AGENT:</span> <span class="ml-2 text-gray-300">I'd be happy to help you with that. Can you provide your account number?</span></div></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div> <div class="flex gap-2"><!> <!> <!></div></div>`),pt=w('<div class="text-center py-12"><div><svg class="w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></div> <p class="text-gray-600 dark:text-gray-400">No active call</p> <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">Waiting for incoming calls...</p></div>');function gt(re,l){Pe(l,!0);let r=Me(l,"call",15,null),A=J(0),b=null,q=J(75),M=J(65),v=J(!1),k=null;const P=o=>{const c=Math.floor(o/60),u=o%60;return`${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},V=()=>{b&&clearInterval(b),b=setInterval(()=>{j(A,a(A)+1)},1e3)},G=()=>{b&&(clearInterval(b),b=null)},H=()=>{k&&clearInterval(k),k=setInterval(()=>{j(q,Math.floor(Math.random()*30)+60),j(M,Math.floor(Math.random()*25)+55)},500)},x=()=>{k&&(clearInterval(k),k=null)};ke(()=>(r()?.status==="active"?(j(A,r().duration,!0),V(),H()):(G(),x()),()=>{G(),x()}));const $=async()=>{if(!(!r()||a(v))){j(v,!0);try{r().status==="on-hold"?r({...r(),status:"active"}):r({...r(),status:"on-hold"}),console.log("Hold/Resume call",r().providerCallId||r().id)}catch(o){console.error("Failed to hold/resume call:",o)}finally{j(v,!1)}}},Q=async()=>{if(!r()||a(v))return;const o=prompt("Enter phone number to transfer to:");if(o){j(v,!0);try{const c=r().providerCallId||r().id;await $e.telephony.transferCall.mutate({callId:c,to:o}),console.log("Call transferred successfully"),r(null),typeof window<"u"&&window.dispatchEvent(new CustomEvent("call-ended",{detail:{requiresWrapUp:!0}}))}catch(c){console.error("Failed to transfer call:",c),alert(`Transfer failed: ${c.message}`)}finally{j(v,!1)}}},z=async()=>{if(!(!r()||a(v))){j(v,!0);try{const o=r().providerCallId||r().id;await $e.telephony.hangupCall.mutate({callId:o}),console.log("Call ended successfully"),r(null),typeof window<"u"&&window.dispatchEvent(new CustomEvent("call-ended",{detail:{requiresWrapUp:!0}}))}catch(o){console.error("Failed to hang up call:",o),r(null),typeof window<"u"&&window.dispatchEvent(new CustomEvent("call-ended",{detail:{requiresWrapUp:!0}}))}finally{j(v,!1)}}},d=()=>{console.log("Mute call",r()?.providerCallId||r()?.id)};Ve(re,{header:c=>{var u=it(),f=s(t(u),2);{var D=C=>{var S=st(),y=t(S);{let g=ve(()=>r().status==="active"?"success":r().status==="on-hold"?"warning":"primary");oe(y,{get variant(){return a(g)},children:(B,L)=>{T();var I=X();O(E=>h(I,E),[()=>r().status.toUpperCase()]),i(B,I)},$$slots:{default:!0}})}e(S),m(1,S,()=>Le,()=>({duration:300,easing:qe})),i(C,S)};ae(f,C=>{r()&&C(D)})}e(u),i(c,u)},children:(c,u)=>{var f=De(),D=Ce(f);{var C=y=>{var g=ut(),B=t(g),L=t(B),I=t(L,!0);e(L),T(2),e(B);var E=s(B,2),Z=t(E),F=s(t(Z),2);{var U=N=>{{let de=ve(()=>r().sentiment==="positive"?"success":r().sentiment==="negative"?"danger":"gray");oe(N,{get variant(){return a(de)},children:(te,He)=>{T();var Te=X();O(()=>h(Te,`${r().sentiment==="positive"?"ðŸ˜Š":r().sentiment==="negative"?"ðŸ˜ž":"ðŸ˜"} ${r().sentiment??""}`)),i(te,Te)},$$slots:{default:!0}})}};ae(F,N=>{r().sentiment&&N(U)})}e(Z);var W=s(Z,2),ee=t(W,!0);e(W);var se=s(W,2),be=t(se,!0);e(se),e(E);var ge=s(E,2),n=t(ge),_=t(n),Y=s(t(_),2),p=t(Y);e(Y),e(_);var me=s(_,2),he=t(me);e(me),e(n);var je=s(n,2),ce=t(je),Se=s(t(ce),2),Be=t(Se);e(Se),e(ce);var ue=s(ce,2),Ne=t(ue);e(ue),e(je),e(ge);var fe=s(ge,2),xe=s(fe,2),ye=t(xe);{let N=ve(()=>r().status==="on-hold"?"primary":"secondary");le(ye,{get variant(){return a(N)},size:"lg",onclick:$,class:"flex-col h-20",children:(de,te)=>{var He=lt(),Te=s(Ce(He),1,!0);O(()=>h(Te,r().status==="on-hold"?"Resume":"Hold")),i(de,He)},$$slots:{default:!0}})}var ze=s(ye,2);le(ze,{variant:"secondary",size:"lg",onclick:Q,class:"flex-col h-20",children:(N,de)=>{var te=ot();T(),i(N,te)},$$slots:{default:!0}});var Re=s(ze,2);le(Re,{variant:"danger",size:"lg",onclick:z,class:"flex-col h-20",children:(N,de)=>{var te=nt();T(),i(N,te)},$$slots:{default:!0}}),e(xe);var ne=s(xe,2),Ee=t(ne);le(Ee,{variant:"secondary",size:"sm",class:"flex-1",onclick:d,children:(N,de)=>{var te=dt();T(),i(N,te)},$$slots:{default:!0}});var We=s(Ee,2);le(We,{variant:"secondary",size:"sm",class:"flex-1",children:(N,de)=>{var te=vt();T(),i(N,te)},$$slots:{default:!0}});var Ge=s(We,2);le(Ge,{variant:"secondary",size:"sm",class:"flex-1",children:(N,de)=>{var te=ct();T(),i(N,te)},$$slots:{default:!0}}),e(ne),e(g),O(N=>{h(I,N),h(ee,r().customerName),h(be,r().customerPhone),h(p,`${a(q)??""}%`),Oe(he,`width: ${a(q)}%`),h(Be,`${a(M)??""}%`),Oe(Ne,`width: ${a(M)}%`)},[()=>P(a(A))]),m(1,B,()=>Le,()=>({duration:500,easing:qe,delay:100})),m(1,E,()=>R,()=>({x:-20,duration:400,easing:K,delay:200})),m(1,ge,()=>R,()=>({y:20,duration:400,easing:K,delay:300})),m(1,fe,()=>R,()=>({y:20,duration:400,easing:K,delay:400})),m(1,xe,()=>R,()=>({y:20,duration:400,easing:K,delay:500})),m(1,ne,()=>R,()=>({y:20,duration:400,easing:K,delay:600})),m(1,g,()=>R,()=>({y:20,duration:400,easing:K})),m(2,g,()=>we,()=>({duration:200})),i(y,g)},S=y=>{var g=pt(),B=t(g),L=s(B,2),I=s(L,2);e(g),m(1,B,()=>Le,()=>({duration:600,easing:qe})),m(1,L,()=>R,()=>({y:10,duration:400,delay:200})),m(1,I,()=>R,()=>({y:10,duration:400,delay:300})),m(1,g,()=>we,()=>({duration:300})),i(y,g)};ae(D,y=>{r()?y(C):y(S,!1)})}i(c,f)},$$slots:{header:!0,default:!0}}),Ie()}var mt=w('<div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-gray-900 dark:text-white">Call Queue</h2> <!></div>'),ht=w('<div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> <span> </span></div>'),ft=pe('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg> Answer',1),xt=w('<div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"><div class="flex items-center justify-between mb-2"><div><div class="font-semibold text-gray-900 dark:text-white"> </div> <div class="text-sm text-gray-600 dark:text-gray-400"> </div></div> <!></div> <div class="flex items-center justify-between"><div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400"><div class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <!></div> <!></div></div>'),yt=w('<div class="space-y-3"></div>'),_t=w('<div class="text-center py-8"><svg class="w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg> <p class="text-gray-600 dark:text-gray-400">Queue is empty</p> <p class="text-sm text-gray-500 dark:text-gray-500 mt-1">No calls waiting</p></div>');function wt(re,l){Pe(l,!0);let r=Me(l,"calls",19,()=>[]);const A=M=>M<60?`${M}s`:`${Math.floor(M/60)}m ${M%60}s`,b=M=>{switch(M){case"high":return"danger";case"normal":return"primary";case"low":return"gray";default:return"gray"}},q=M=>{console.log("Answer call",M)};Ve(re,{header:v=>{var k=mt(),P=s(t(k),2);oe(P,{variant:"primary",children:(V,G)=>{T();var H=X();O(()=>h(H,`${r().length??""} waiting`)),i(V,H)},$$slots:{default:!0}}),e(k),i(v,k)},children:(v,k)=>{var P=De(),V=Ce(P);{var G=x=>{var $=yt();Ae($,21,r,Q=>Q.id,(Q,z)=>{var d=xt(),o=t(d),c=t(o),u=t(c),f=t(u,!0);e(u);var D=s(u,2),C=t(D,!0);e(D),e(c);var S=s(c,2);{let U=ve(()=>b(a(z).priority));oe(S,{get variant(){return a(U)},children:(W,ee)=>{T();var se=X();O(be=>h(se,be),[()=>a(z).priority.toUpperCase()]),i(W,se)},$$slots:{default:!0}})}e(o);var y=s(o,2),g=t(y),B=t(g),L=s(t(B),2),I=t(L,!0);e(L),e(B);var E=s(B,2);{var Z=U=>{var W=ht(),ee=s(t(W),2),se=t(ee,!0);e(ee),e(W),O(()=>h(se,a(z).campaignName)),i(U,W)};ae(E,U=>{a(z).campaignName&&U(Z)})}e(g);var F=s(g,2);le(F,{variant:"success",size:"sm",onclick:()=>q(a(z).id),children:(U,W)=>{var ee=ft();T(),i(U,ee)},$$slots:{default:!0}}),e(y),e(d),O(U=>{h(f,a(z).customerName),h(C,a(z).customerPhone),h(I,U)},[()=>A(a(z).waitTime)]),i(Q,d)}),e($),i(x,$)},H=x=>{var $=_t();i(x,$)};ae(V,x=>{r().length>0?x(G):x(H,!1)})}i(v,P)},$$slots:{header:!0,default:!0}}),Ie()}var bt=w('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary-600 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg> <h2 class="text-lg font-semibold text-gray-900 dark:text-white">AI Assistant</h2></div> <div class="flex items-center gap-2"><!></div></div>'),kt=w('<div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600 hover:border-primary-500 transition-all duration-300"><div class="flex items-start justify-between mb-2"><div class="flex items-center gap-2"><span class="text-sm font-medium text-gray-900 dark:text-white"> </span> <!></div> <!></div> <p class="text-sm text-gray-600 dark:text-gray-400 mb-2"> </p></div>'),$t=w('<div><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Suggested Responses</h3> <div class="space-y-2"></div></div>'),Ct=(re,l,r)=>l(a(r)),At=w('<button class="w-full text-left bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 hover:border-primary-500 transition-all duration-300"><div class="flex items-start justify-between mb-1"><span class="text-sm font-medium text-gray-900 dark:text-white"> </span> <!></div> <p class="text-xs text-gray-600 dark:text-gray-400"> </p></button>'),Mt=w('<div><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Related Articles</h3> <div class="space-y-2"></div></div>'),Pt=w('<div class="text-center py-8"><div><svg class="w-12 h-12 mx-auto text-gray-300 dark:text-gray-600 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <p class="text-sm text-gray-600 dark:text-gray-400">AI suggestions will appear here</p> <p class="text-xs text-gray-500 dark:text-gray-500 mt-1">Based on the conversation context</p></div>'),It=w('<div class="space-y-4"><!> <!> <!></div>');function jt(re,l){Pe(l,!0);let r=Me(l,"suggestions",19,()=>[]),A=Me(l,"articles",19,()=>[]);const b=v=>v>=.8?"success":v>=.6?"warning":"gray",q=v=>{console.log("Using suggestion",v.id)},M=v=>{console.log("View article",v.id)};Ve(re,{header:k=>{var P=bt(),V=s(t(P),2),G=t(V);{var H=$=>{oe($,{variant:"success",class:"animate-pulse",children:(Q,z)=>{T();var d=X("ðŸ¤– AI ACTIVE");i(Q,d)},$$slots:{default:!0}})},x=$=>{oe($,{variant:"gray",children:(Q,z)=>{T();var d=X("AI READY");i(Q,d)},$$slots:{default:!0}})};ae(G,$=>{r().length>0?$(H):$(x,!1)})}e(V),e(P),i(k,P)},children:(k,P)=>{var V=It(),G=t(V);{var H=d=>{var o=$t(),c=s(t(o),2);Ae(c,23,r,u=>u.id,(u,f,D)=>{var C=kt(),S=t(C),y=t(S),g=t(y),B=t(g,!0);e(g);var L=s(g,2);{let F=ve(()=>b(a(f).confidence));oe(L,{get variant(){return a(F)},class:"text-xs",children:(U,W)=>{T();var ee=X();O(se=>h(ee,`${se??""}%`),[()=>Math.round(a(f).confidence*100)]),i(U,ee)},$$slots:{default:!0}})}e(y);var I=s(y,2);le(I,{variant:"secondary",size:"sm",onclick:()=>q(a(f)),children:(F,U)=>{T();var W=X("Use");i(F,W)},$$slots:{default:!0}}),e(S);var E=s(S,2),Z=t(E,!0);e(E),e(C),O(()=>{h(B,a(f).title),h(Z,a(f).content)}),m(1,C,()=>R,()=>({x:20,duration:400,delay:a(D)*100,easing:K})),i(u,C)}),e(c),e(o),m(1,o,()=>we,()=>({duration:300})),i(d,o)};ae(G,d=>{r().length>0&&d(H)})}var x=s(G,2);{var $=d=>{var o=Mt(),c=s(t(o),2);Ae(c,23,A,u=>u.id,(u,f,D)=>{var C=At();C.__click=[Ct,M,f];var S=t(C),y=t(S),g=t(y,!0);e(y);var B=s(y,2);oe(B,{variant:"primary",class:"text-xs ml-2",children:(E,Z)=>{T();var F=X();O(U=>h(F,`${U??""}%`),[()=>Math.round(a(f).relevance*100)]),i(E,F)},$$slots:{default:!0}}),e(S);var L=s(S,2),I=t(L,!0);e(L),e(C),O(()=>{h(g,a(f).title),h(I,a(f).summary)}),m(1,C,()=>R,()=>({x:20,duration:400,delay:200+a(D)*100,easing:K})),i(u,C)}),e(c),e(o),m(1,o,()=>we,()=>({duration:300,delay:200})),i(d,o)};ae(x,d=>{A().length>0&&d($)})}var Q=s(x,2);{var z=d=>{var o=Pt(),c=t(o),u=s(c,2),f=s(u,2);e(o),m(1,c,()=>Le,()=>({duration:600,easing:qe})),m(1,u,()=>R,()=>({y:10,duration:400,delay:200})),m(1,f,()=>R,()=>({y:10,duration:400,delay:300})),m(1,o,()=>we,()=>({duration:300})),i(d,o)};ae(Q,d=>{r().length===0&&A().length===0&&d(z)})}e(V),i(k,V)},$$slots:{header:!0,default:!0}}),Ie()}Qe(["click"]);var St=w('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg> <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Live Transcription</h2></div> <!></div>'),Bt=w('<span class="text-xs"> </span>'),zt=w('<div><div><div class="flex items-center gap-2 mb-1"><span class="text-xs font-semibold uppercase tracking-wide"> </span> <!> <span class="text-xs text-gray-500 dark:text-gray-400 ml-auto"> </span></div> <p class="text-sm"> </p></div></div>'),Et=w('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg> <p class="text-gray-600 dark:text-gray-400">Transcription will appear here</p> <p class="text-sm text-gray-500 dark:text-gray-500 mt-1">Real-time speech-to-text</p></div>'),Tt=w('<div class="space-y-3 max-h-96 overflow-y-auto pr-2 custom-scrollbar svelte-1w7y6cj"><!></div>');function qt(re,l){Pe(l,!0);let r=Me(l,"entries",19,()=>[]),A;const b=M=>M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),q=M=>{switch(M){case"positive":return"ðŸ˜Š";case"negative":return"ðŸ˜ž";case"neutral":return"ðŸ˜";default:return""}};ke(()=>{A&&r().length>0&&(A.scrollTop=A.scrollHeight)}),Ve(re,{header:v=>{var k=St(),P=s(t(k),2);oe(P,{variant:"success",class:"animate-pulse",children:(V,G)=>{T();var H=X("RECORDING");i(V,H)},$$slots:{default:!0}}),e(k),i(v,k)},children:(v,k)=>{var P=Tt(),V=t(P);{var G=x=>{var $=De(),Q=Ce($);Ae(Q,17,r,z=>z.id,(z,d)=>{var o=zt(),c=t(o),u=t(c),f=t(u),D=t(f,!0);e(f);var C=s(f,2);{var S=I=>{var E=Bt(),Z=t(E,!0);e(E),O(F=>h(Z,F),[()=>q(a(d).sentiment)]),i(I,E)};ae(C,I=>{a(d).sentiment&&I(S)})}var y=s(C,2),g=t(y,!0);e(y),e(u);var B=s(u,2),L=t(B,!0);e(B),e(c),e(o),O(I=>{Ue(o,1,`flex ${a(d).speaker==="agent"?"justify-end":"justify-start"}`,"svelte-1w7y6cj"),Ue(c,1,`max-w-[80%] rounded-lg p-3 ${a(d).speaker==="agent"?"bg-primary-100 dark:bg-primary-900/30 text-gray-900 dark:text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"}`,"svelte-1w7y6cj"),h(D,a(d).speaker==="agent"?"You":"Customer"),h(g,I),h(L,a(d).text)},[()=>b(a(d).timestamp)]),i(z,o)}),i(x,$)},H=x=>{var $=Et();i(x,$)};ae(V,x=>{r().length>0?x(G):x(H,!1)})}e(P),at(P,x=>A=x,()=>A),i(v,P)},$$slots:{header:!0,default:!0}}),Ie()}var Lt=w('<div class="flex justify-center items-center py-24"><div class="relative"><div class="w-16 h-16 border-4 border-primary-500/30 border-t-primary-500 rounded-full animate-spin"></div> <div class="absolute inset-0 w-16 h-16 border-4 border-transparent border-t-purple-500 rounded-full animate-spin" style="animation-delay: -0.3s;"></div></div></div>'),Ut=w("<div><!></div>"),Vt=w('<main class="mx-auto max-w-7xl px-4 py-8"><div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"></div> <div class="grid grid-cols-1 xl:grid-cols-3 gap-6"><div class="xl:col-span-2 space-y-6"><div class="backdrop-blur-sm bg-white/5 border border-white/10 rounded-2xl p-1 shadow-2xl"><!></div> <div class="backdrop-blur-sm bg-white/5 border border-white/10 rounded-2xl p-1 shadow-2xl"><!></div></div> <div class="space-y-6"><div class="backdrop-blur-sm bg-white/5 border border-white/10 rounded-2xl p-1 shadow-2xl"><!></div> <div class="backdrop-blur-sm bg-white/5 border border-white/10 rounded-2xl p-1 shadow-2xl"><!></div></div></div></main>'),Nt=w('<div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none"><div class="absolute -top-40 left-1/2 h-[480px] w-[720px] -translate-x-1/2 rounded-full bg-gradient-radial from-primary-500/25 via-primary-600/10 to-transparent blur-3xl svelte-sqzup4"></div> <div class="absolute bottom-[-200px] right-[-120px] h-[520px] w-[520px] rounded-full bg-gradient-radial from-purple-500/25 via-purple-600/10 to-transparent blur-3xl svelte-sqzup4"></div></div> <div class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"><header class="sticky top-0 z-50 border-b border-white/10 bg-black/40 backdrop-blur-xl"><div class="mx-auto max-w-7xl px-4 h-16 flex items-center justify-between"><div class="flex items-center gap-3"><div class="p-2 bg-primary-500/20 rounded-lg"><svg class="w-6 h-6 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></div> <div><h1 class="text-lg font-bold text-white">Operator Console</h1> <p class="text-xs text-gray-400"> </p></div></div> <div class="flex items-center gap-4"><div><div></div> </div> <!> <div class="flex gap-2"><!> <!></div></div></div></header> <!></div>',1);function ta(re,l){Pe(l,!0);let r=J(!0),A=J(null),b=J("OFFLINE"),q=J(null),M=J(ie([])),v=J(ie([])),k=J(ie([]));const P=(n,_=20)=>Array.from({length:_},(Y,p)=>({time:Date.now()/1e3-(_-p)*3600,value:n+Math.random()*10-5}));let V=ie(P(20)),G=ie(P(180)),H=ie(P(2)),x=ie(P(92)),$=ie([{id:"1",customerName:"John Smith",customerPhone:"+1 (555) 123-4567",waitTime:45,priority:"high",campaignName:"Sales Campaign Q4"},{id:"2",customerName:"Sarah Johnson",customerPhone:"+1 (555) 987-6543",waitTime:23,priority:"normal"}]);ke(()=>{if(a(q)){Q(a(q).id);const n=setInterval(()=>z(a(q).id),3e3);return()=>clearInterval(n)}}),ke(()=>{if(!a(q)&&a(b)==="AVAILABLE"){const n=setTimeout(()=>{j(q,{id:"demo-call-1",customerName:"Alice Johnson",customerPhone:"+1 (555) 234-5678",duration:0,status:"active",sentiment:"neutral"},!0),j(k,[{id:"1",speaker:"customer",text:"Hi, I'm having trouble with my billing account",timestamp:new Date,sentiment:"neutral"}],!0)},2e3);return()=>clearTimeout(n)}});async function Q(n){try{const _=a(k).map(p=>`${p.speaker}: ${p.text}`),Y=await $e.agentAssist.suggestions.mutate({callId:n,context:`Call with ${a(q)?.customerName}`,lastMessages:_});j(M,Y.suggestions.map(p=>({id:p.id,type:p.type,title:p.type.charAt(0).toUpperCase()+p.type.slice(1),content:p.text,confidence:p.confidence})),!0),j(v,Y.articles.map(p=>({id:p.id,title:p.title,summary:p.summary,relevance:p.relevanceScore||.5})),!0)}catch(_){console.error("AI error:",_)}}async function z(n){console.log("ðŸŽ¤ Fetching transcripts")}async function d(){try{const n=await $e.dashboard.getOverview.query();j(A,n,!0)}catch{j(A,{stats:{totalCalls:24,avgDuration:185,satisfaction:94}},!0)}finally{j(r,!1)}}async function o(n){try{await $e.agent.updateStatus.mutate({status:n})}catch{}j(b,n,!0)}function c(n){switch(n){case"AVAILABLE":return"success";case"BUSY":return"warning";case"BREAK":return"primary";case"WRAP_UP":return"secondary";default:return"gray"}}ke(()=>{if(!a(q)&&a(b)==="WRAP_UP"){const n=setTimeout(()=>{a(b)==="WRAP_UP"&&j(b,"AVAILABLE")},15e3);return()=>clearTimeout(n)}}),Fe(async()=>{await d(),_e.connect();const n=setInterval(d,3e4),_=Y=>{Y.detail?.requiresWrapUp&&a(b)==="BUSY"&&j(b,"WRAP_UP")};return window.addEventListener("call-ended",_),()=>{clearInterval(n),window.removeEventListener("call-ended",_)}}),Ye(()=>_e.disconnect());var u=Nt();Je(n=>{Ke.title="Operator Dashboard - Voice by Kraliki"});var f=s(Ce(u),2),D=t(f),C=t(D),S=t(C),y=s(t(S),2),g=s(t(y),2),B=t(g);e(g),e(y),e(S);var L=s(S,2),I=t(L),E=t(I),Z=s(E);e(I);var F=s(I,2);{let n=ve(()=>c(a(b)));oe(F,{get variant(){return a(n)},class:"px-4 py-1.5",children:(_,Y)=>{T();var p=X();O(()=>h(p,a(b))),i(_,p)},$$slots:{default:!0}})}var U=s(F,2),W=t(U);{let n=ve(()=>a(b)==="AVAILABLE"?"success":"secondary");le(W,{size:"sm",get variant(){return a(n)},onclick:()=>o("AVAILABLE"),children:(_,Y)=>{T();var p=X("Available");i(_,p)},$$slots:{default:!0}})}var ee=s(W,2);{let n=ve(()=>a(b)==="BREAK"?"primary":"secondary");le(ee,{size:"sm",get variant(){return a(n)},onclick:()=>o("BREAK"),children:(_,Y)=>{T();var p=X("Break");i(_,p)},$$slots:{default:!0}})}e(U),e(L),e(C),e(D);var se=s(D,2);{var be=n=>{var _=Lt();i(n,_)},ge=n=>{var _=Vt(),Y=t(_);Ae(Y,21,()=>[{title:"Calls Today",value:a(A)?.stats?.totalCalls||24,subtitle:"Total handled",trend:V,trendColor:"#10b981"},{title:"Avg Duration",value:`${Math.floor((a(A)?.stats?.avgDuration||185)/60)}:${((a(A)?.stats?.avgDuration||185)%60).toString().padStart(2,"0")}`,subtitle:"Minutes",trend:G,trendColor:"#3b82f6"},{title:"Queue",value:$.length,subtitle:"Waiting",trend:H,trendColor:"#f59e0b"},{title:"Satisfaction",value:`${a(A)?.stats?.satisfaction||94}%`,subtitle:"CSAT Score",trend:x,trendColor:"#8b5cf6"}],Xe,(ye,ze,Re)=>{var ne=Ut(),Ee=t(ne);tt(Ee,Ze(()=>a(ze))),e(ne),m(1,ne,()=>R,()=>({y:20,duration:400,delay:Re*100,easing:K})),m(2,ne,()=>we),i(ye,ne)}),e(Y);var p=s(Y,2),me=t(p),he=t(me),je=t(he);gt(je,{get call(){return a(q)},set call(ye){j(q,ye,!0)}}),e(he);var ce=s(he,2),Se=t(ce);wt(Se,{get calls(){return $}}),e(ce),e(me);var Be=s(me,2),ue=t(Be),Ne=t(ue);jt(Ne,{get suggestions(){return a(M)},get articles(){return a(v)}}),e(ue);var fe=s(ue,2),xe=t(fe);qt(xe,{get entries(){return a(k)}}),e(fe),e(Be),e(p),e(_),m(1,he,()=>R,()=>({x:-20,duration:500,easing:K})),m(1,ce,()=>R,()=>({x:-20,duration:500,delay:100,easing:K})),m(1,ue,()=>R,()=>({x:20,duration:500,easing:K})),m(1,fe,()=>R,()=>({x:20,duration:500,delay:100,easing:K})),i(n,_)};ae(se,n=>{a(r)?n(be):n(ge,!1)})}e(f),O(()=>{h(B,`Welcome, ${et.user?.firstName||"Agent"}`),Ue(I,1,`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm backdrop-blur-sm ${_e.connected?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,"svelte-sqzup4"),Ue(E,1,`w-2 h-2 rounded-full ${_e.connected?"bg-green-400 animate-pulse":"bg-red-400"}`,"svelte-sqzup4"),h(Z,` ${_e.connected?"Connected":"Disconnected"}`)}),i(re,u),Ie()}export{ta as component};
