import"../chunks/DsnmJJEf.js";import{o as qe,s as C}from"../chunks/BFqu7qA2.js";import{p as Ye,w as B,x as he,d as U,f as ie,a as o,b as He,z as i,B as Ke,s as r,e as a,c as ke,y as N,t as V,h as b,r as t,o as e,A as oe}from"../chunks/BuVZNLKp.js";import{i as Y}from"../chunks/-3rtMcgp.js";import{e as Je,i as Qe}from"../chunks/CXIvCxzw.js";import{r as O}from"../chunks/VPamw8uQ.js";import{t as X,q as We,f as Z}from"../chunks/BIGR8jnV.js";import{b as R}from"../chunks/Daq8DEw0.js";import{b as we}from"../chunks/lVq-UPoZ.js";import{C as $e,B as F}from"../chunks/BFcXF936.js";import{B as ne}from"../chunks/VXoEeBoC.js";import{t as Xe}from"../chunks/CO_IWAlQ.js";var Ze=Ke('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New User',1),et=U('<div class="p-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">User Management</h1> <p class="text-gray-600 dark:text-gray-400 mt-1">Manage system users and their roles</p></div> <!></div></div>'),tt=U('<div class="flex justify-between items-center"><h3 class="text-lg font-semibold text-gray-900 dark:text-white">All Users</h3> <!></div>'),at=U('<div class="text-center py-8"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"></div> <p class="mt-4 text-gray-600 dark:text-gray-400">Loading users...</p></div>'),rt=U('<div class="text-center py-8"><p class="text-red-600 dark:text-red-400"> </p> <p class="text-sm text-gray-500 mt-2">Using fallback data</p></div>'),st=U('<tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"><td class="px-4 py-3"><div class="flex items-center"><div class="h-10 w-10 flex-shrink-0"><div class="h-10 w-10 rounded-full bg-primary-600 flex items-center justify-center text-white font-medium"> </div></div> <div class="ml-4"><p class="font-medium text-gray-900 dark:text-white"> </p></div></div></td><td class="px-4 py-3"><span class="text-gray-900 dark:text-white"> </span></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><span class="text-sm text-gray-500"> </span></td><td class="px-4 py-3"><div class="flex gap-2"><!> <!></div></td></tr>'),lt=U('<div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><tr><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">User</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Email</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Role</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Status</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Created</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Actions</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div>'),dt=U('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4"><h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Create New User</h3> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email *</label> <input type="email" placeholder="user@example.com" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">First Name *</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Last Name *</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Role *</label> <select class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"><option>Agent</option><option>Supervisor</option><option>Admin</option></select></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password *</label> <input type="password" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div></div> <div class="flex gap-2 justify-end mt-6"><!> <!></div></div></div>'),it=U('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4"><h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Edit User</h3> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label> <input type="email" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">First Name</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Last Name</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Role</label> <select class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"><option>Agent</option><option>Supervisor</option><option>Admin</option></select></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">New Password (leave blank to keep current)</label> <input type="password" placeholder="Leave blank to keep current" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div></div> <div class="flex gap-2 justify-end mt-6"><!> <!></div></div></div>'),ot=U('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4"><h3 class="text-lg font-bold text-red-600 mb-4">Delete User</h3> <p class="text-gray-700 dark:text-gray-300 mb-4">Are you sure you want to delete <strong> </strong>?</p> <p class="text-sm text-gray-500 dark:text-gray-400">This action cannot be undone. All user data will be permanently removed.</p> <div class="flex gap-2 justify-end mt-6"><!> <!></div></div></div>'),nt=U('<div class="space-y-6"><!> <!></div> <!> <!> <!>',1);function kt(Ne,Ae){Ye(Ae,!0);let A=B(he([])),ee=B(!0),H=B(null),K=B(!1),x=B(null),J=B(!1),Q=B(!1),l=B(he({email:"",firstName:"",lastName:"",role:"AGENT",password:""}));const Ee=async()=>{try{i(ee,!0),i(H,null);const s=await Xe.agent.list.query({limit:100,offset:0});i(A,s.agents||[],!0)}catch(s){console.error("Failed to load users:",s),i(H,s.message,!0),i(A,[{id:"1",email:"admin@cc-lite.local",firstName:"Admin",lastName:"User",role:"ADMIN",status:"AVAILABLE",createdAt:new Date().toISOString()},{id:"2",email:"supervisor@cc-lite.local",firstName:"Super",lastName:"Visor",role:"SUPERVISOR",status:"AVAILABLE",createdAt:new Date().toISOString()},{id:"3",email:"agent1@cc-lite.local",firstName:"Agent",lastName:"One",role:"AGENT",status:"BUSY",createdAt:new Date().toISOString()}],!0)}finally{i(ee,!1)}};qe(()=>{Ee()});const W=()=>{i(l,{email:"",firstName:"",lastName:"",role:"AGENT",password:""},!0)},Se=async()=>{try{console.log("Creating user:",e(l));const s={id:Date.now().toString(),...e(l),status:"OFFLINE",createdAt:new Date().toISOString()};i(A,[...e(A),s],!0),i(K,!1),W()}catch(s){alert(`Failed to create user: ${s.message}`)}},Ue=s=>{i(x,s,!0),i(l,{email:s.email,firstName:s.firstName,lastName:s.lastName,role:s.role,password:""},!0),i(J,!0)},Pe=async()=>{if(e(x))try{console.log("Updating user:",e(l)),i(A,e(A).map(s=>s.id===e(x).id?{...s,...e(l)}:s),!0),i(J,!1),W(),i(x,null)}catch(s){alert(`Failed to update user: ${s.message}`)}},Ie=async()=>{if(e(x))try{console.log("Deleting user:",e(x).id),i(A,e(A).filter(s=>s.id!==e(x).id),!0),i(Q,!1),i(x,null)}catch(s){alert(`Failed to delete user: ${s.message}`)}},De=s=>{switch(s){case"ADMIN":return"danger";case"SUPERVISOR":return"warning";case"AGENT":return"primary";default:return"gray"}},Ce=s=>{switch(s){case"AVAILABLE":return"success";case"BUSY":return"warning";case"BREAK":return"secondary";case"OFFLINE":return"gray";default:return"gray"}};var ve=nt(),te=ie(ve),ce=a(te);$e(ce,{children:(s,n)=>{var p=et(),v=a(p),m=r(a(v),2);F(m,{variant:"primary",onclick:()=>i(K,!0),children:(k,u)=>{var c=Ze();b(),o(k,c)},$$slots:{default:!0}}),t(v),t(p),o(s,p)},$$slots:{default:!0}});var Fe=r(ce,2);$e(Fe,{header:n=>{var p=tt(),v=r(a(p),2);ne(v,{variant:"gray",class:"text-xs",children:(m,k)=>{b();var u=N();V(()=>C(u,`Total: ${e(A).length??""}`)),o(m,u)},$$slots:{default:!0}}),t(p),o(n,p)},children:(n,p)=>{var v=ke(),m=ie(v);{var k=c=>{var w=at();o(c,w)},u=c=>{var w=ke(),$=ie(w);{var P=f=>{var y=rt(),h=a(y),E=a(h);t(h),b(2),t(y),V(()=>C(E,`Error: ${e(H)??""}`)),o(f,y)},_=f=>{var y=lt(),h=a(y),E=r(a(h));Je(E,21,()=>e(A),Qe,(M,g,j)=>{var S=st(),T=a(S),d=a(T),L=a(d),I=a(L),ae=a(I);t(I),t(L);var me=r(L,2),ue=a(me),Me=a(ue);t(ue),t(me),t(d),t(T);var re=r(T),xe=a(re),je=a(xe,!0);t(xe),t(re);var se=r(re),Te=a(se);{let D=oe(()=>De(e(g).role));ne(Te,{get variant(){return e(D)},class:"text-xs",children:(z,G)=>{b();var q=N();V(()=>C(q,e(g).role)),o(z,q)},$$slots:{default:!0}})}t(se);var le=r(se),Ve=a(le);{let D=oe(()=>Ce(e(g).status||"OFFLINE"));ne(Ve,{get variant(){return e(D)},class:"text-xs",children:(z,G)=>{b();var q=N();V(()=>C(q,e(g).status||"OFFLINE")),o(z,q)},$$slots:{default:!0}})}t(le);var de=r(le),ye=a(de),ze=a(ye,!0);t(ye),t(de);var fe=r(de),be=a(fe),_e=a(be);F(_e,{size:"sm",variant:"secondary",onclick:()=>Ue(e(g)),children:(D,z)=>{b();var G=N("Edit");o(D,G)},$$slots:{default:!0}});var Ge=r(_e,2);F(Ge,{size:"sm",variant:"danger",onclick:()=>{i(x,e(g),!0),i(Q,!0)},children:(D,z)=>{b();var G=N("Delete");o(D,G)},$$slots:{default:!0}}),t(be),t(fe),t(S),V(D=>{C(ae,`${e(g).firstName[0]??""}${e(g).lastName[0]??""}`),C(Me,`${e(g).firstName??""} ${e(g).lastName??""}`),C(je,e(g).email),C(ze,D)},[()=>new Date(e(g).createdAt).toLocaleDateString()]),X(1,S,()=>Z,()=>({y:20,duration:300,delay:j*50,easing:We})),o(M,S)}),t(E),t(h),t(y),o(f,y)};Y($,f=>{e(H)?f(P):f(_,!1)},!0)}o(c,w)};Y(m,c=>{e(ee)?c(k):c(u,!1)})}o(n,v)},$$slots:{header:!0,default:!0}}),t(te);var ge=r(te,2);{var Le=s=>{var n=dt(),p=a(n),v=r(a(p),2),m=a(v),k=r(a(m),2);O(k),t(m);var u=r(m,2),c=a(u),w=r(a(c),2);O(w),t(c);var $=r(c,2),P=r(a($),2);O(P),t($),t(u);var _=r(u,2),f=r(a(_),2),y=a(f);y.value=y.__value="AGENT";var h=r(y);h.value=h.__value="SUPERVISOR";var E=r(h);E.value=E.__value="ADMIN",t(f),t(_);var M=r(_,2),g=r(a(M),2);O(g),t(M),t(v);var j=r(v,2),S=a(j);F(S,{variant:"secondary",onclick:()=>{i(K,!1),W()},children:(d,L)=>{b();var I=N("Cancel");o(d,I)},$$slots:{default:!0}});var T=r(S,2);{let d=oe(()=>!e(l).email||!e(l).firstName||!e(l).lastName||!e(l).password);F(T,{variant:"primary",onclick:Se,get disabled(){return e(d)},children:(L,I)=>{b();var ae=N("Create User");o(L,ae)},$$slots:{default:!0}})}t(j),t(p),t(n),R(k,()=>e(l).email,d=>e(l).email=d),R(w,()=>e(l).firstName,d=>e(l).firstName=d),R(P,()=>e(l).lastName,d=>e(l).lastName=d),we(f,()=>e(l).role,d=>e(l).role=d),R(g,()=>e(l).password,d=>e(l).password=d),X(1,n,()=>Z,()=>({y:20,duration:300})),o(s,n)};Y(ge,s=>{e(K)&&s(Le)})}var pe=r(ge,2);{var Be=s=>{var n=it(),p=a(n),v=r(a(p),2),m=a(v),k=r(a(m),2);O(k),t(m);var u=r(m,2),c=a(u),w=r(a(c),2);O(w),t(c);var $=r(c,2),P=r(a($),2);O(P),t($),t(u);var _=r(u,2),f=r(a(_),2),y=a(f);y.value=y.__value="AGENT";var h=r(y);h.value=h.__value="SUPERVISOR";var E=r(h);E.value=E.__value="ADMIN",t(f),t(_);var M=r(_,2),g=r(a(M),2);O(g),t(M),t(v);var j=r(v,2),S=a(j);F(S,{variant:"secondary",onclick:()=>{i(J,!1),W(),i(x,null)},children:(d,L)=>{b();var I=N("Cancel");o(d,I)},$$slots:{default:!0}});var T=r(S,2);F(T,{variant:"primary",onclick:Pe,children:(d,L)=>{b();var I=N("Save Changes");o(d,I)},$$slots:{default:!0}}),t(j),t(p),t(n),R(k,()=>e(l).email,d=>e(l).email=d),R(w,()=>e(l).firstName,d=>e(l).firstName=d),R(P,()=>e(l).lastName,d=>e(l).lastName=d),we(f,()=>e(l).role,d=>e(l).role=d),R(g,()=>e(l).password,d=>e(l).password=d),X(1,n,()=>Z,()=>({y:20,duration:300})),o(s,n)};Y(pe,s=>{e(J)&&e(x)&&s(Be)})}var Oe=r(pe,2);{var Re=s=>{var n=ot(),p=a(n),v=r(a(p),2),m=r(a(v)),k=a(m);t(m),b(),t(v);var u=r(v,4),c=a(u);F(c,{variant:"secondary",onclick:()=>{i(Q,!1),i(x,null)},children:($,P)=>{b();var _=N("Cancel");o($,_)},$$slots:{default:!0}});var w=r(c,2);F(w,{variant:"danger",onclick:Ie,children:($,P)=>{b();var _=N("Delete User");o($,_)},$$slots:{default:!0}}),t(u),t(p),t(n),V(()=>C(k,`${e(x).firstName??""} ${e(x).lastName??""}`)),X(1,n,()=>Z,()=>({y:20,duration:300})),o(s,n)};Y(Oe,s=>{e(Q)&&e(x)&&s(Re)})}o(Ne,ve),He()}export{kt as component};
