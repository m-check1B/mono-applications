import"../chunks/DsnmJJEf.js";import"../chunks/9x_112mq.js";import{p as It,w as A,x as kt,d as $,f as Tt,a as n,b as qt,e as a,s,z as l,B as Ht,h as k,r as e,o as t,y as w,t as B,A as it,at as ct}from"../chunks/BuVZNLKp.js";import{o as Lt,s as P}from"../chunks/BFqu7qA2.js";import{i as K}from"../chunks/-3rtMcgp.js";import{e as Qt,i as Ut}from"../chunks/CXIvCxzw.js";import{r as R}from"../chunks/VPamw8uQ.js";import{t as dt,q as Gt,f as lt}from"../chunks/BIGR8jnV.js";import{b as E}from"../chunks/Daq8DEw0.js";import{b as Jt}from"../chunks/lVq-UPoZ.js";import{C as wt,B as S}from"../chunks/BFcXF936.js";import{B as vt}from"../chunks/VXoEeBoC.js";import{t as q}from"../chunks/CO_IWAlQ.js";var Kt=Ht('<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New Campaign',1),Rt=$('<div class="p-6"><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold text-gray-900 dark:text-white">Campaign Management</h2> <p class="text-gray-600 dark:text-gray-400 mt-1">Create and manage outbound calling campaigns</p></div> <!></div></div>'),Vt=$('<div class="flex justify-between items-center"><h3 class="text-lg font-semibold text-gray-900 dark:text-white">Active Campaigns</h3> <div class="flex gap-2"><!> <!></div></div>'),Wt=$('<div class="text-center py-8 text-gray-500">No campaigns found</div>'),Xt=$('<p class="text-sm text-gray-500 truncate max-w-xs"> </p>'),Yt=$('<tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"><td class="px-4 py-3"><div><p class="font-medium text-gray-900 dark:text-white"> </p> <!></div></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><span class="text-gray-900 dark:text-white"> </span></td><td class="px-4 py-3"><span class="text-gray-900 dark:text-white"> </span></td><td class="px-4 py-3"><p class="text-sm text-gray-500"> </p></td><td class="px-4 py-3"><div class="flex gap-2"><!> <!> <!></div></td></tr>'),Zt=$('<table class="w-full"><thead class="bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><tr><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Name</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Status</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Calls</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Metrics</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Created</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Actions</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table>'),te=$('<div class="overflow-x-auto"><!></div>'),ee=$('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"><h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Create New Campaign</h3> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Campaign Name *</label> <input type="text" placeholder="Enter campaign name" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label> <textarea placeholder="Describe the campaign objectives" rows="3" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"></textarea></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Call Script</label> <textarea placeholder="Enter the script for agents to follow" rows="4" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"></textarea></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Priority</label> <select class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"><option>Low</option><option>Medium</option><option>High</option></select></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Target Calls/Day</label> <input type="number" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Start Date</label> <input type="date" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">End Date</label> <input type="date" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div></div></div> <div class="flex gap-2 justify-end mt-6"><!> <!></div></div></div>'),ae=$('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"><h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Edit Campaign</h3> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Campaign Name *</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label> <textarea rows="3" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"></textarea></div></div> <div class="flex gap-2 justify-end mt-6"><!> <!></div></div></div>'),re=$('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4"><h3 class="text-lg font-bold text-red-600 mb-4">Delete Campaign</h3> <p class="text-gray-700 dark:text-gray-300 mb-4"> </p> <p class="text-sm text-gray-500 dark:text-gray-400">This action cannot be undone. All associated data will be permanently removed.</p> <div class="flex gap-2 justify-end mt-6"><!> <!></div></div></div>'),se=$('<div class="space-y-6"><!> <!></div> <!> <!> <!>',1);function ie(ot,H){It(H,!0);let m=A(kt([])),pt=A(!0),gt=A(null),V=A(!1),W=A(!1),X=A(!1),b=A(null),i=A(kt({name:"",description:"",script:"",priority:"medium",targetCallsPerDay:100,startDate:"",endDate:""}));const $t=async()=>{try{l(pt,!0),l(gt,null);const r=await q.campaign.list.query({limit:50,offset:0});l(m,r.campaigns,!0)}catch(r){console.error("Failed to load campaigns:",r),l(gt,r.message||"Failed to load campaigns",!0),l(m,[{id:"1",name:"Q4 Sales Campaign",description:"End of year sales outreach",active:!0,createdAt:new Date().toISOString(),_count:{sessions:245,metrics:189}},{id:"2",name:"Customer Feedback Survey",description:"Quarterly satisfaction survey",active:!1,createdAt:new Date(Date.now()-7*864e5).toISOString(),_count:{sessions:156,metrics:142}}],!0)}finally{l(pt,!1)}};Lt(()=>{$t()});const Y=()=>{l(i,{name:"",description:"",script:"",priority:"medium",targetCallsPerDay:100,startDate:"",endDate:""},!0)},Dt=async()=>{try{const r=await q.campaign.create.mutate({name:t(i).name,description:t(i).description,script:t(i).script,priority:t(i).priority,targetCallsPerDay:t(i).targetCallsPerDay,startDate:t(i).startDate?new Date(t(i).startDate).toISOString():void 0,endDate:t(i).endDate?new Date(t(i).endDate).toISOString():void 0});l(m,[...t(m),{...r,_count:{sessions:0,metrics:0}}],!0),l(V,!1),Y()}catch(r){console.error("Failed to create campaign:",r),alert(`Failed to create campaign: ${r.message}`)}},Ct=r=>{l(b,r,!0),l(i,{name:r.name,description:r.description||"",script:"",priority:"medium",targetCallsPerDay:100,startDate:"",endDate:""},!0),l(W,!0)},Pt=async()=>{if(t(b))try{const r=await q.campaign.update.mutate({id:t(b).id,name:t(i).name,description:t(i).description,script:t(i).script,priority:t(i).priority,targetCallsPerDay:t(i).targetCallsPerDay});l(m,t(m).map(d=>d.id===t(b).id?{...d,name:t(i).name,description:t(i).description}:d),!0),l(W,!1),Y(),l(b,null)}catch(r){console.error("Failed to update campaign:",r),alert(`Failed to update campaign: ${r.message}`)}},St=async r=>{try{r.active?await q.campaign.pause.mutate({id:r.id}):await q.campaign.start.mutate({id:r.id}),l(m,t(m).map(d=>d.id===r.id?{...d,active:!d.active}:d),!0)}catch(d){console.error("Failed to toggle campaign:",d),alert(`Failed to ${r.active?"pause":"start"} campaign: ${d.message}`)}},Ft=async()=>{if(t(b))try{await q.campaign.delete.mutate({id:t(b).id}),l(m,t(m).filter(r=>r.id!==t(b).id),!0),l(X,!1),l(b,null)}catch(r){console.error("Failed to delete campaign:",r),alert(`Failed to delete campaign: ${r.message}`)}},Mt=r=>r?"success":"gray";var ut=se(),nt=Tt(ut),mt=a(nt);wt(mt,{children:(r,d)=>{var u=Rt(),v=a(u),y=s(a(v),2);S(y,{variant:"primary",onclick:()=>l(V,!0),children:(f,x)=>{var g=Kt();k(),n(f,g)},$$slots:{default:!0}}),e(v),e(u),n(r,u)},$$slots:{default:!0}});var jt=s(mt,2);wt(jt,{header:d=>{var u=Vt(),v=s(a(u),2),y=a(v);vt(y,{variant:"gray",class:"text-xs",children:(x,g)=>{k();var c=w();B(()=>P(c,`Total: ${t(m).length??""}`)),n(x,c)},$$slots:{default:!0}});var f=s(y,2);vt(f,{variant:"success",class:"text-xs",children:(x,g)=>{k();var c=w();B(_=>P(c,`Active: ${_??""}`),[()=>t(m).filter(_=>_.active).length]),n(x,c)},$$slots:{default:!0}}),e(v),e(u),n(d,u)},children:(d,u)=>{var v=te(),y=a(v);{var f=g=>{var c=Wt();n(g,c)},x=g=>{var c=Zt(),_=s(a(c));Qt(_,21,()=>t(m),Ut,(D,o,j)=>{var C=Yt(),F=a(C),L=a(F),N=a(L),Z=a(N,!0);e(N);var tt=s(N,2);{var Q=h=>{var M=Xt(),z=a(M,!0);e(M),B(()=>P(z,t(o).description)),n(h,M)};K(tt,h=>{t(o).description&&h(Q)})}e(L),e(F);var O=s(F),et=a(O);{let h=it(()=>Mt(t(o).active));vt(et,{get variant(){return t(h)},class:"text-xs",children:(M,z)=>{k();var J=w();B(()=>P(J,t(o).active?"Active":"Paused")),n(M,J)},$$slots:{default:!0}})}e(O);var I=s(O),U=a(I),at=a(U,!0);e(U),e(I);var G=s(I),p=a(G),rt=a(p,!0);e(p),e(G);var T=s(G),st=a(T),Nt=a(st,!0);e(st),e(T);var bt=s(T),ft=a(bt),_t=a(ft);{let h=it(()=>t(o).active?"warning":"success");S(_t,{size:"sm",get variant(){return t(h)},onclick:()=>St(t(o)),children:(M,z)=>{k();var J=w();B(()=>P(J,t(o).active?"Pause":"Start")),n(M,J)},$$slots:{default:!0}})}var ht=s(_t,2);S(ht,{size:"sm",variant:"secondary",onclick:()=>Ct(t(o)),children:(h,M)=>{k();var z=w("Edit");n(h,z)},$$slots:{default:!0}});var Ot=s(ht,2);S(Ot,{size:"sm",variant:"danger",onclick:()=>{l(b,t(o),!0),l(X,!0)},get disabled(){return t(o).active},children:(h,M)=>{k();var z=w("Delete");n(h,z)},$$slots:{default:!0}}),e(ft),e(bt),e(C),B(h=>{P(Z,t(o).name),P(at,t(o)._count.sessions),P(rt,t(o)._count.metrics),P(Nt,h)},[()=>new Date(t(o).createdAt).toLocaleDateString()]),dt(1,C,()=>lt,()=>({y:20,duration:300,delay:j*50,easing:Gt})),n(D,C)}),e(_),e(c),n(g,c)};K(y,g=>{t(m).length===0?g(f):g(x,!1)})}e(v),n(d,v)},$$slots:{header:!0,default:!0}}),e(nt);var yt=s(nt,2);{var At=r=>{var d=ee(),u=a(d),v=s(a(u),2),y=a(v),f=s(a(y),2);R(f),e(y);var x=s(y,2),g=s(a(x),2);ct(g),e(x);var c=s(x,2),_=s(a(c),2);ct(_),e(c);var D=s(c,2),o=a(D),j=s(a(o),2),C=a(j);C.value=C.__value="low";var F=s(C);F.value=F.__value="medium";var L=s(F);L.value=L.__value="high",e(j),e(o);var N=s(o,2),Z=s(a(N),2);R(Z),e(N),e(D);var tt=s(D,2),Q=a(tt),O=s(a(Q),2);R(O),e(Q);var et=s(Q,2),I=s(a(et),2);R(I),e(et),e(tt),e(v);var U=s(v,2),at=a(U);S(at,{variant:"secondary",onclick:()=>{l(V,!1),Y()},children:(p,rt)=>{k();var T=w("Cancel");n(p,T)},$$slots:{default:!0}});var G=s(at,2);{let p=it(()=>!t(i).name);S(G,{variant:"primary",onclick:Dt,get disabled(){return t(p)},children:(rt,T)=>{k();var st=w("Create Campaign");n(rt,st)},$$slots:{default:!0}})}e(U),e(u),e(d),E(f,()=>t(i).name,p=>t(i).name=p),E(g,()=>t(i).description,p=>t(i).description=p),E(_,()=>t(i).script,p=>t(i).script=p),Jt(j,()=>t(i).priority,p=>t(i).priority=p),E(Z,()=>t(i).targetCallsPerDay,p=>t(i).targetCallsPerDay=p),E(O,()=>t(i).startDate,p=>t(i).startDate=p),E(I,()=>t(i).endDate,p=>t(i).endDate=p),dt(1,d,()=>lt,()=>({y:20,duration:300})),n(r,d)};K(yt,r=>{t(V)&&r(At)})}var xt=s(yt,2);{var Et=r=>{var d=ae(),u=a(d),v=s(a(u),2),y=a(v),f=s(a(y),2);R(f),e(y);var x=s(y,2),g=s(a(x),2);ct(g),e(x),e(v);var c=s(v,2),_=a(c);S(_,{variant:"secondary",onclick:()=>{l(W,!1),Y(),l(b,null)},children:(o,j)=>{k();var C=w("Cancel");n(o,C)},$$slots:{default:!0}});var D=s(_,2);{let o=it(()=>!t(i).name);S(D,{variant:"primary",onclick:Pt,get disabled(){return t(o)},children:(j,C)=>{k();var F=w("Save Changes");n(j,F)},$$slots:{default:!0}})}e(c),e(u),e(d),E(f,()=>t(i).name,o=>t(i).name=o),E(g,()=>t(i).description,o=>t(i).description=o),dt(1,d,()=>lt,()=>({y:20,duration:300})),n(r,d)};K(xt,r=>{t(W)&&t(b)&&r(Et)})}var zt=s(xt,2);{var Bt=r=>{var d=re(),u=a(d),v=s(a(u),2),y=a(v);e(v);var f=s(v,4),x=a(f);S(x,{variant:"secondary",onclick:()=>{l(X,!1),l(b,null)},children:(c,_)=>{k();var D=w("Cancel");n(c,D)},$$slots:{default:!0}});var g=s(x,2);S(g,{variant:"danger",onclick:Ft,children:(c,_)=>{k();var D=w("Delete");n(c,D)},$$slots:{default:!0}}),e(f),e(u),e(d),B(()=>P(y,`Are you sure you want to delete the campaign "${t(b).name??""}"?`)),dt(1,d,()=>lt,()=>({y:20,duration:300})),n(r,d)};K(zt,r=>{t(X)&&t(b)&&r(Bt)})}n(ot,ut),qt()}var de=$('<div class="space-y-6"><div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6"><h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Campaign Management</h1> <p class="text-gray-600 dark:text-gray-400">Manage all outbound calling campaigns from this central dashboard.</p></div> <!></div>');function _e(ot){var H=de(),m=s(a(H),2);ie(m,{}),e(H),n(ot,H)}export{_e as component};
