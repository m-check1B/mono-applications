import{f as b,a as c}from"../chunks/pFl1CK35.js";import"../chunks/CnJ-dsFT.js";import{o as Ae}from"../chunks/0VtO9hYy.js";import{p as Ce,d as s,t as v,e as l,g as t,c as De,J as _,M as u,f as m,n as ie,r,k as ze,N as se}from"../chunks/aQ_ifger.js";import{s as g}from"../chunks/DBuqHHqM.js";import{i as le}from"../chunks/BTxJJ6eU.js";import{e as k,i as w}from"../chunks/oqRKM5NY.js";import{b as ne,r as T}from"../chunks/BqAhscvM.js";import{s as Ee}from"../chunks/DGR2HyJN.js";import{d as Ne,e as de}from"../chunks/C918u5xm.js";import{b as f}from"../chunks/CDxeFDgn.js";import{i as Oe}from"../chunks/ft9JqUN4.js";import{g as J}from"../chunks/CTjsJUPt.js";var $e=b('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),je=b("<option> </option>"),Be=b("<option> </option>"),Ie=b('<button type="button"> </button>'),We=b('<span class="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"> <button type="button" class="text-blue-600 hover:text-blue-800">×</button></span>'),Me=b('<div class="flex flex-wrap gap-2"></div>'),Pe=b(`<div class="container mx-auto p-6 max-w-4xl"><div class="mb-6"><button class="text-gray-600 hover:text-gray-900 mb-2">← Back to Teams</button> <h1 class="text-3xl font-bold">Create New Team</h1> <p class="text-gray-600 mt-1">Set up a new team with working hours and structure</p></div> <!> <form class="bg-white rounded-lg shadow-lg p-6 space-y-6"><div><h2 class="text-xl font-semibold mb-4">Basic Information</h2> <div class="space-y-4"><div><label for="name" class="block text-sm font-medium text-gray-700 mb-1">Team Name *</label> <input type="text" id="name" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Sales Team, Support Team"/></div> <div><label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Describe the team's purpose and responsibilities"></textarea></div> <div><label for="parent_team" class="block text-sm font-medium text-gray-700 mb-1">Parent Team (Optional)</label> <select id="parent_team" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"><option>None (Top-level team)</option><!></select> <p class="mt-1 text-sm text-gray-500">Create a hierarchical structure by selecting a parent team</p></div></div></div> <div class="border-t pt-6"><h2 class="text-xl font-semibold mb-4">Working Schedule</h2> <div class="space-y-4"><div><label for="timezone" class="block text-sm font-medium text-gray-700 mb-1">Timezone *</label> <select id="timezone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></select></div> <div class="grid grid-cols-2 gap-4"><div><label for="start_time" class="block text-sm font-medium text-gray-700 mb-1">Start Time</label> <input type="time" id="start_time" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/></div> <div><label for="end_time" class="block text-sm font-medium text-gray-700 mb-1">End Time</label> <input type="time" id="end_time" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Working Days *</label> <div class="flex gap-2"></div></div></div></div> <div class="border-t pt-6"><h2 class="text-xl font-semibold mb-4">Tags (Optional)</h2> <div class="space-y-3"><div class="flex gap-2"><input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Add tags (e.g., sales, support, tier1)"/> <button type="button" class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700">Add Tag</button></div> <!></div></div> <div class="flex justify-end gap-3 pt-4 border-t"><button type="button" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button> <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed"> </button></div></form></div>`);function Ze(ue,me){Ce(me,!1);let a=_({name:"",description:"",parent_team_id:null,timezone:"UTC",working_hours:{start:"09:00",end:"17:00"},working_days:[1,2,3,4,5],tags:[],metadata:{}}),S=_([]),x=_(!1),p=_(""),y=_("");const ve=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Australia/Sydney"],ce=[{value:1,label:"Mon"},{value:2,label:"Tue"},{value:3,label:"Wed"},{value:4,label:"Thu"},{value:5,label:"Fri"},{value:6,label:"Sat"},{value:0,label:"Sun"}];Ae(async()=>{await be()});async function be(){try{const e=localStorage.getItem("token"),o=await fetch("/api/team-management/teams",{headers:{Authorization:`Bearer ${e}`}});o.ok&&m(S,await o.json())}catch(e){console.error("Error loading teams:",e)}}function pe(e){t(a).working_days.indexOf(e)>-1?u(a,t(a).working_days=t(a).working_days.filter(i=>i!==e)):u(a,t(a).working_days=[...t(a).working_days,e])}function L(){const e=t(y).trim();e&&!t(a).tags.includes(e)&&(u(a,t(a).tags=[...t(a).tags,e]),m(y,""))}function ge(e){u(a,t(a).tags=t(a).tags.filter(o=>o!==e))}async function _e(){if(!t(a).name.trim()){m(p,"Team name is required");return}if(t(a).working_days.length===0){m(p,"Select at least one working day");return}try{m(x,!0),m(p,"");const e=localStorage.getItem("token"),o={...t(a),parent_team_id:t(a).parent_team_id||void 0},i=await fetch("/api/team-management/teams",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(o)});if(!i.ok){const n=await i.json();throw new Error(n.detail||"Failed to create team")}const d=await i.json();J(`/teams/${d.id}`)}catch(e){m(p,`Error: ${e}`)}finally{m(x,!1)}}Oe();var A=Pe(),C=s(A),fe=s(C);fe.__click=()=>J("/teams"),ie(4),r(C);var U=l(C,2);{var xe=e=>{var o=$e(),i=s(o,!0);r(o),v(()=>g(i,t(p))),c(e,o)};le(U,e=>{t(p)&&e(xe)})}var D=l(U,2),z=s(D),Y=l(s(z),2),E=s(Y),G=l(s(E),2);T(G),r(E);var N=l(E,2),H=l(s(N),2);ze(H),r(N);var K=l(N,2),O=l(s(K),2);v(()=>{t(a),se(()=>{t(S)})});var $=s(O);$.value=($.__value=null)??"";var ye=l($);k(ye,1,()=>t(S),w,(e,o)=>{var i=je(),d=s(i,!0);r(i);var n={};v(()=>{g(d,t(o).name),n!==(n=t(o).id)&&(i.value=(i.__value=t(o).id)??"")}),c(e,i)}),r(O),ie(2),r(K),r(Y),r(z);var j=l(z,2),Q=l(s(j),2),B=s(Q),I=l(s(B),2);v(()=>{t(a),se(()=>{})}),k(I,5,()=>ve,w,(e,o)=>{var i=Be(),d=s(i,!0);r(i);var n={};v(()=>{g(d,t(o)),n!==(n=t(o))&&(i.value=(i.__value=t(o))??"")}),c(e,i)}),r(I),r(B);var W=l(B,2),M=s(W),R=l(s(M),2);T(R),r(M);var V=l(M,2),X=l(s(V),2);T(X),r(V),r(W);var Z=l(W,2),ee=l(s(Z),2);k(ee,5,()=>ce,w,(e,o)=>{var i=Ie();i.__click=()=>pe(t(o).value);var d=s(i,!0);r(i),v(n=>{Ee(i,1,`px-4 py-2 rounded-md font-medium ${n??""}`),g(d,t(o).label)},[()=>t(a).working_days.includes(t(o).value)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"]),c(e,i)}),r(ee),r(Z),r(Q),r(j);var P=l(j,2),te=l(s(P),2),q=s(te),h=s(q);T(h);var he=l(h,2);he.__click=L,r(q);var ke=l(q,2);{var we=e=>{var o=Me();k(o,5,()=>t(a).tags,w,(i,d)=>{var n=We(),oe=s(n),Se=l(oe);Se.__click=()=>ge(t(d)),r(n),v(()=>g(oe,`${t(d)??""} `)),c(i,n)}),r(o),c(e,o)};le(ke,e=>{t(a).tags.length>0&&e(we)})}r(te),r(P);var ae=l(P,2),re=s(ae);re.__click=()=>J("/teams");var F=l(re,2),Te=s(F,!0);r(F),r(ae),r(D),r(A),v(()=>{F.disabled=t(x),g(Te,t(x)?"Creating...":"Create Team")}),de("submit",D,e=>{e.preventDefault(),_e()}),f(G,()=>t(a).name,e=>u(a,t(a).name=e)),f(H,()=>t(a).description,e=>u(a,t(a).description=e)),ne(O,()=>t(a).parent_team_id,e=>u(a,t(a).parent_team_id=e)),ne(I,()=>t(a).timezone,e=>u(a,t(a).timezone=e)),f(R,()=>t(a).working_hours.start,e=>u(a,t(a).working_hours.start=e)),f(X,()=>t(a).working_hours.end,e=>u(a,t(a).working_hours.end=e)),de("keypress",h,e=>e.key==="Enter"&&(e.preventDefault(),L())),f(h,()=>t(y),e=>m(y,e)),c(ue,A),De()}Ne(["click"]);export{Ze as component};
