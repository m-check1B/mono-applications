import{f as _,a as n,c as Z}from"../chunks/pFl1CK35.js";import"../chunks/CnJ-dsFT.js";import{o as Te}from"../chunks/0VtO9hYy.js";import{p as $e,K as Se,L as je,c as Me,g as t,J as R,f as w,d as a,r as e,h as B,t as tt,e as r,q as d}from"../chunks/aQ_ifger.js";import{s as o}from"../chunks/DBuqHHqM.js";import{i as $}from"../chunks/BTxJJ6eU.js";import{e as Jt,i as Ot}from"../chunks/oqRKM5NY.js";import{d as Ie}from"../chunks/C918u5xm.js";import{s as et}from"../chunks/DGR2HyJN.js";import{i as De}from"../chunks/ft9JqUN4.js";import{s as Ee,a as ze}from"../chunks/BPSUqZ7R.js";import{p as Ce}from"../chunks/ahVOO_2e.js";import{g as ot}from"../chunks/CTjsJUPt.js";var Be=_('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div> <p class="mt-4 text-gray-600">Loading team...</p></div>'),Fe=_('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"> </div>'),He=_('<span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded"> </span>'),Le=_('<div class="flex gap-2 mt-2"></div>'),Ne=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Team Details</h3> <dl class="space-y-2"><div class="flex justify-between"><dt class="text-gray-600">Timezone:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Working Hours:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Working Days:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Created:</dt> <dd class="font-medium"> </dd></div></dl></div> <div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Performance Metrics</h3> <dl class="space-y-2"><div class="flex justify-between"><dt class="text-gray-600">Satisfaction Score:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Average Handle Time:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Total Calls Handled:</dt> <dd class="font-medium"> </dd></div></dl></div></div>'),Pe=_('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600 mb-4">No team members yet</p> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Add First Member</button></div>'),We=_('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-sm text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="text-red-600 hover:text-red-900">Remove</button></td></tr>'),Je=_('<div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Member</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Joined</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),Oe=_(`<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Today's Calls</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Service Level</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Avg CSAT</div> <div class="text-3xl font-bold"> </div></div></div> <div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Detailed Metrics</h3> <dl class="grid grid-cols-2 gap-4"><div><dt class="text-sm text-gray-600">Average Wait Time</dt> <dd class="text-lg font-semibold"> </dd></div> <div><dt class="text-sm text-gray-600">Average Handle Time</dt> <dd class="text-lg font-semibold"> </dd></div> <div><dt class="text-sm text-gray-600">Active Agents Today</dt> <dd class="text-lg font-semibold"> </dd></div></dl></div>`,1),Re=_('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600">No performance data available for today</p></div>'),qe=_('<div class="mb-6"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-4"><button class="text-gray-600 hover:text-gray-900">‚Üê Back</button> <h1 class="text-3xl font-bold"> </h1> <span> </span></div> <div class="flex gap-2"><button class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">+ Add Member</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Edit</button></div></div> <p class="text-gray-600"> </p> <!></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"><div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Total Agents</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Active Agents</div> <div class="text-3xl font-bold text-green-600"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Total Calls</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Avg Handle Time</div> <div class="text-3xl font-bold"> </div></div></div> <div class="border-b mb-6"><nav class="flex gap-4"><button>Overview</button> <button> </button> <button>Performance</button></nav></div> <!>',1),Ke=_('<div class="container mx-auto p-6"><!></div>');function ia(Rt,qt){$e(qt,!1);const kt=()=>ze(Ce,"$page",Kt),[Kt,Ut]=Ee(),F=R();let s=R(null),q=R([]),c=R(null),At=R(!0),st=R(""),k=R("overview");const Gt={owner:"bg-purple-100 text-purple-800",manager:"bg-blue-100 text-blue-800",supervisor:"bg-green-100 text-green-800",agent:"bg-gray-100 text-gray-800",viewer:"bg-yellow-100 text-yellow-800"},Qt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Te(async()=>{await Tt(),await $t(),await Vt()});async function Tt(){try{const i=localStorage.getItem("token"),l=await fetch(`/api/team-management/teams/${t(F)}`,{headers:{Authorization:`Bearer ${i}`}});l.ok?w(s,await l.json()):w(st,"Team not found")}catch(i){w(st,`Error loading team: ${i}`)}finally{w(At,!1)}}async function $t(){try{const i=localStorage.getItem("token"),l=await fetch(`/api/team-management/teams/${t(F)}/members`,{headers:{Authorization:`Bearer ${i}`}});l.ok&&w(q,await l.json())}catch(i){console.error("Error loading members:",i)}}async function Vt(){try{const i=localStorage.getItem("token"),l=new Date().toISOString().split("T")[0],H=await fetch(`/api/team-management/teams/${t(F)}/performance?period_date=${l}`,{headers:{Authorization:`Bearer ${i}`}});H.ok&&w(c,await H.json())}catch(i){console.error("Error loading performance:",i)}}async function Xt(i){if(confirm("Are you sure you want to remove this team member?"))try{const l=localStorage.getItem("token");(await fetch(`/api/team-management/team-members/${i}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}})).ok?(await $t(),await Tt()):alert("Failed to remove member")}catch(l){alert(`Error: ${l}`)}}function dt(i){if(i===null)return"-";const l=Math.floor(i/60),H=Math.floor(i%60);return`${l}m ${H}s`}function Yt(i){return i===null?"-":`${i.toFixed(1)}%`}function St(i){return i===null?"-":i.toFixed(2)}function jt(i){return new Date(i).toLocaleDateString()}Se(()=>kt(),()=>{w(F,parseInt(kt().params.id??"0"))}),je(),De();var vt=Ke(),Zt=a(vt);{var te=i=>{var l=Be();n(i,l)},ee=i=>{var l=Z(),H=B(l);{var ae=K=>{var U=Fe(),lt=a(U,!0);e(U),tt(()=>o(lt,t(st))),n(K,U)},re=K=>{var U=Z(),lt=B(U);{var se=nt=>{var Mt=qe(),ct=B(Mt),gt=a(ct),mt=a(gt),It=a(mt);It.__click=()=>ot("/teams");var xt=r(It,2),de=a(xt,!0);e(xt);var _t=r(xt,2),ie=a(_t,!0);e(_t),e(mt);var Dt=r(mt,2),Et=a(Dt);Et.__click=()=>ot(`/teams/${t(F)}/add-member`);var oe=r(Et,2);oe.__click=()=>ot(`/teams/${t(F)}/edit`),e(Dt),e(gt);var ut=r(gt,2),ve=a(ut,!0);e(ut);var le=r(ut,2);{var ne=m=>{var f=Le();Jt(f,5,()=>(t(s),d(()=>t(s).tags)),Ot,(L,G)=>{var A=He(),u=a(A,!0);e(A),tt(()=>o(u,t(G))),n(L,A)}),e(f),n(m,f)};$(le,m=>{t(s),d(()=>t(s).tags.length>0)&&m(ne)})}e(ct);var pt=r(ct,2),ft=a(pt),zt=r(a(ft),2),ce=a(zt,!0);e(zt),e(ft);var bt=r(ft,2),Ct=r(a(bt),2),ge=a(Ct,!0);e(Ct),e(bt);var yt=r(bt,2),Bt=r(a(yt),2),me=a(Bt,!0);e(Bt),e(yt);var Ft=r(yt,2),Ht=r(a(Ft),2),xe=a(Ht,!0);e(Ht),e(Ft),e(pt);var ht=r(pt,2),Lt=a(ht),wt=a(Lt);wt.__click=()=>w(k,"overview");var at=r(wt,2);at.__click=()=>w(k,"members");var _e=a(at);e(at);var Nt=r(at,2);Nt.__click=()=>w(k,"performance"),e(Lt),e(ht);var ue=r(ht,2);{var pe=m=>{var f=Ne(),L=a(f),G=r(a(L),2),A=a(G),u=r(a(A),2),N=a(u,!0);e(u),e(A);var P=r(A,2),Q=r(a(P),2),W=a(Q);e(Q),e(P);var g=r(P,2),x=r(a(g),2),S=a(x,!0);e(x),e(g);var J=r(g,2),p=r(a(J),2),v=a(p,!0);e(p),e(J),e(G),e(L);var b=r(L,2),y=r(a(b),2),h=a(y),V=r(a(h),2),j=a(V,!0);e(V),e(h);var M=r(h,2),I=r(a(M),2),D=a(I,!0);e(I),e(M);var O=r(M,2),E=r(a(O),2),z=a(E,!0);e(E),e(O),e(y),e(b),e(f),tt((C,T,X,Y)=>{o(N,(t(s),d(()=>t(s).timezone))),o(W,`${t(s),d(()=>t(s).working_hours.start)??""} - ${t(s),d(()=>t(s).working_hours.end)??""}`),o(S,C),o(v,T),o(j,X),o(D,Y),o(z,(t(s),d(()=>t(s).total_calls_handled)))},[()=>(t(s),d(()=>t(s).working_days.map(C=>Qt[C]).join(", "))),()=>(t(s),d(()=>jt(t(s).created_at))),()=>(t(s),d(()=>St(t(s).satisfaction_score))),()=>(t(s),d(()=>dt(t(s).average_handle_time)))]),n(m,f)},fe=m=>{var f=Z(),L=B(f);{var G=u=>{var N=Z(),P=B(N);{var Q=g=>{var x=Pe(),S=r(a(x),2);S.__click=()=>ot(`/teams/${t(F)}/add-member`),e(x),n(g,x)},W=g=>{var x=Je(),S=a(x),J=r(a(S));Jt(J,5,()=>t(q),Ot,(p,v)=>{var b=We(),y=a(b),h=a(y),V=a(h,!0);e(h);var j=r(h,2),M=a(j,!0);e(j),e(y);var I=r(y),D=a(I),O=a(D,!0);e(D),e(I);var E=r(I),z=a(E),C=a(z,!0);e(z),e(E);var T=r(E),X=a(T,!0);e(T);var Y=r(T),rt=a(Y);rt.__click=()=>Xt(t(v).id),e(Y),e(b),tt(it=>{o(V,(t(v),d(()=>t(v).user?.full_name||"Unknown"))),o(M,(t(v),d(()=>t(v).user?.email||""))),et(D,1,`px-2 text-xs font-semibold rounded-full capitalize ${t(v),d(()=>Gt[t(v).role]||"bg-gray-100 text-gray-800")??""}`),o(O,(t(v),d(()=>t(v).role))),et(z,1,`px-2 text-xs font-semibold rounded-full ${t(v),d(()=>t(v).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")??""}`),o(C,(t(v),d(()=>t(v).is_active?"Active":"Inactive"))),o(X,it)},[()=>(t(v),d(()=>jt(t(v).joined_at)))]),n(p,b)}),e(J),e(S),e(x),n(g,x)};$(P,g=>{t(q),d(()=>t(q).length===0)?g(Q):g(W,!1)})}n(u,N)},A=u=>{var N=Z(),P=B(N);{var Q=W=>{var g=Z(),x=B(g);{var S=p=>{var v=Oe(),b=B(v),y=a(b),h=r(a(y),2),V=a(h,!0);e(h),e(y);var j=r(y,2),M=r(a(j),2),I=a(M,!0);e(M),e(j);var D=r(j,2),O=r(a(D),2),E=a(O,!0);e(O),e(D),e(b);var z=r(b,2),C=r(a(z),2),T=a(C),X=r(a(T),2),Y=a(X,!0);e(X),e(T);var rt=r(T,2),it=r(a(rt),2),be=a(it,!0);e(it),e(rt);var Pt=r(rt,2),Wt=r(a(Pt),2),ye=a(Wt,!0);e(Wt),e(Pt),e(C),e(z),tt((he,we,ke,Ae)=>{o(V,(t(c),d(()=>t(c).total_calls))),o(I,he),o(E,we),o(Y,ke),o(be,Ae),o(ye,(t(c),d(()=>t(c).active_agents)))},[()=>(t(c),d(()=>Yt(t(c).service_level_percentage))),()=>(t(c),d(()=>St(t(c).average_csat))),()=>(t(c),d(()=>dt(t(c).average_wait_time_seconds))),()=>(t(c),d(()=>dt(t(c).average_handle_time_seconds)))]),n(p,v)},J=p=>{var v=Re();n(p,v)};$(x,p=>{t(c)?p(S):p(J,!1)})}n(W,g)};$(P,W=>{t(k)==="performance"&&W(Q)},!0)}n(u,N)};$(L,u=>{t(k)==="members"?u(G):u(A,!1)},!0)}n(m,f)};$(ue,m=>{t(k)==="overview"?m(pe):m(fe,!1)})}tt(m=>{o(de,(t(s),d(()=>t(s).name))),et(_t,1,`px-3 py-1 text-sm font-semibold rounded-full ${t(s),d(()=>t(s).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")??""}`),o(ie,(t(s),d(()=>t(s).is_active?"Active":"Inactive"))),o(ve,(t(s),d(()=>t(s).description||"No description provided"))),o(ce,(t(s),d(()=>t(s).total_agents))),o(ge,(t(s),d(()=>t(s).active_agents))),o(me,(t(s),d(()=>t(s).total_calls_handled))),o(xe,m),et(wt,1,`pb-2 px-1 ${t(k)==="overview"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`),et(at,1,`pb-2 px-1 ${t(k)==="members"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`),o(_e,`Members (${t(q),d(()=>t(q).length)??""})`),et(Nt,1,`pb-2 px-1 ${t(k)==="performance"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`)},[()=>(t(s),d(()=>dt(t(s).average_handle_time)))]),n(nt,Mt)};$(lt,nt=>{t(s)&&nt(se)},!0)}n(K,U)};$(H,K=>{t(st)?K(ae):K(re,!1)},!0)}n(i,l)};$(Zt,i=>{t(At)?i(te):i(ee,!1)})}e(vt),n(Rt,vt),Me(),Ut()}Ie(["click"]);export{ia as component};
