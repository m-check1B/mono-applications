import{f as g,a as f}from"../chunks/pFl1CK35.js";import{o as Ka,a as Za}from"../chunks/0VtO9hYy.js";import{p as Ya,s as d,a as R,g as e,f as o,i as z,d as i,e as n,t as y,c as Wa,j as b,r as s,n as U,k as Ha,l as Xa}from"../chunks/aQ_ifger.js";import{s as u}from"../chunks/DBuqHHqM.js";import{i as P}from"../chunks/BTxJJ6eU.js";import{e as j,i as Q}from"../chunks/oqRKM5NY.js";import{b as K,s as Ve,r as ie,a as oe}from"../chunks/BqAhscvM.js";import{d as er}from"../chunks/C918u5xm.js";import{a as tr,b as ar}from"../chunks/CDxeFDgn.js";import{s as rr,a as Ge}from"../chunks/BPSUqZ7R.js";import{u as sr}from"../chunks/CUF9Mhog.js";import{c as Be,f as ir,a as or,b as nr,d as lr,u as cr,m as dr,e as ur,g as pr}from"../chunks/BxFt9zDy.js";import"../chunks/J6IVVljB.js";import{c as vr,P as mr,L as fr}from"../chunks/B6mJBgjZ.js";import{c as gr}from"../chunks/Zr3TcUzR.js";import{R as br,A as _r}from"../chunks/CaBw7UIl.js";import{P as yr}from"../chunks/DxRKn0x_.js";import{A as hr}from"../chunks/eZUK58Ls.js";import{F as xr}from"../chunks/DfOzlxFp.js";import{P as Sr}from"../chunks/C8ipYI_7.js";import{T as Cr}from"../chunks/F1e28-8V.js";import{P as wr}from"../chunks/nEfWqz7S.js";var Ar=g('<div class="rounded-xl border border-error/40 bg-error/10 px-4 py-3 text-sm text-error"> </div>'),Pr=g('<p class="rounded-lg border border-error/40 bg-error/10 px-3 py-2 text-sm text-error">Failed to load voice/model configuration. <button class="text-primary underline" type="button">Retry</button></p>'),Nr=g('<p class="text-xs text-text-muted">Loading configurationâ€¦</p>'),$r=g("<option> </option>"),kr=g("<option> </option>"),Fr=g("<option> </option>"),Lr=g("<option> </option>"),Mr=g('<button class="btn btn-secondary"><!> </button>'),Ir=g('<div class="rounded-2xl border border-divider bg-secondary/80 p-4"><div class="flex items-start justify-between gap-3"><div class="grid flex-1 gap-3 md:grid-cols-2"><label class="field"><span class="field-label">Company</span> <input class="input-field"/></label> <label class="field"><span class="field-label">Phone</span> <input class="input-field"/></label></div> <div class="flex items-center gap-2"><button class="btn btn-primary"><!> Launch Call</button> <button class="btn btn-ghost"><!> Stop</button> <button class="btn btn-ghost"><!></button></div></div> <p class="mt-3 text-xs text-text-muted"> </p></div>'),Er=g('<p class="rounded-lg border border-error/40 bg-error/10 px-3 py-2 text-error"> </p>'),Rr=g('<p class="text-xs text-text-muted"> </p>'),Tr=g('<p class="text-xs text-text-muted"> </p>'),Dr=g('<div class="rounded-xl border border-divider bg-secondary/70 p-4 text-sm text-text-secondary"><p class="font-semibold text-text-primary">Latest Summary</p> <p class="mt-2 whitespace-pre-wrap text-sm text-text-primary"> </p> <div class="mt-3 grid gap-2 text-xs text-text-muted md:grid-cols-2"><p> </p> <p> </p> <p> </p> <p> </p></div></div>'),Or=g('<p class="text-xs text-text-muted">No call summaries available yet. Launch a call to populate analytics.</p>'),qr=g('<p class="rounded-lg border border-error/40 bg-error/10 px-3 py-2 text-error"> </p>'),zr=g('<section class="space-y-6"><header class="space-y-1"><h1 class="text-2xl font-semibold text-text-primary">Outbound Call Orchestration</h1> <p class="text-sm text-text-muted">Configure AI voice, language, and campaign script, then launch targeted outbound sessions with Stack 2026 ergonomics.</p></header> <!> <div class="grid gap-4 xl:grid-cols-[2fr_3fr]"><div class="space-y-4"><!> <article class="card"><div class="card-header"><h2 class="text-lg font-semibold text-text-primary">Call Configuration</h2> <span class="text-xs text-text-muted">Telephony source â€¢ AI runtime â€¢ Output language</span></div> <div class="space-y-4"><!> <!> <label class="field" for="country-select"><span class="field-label">Country &amp; Twilio Number</span> <select id="country-select" class="select-field"></select></label> <label class="field" for="from-number"><span class="field-label">From Phone Number</span> <input id="from-number" class="input-field" readonly=""/></label> <label class="field" for="model-select"><span class="field-label">AI Model</span> <select id="model-select" class="select-field"></select></label> <label class="field" for="voice-select"><span class="field-label">AI Voice</span> <select id="voice-select" class="select-field"></select></label> <div class="grid gap-4 md:grid-cols-2"><label class="field" for="language-select"><span class="field-label">Language</span> <select id="language-select" class="select-field"></select></label> <label class="field" for="audio-mode"><span class="field-label">Audio Mode</span> <select id="audio-mode" class="select-field"><option>Twilio PSTN</option><option>Local WebRTC (beta)</option></select></label></div> <div class="flex items-center justify-between rounded-xl border border-divider bg-secondary px-4 py-3"><div><p class="text-sm font-medium text-text-primary">AI De-essing</p> <p class="text-xs text-text-muted">Reduce harsh sibilance for sharp telephony audio.</p></div> <label class="relative inline-flex cursor-pointer items-center"><input type="checkbox" class="peer sr-only"/> <span class="peer h-6 w-11 rounded-full bg-divider transition peer-checked:bg-primary-soft"></span> <span class="absolute left-1 top-1 h-4 w-4 rounded-full bg-text-muted transition peer-checked:translate-x-5 peer-checked:bg-primary"></span></label></div></div></article> <article class="card"><div class="card-header"><h2 class="text-lg font-semibold text-text-primary">Campaign Script &amp; Instructions</h2> <button class="btn btn-ghost"><!> Reset Summary</button></div> <div class="space-y-4"><div class="grid gap-2 md:grid-cols-3"></div> <textarea class="textarea-field" rows="8" placeholder="Paste or generate AI instructions here..."></textarea></div></article></div> <div class="space-y-4"><article class="card"><div class="card-header"><h2 class="text-lg font-semibold text-text-primary">Target Companies</h2> <button class="btn btn-ghost"><!> Add company</button></div> <div class="space-y-3"></div></article> <!> <article class="card"><div class="card-header"><h2 class="text-lg font-semibold text-text-primary">Local Audio Tester</h2> <div class="text-xs text-text-muted"> </div></div> <div class="space-y-3 text-sm text-text-secondary"><!> <!> <div class="flex gap-2"><button type="button" class="btn btn-primary"> </button> <button type="button" class="btn btn-ghost">Stop</button></div> <!></div></article> <article class="card"><div class="card-header"><div class="flex items-center gap-2 text-text-primary"><!> <h2 class="text-lg font-semibold">Session Monitor</h2></div></div> <div class="space-y-3"><p class="text-sm text-text-muted"> </p> <!></div></article> <article class="card"><div class="card-header"><h2 class="text-lg font-semibold text-text-primary">Realtime Session</h2> <div class="text-xs text-text-muted"> </div></div> <div class="space-y-3 text-sm text-text-secondary"><!> <div class="flex gap-2"><button type="button" class="btn btn-secondary"> </button> <button type="button" class="btn btn-ghost">Disconnect</button></div> <p class="text-xs text-text-muted"> </p></div></article></div></div></section>');function cs(jt,Qt){Ya(Qt,!0);const Z=()=>Ge(Zt,"$voicesQuery",ne),Y=()=>Ge(Yt,"$modelsQuery",ne),Je=()=>Ge(Wt,"$voiceConfigQuery",ne),[ne,Vt]=rr(),N=sr(),Gt=[{code:"en",label:"English"},{code:"es",label:"Spanish"},{code:"cz",label:"Czech"}],Ke=[{code:"US",name:"United States",flag:"ðŸ‡ºðŸ‡¸",phoneNumber:N.countryFromNumbers.US??N.defaultFromNumber},{code:"CZ",name:"Czech Republic",flag:"ðŸ‡¨ðŸ‡¿",phoneNumber:N.countryFromNumbers.CZ??N.defaultFromNumber},{code:"ES",name:"Spain",flag:"ðŸ‡ªðŸ‡¸",phoneNumber:N.countryFromNumbers.ES??N.defaultFromNumber}],Bt=[{id:1,title:"Insurance Renewal",description:"Multi-step follow-up call with sentiment tracking."},{id:2,title:"Solar Outreach",description:"Energy-efficiency appointment setting."},{id:3,title:"Customer Re-engagement",description:"Generic follow-up script for dormant accounts."}],Ze="operator-console.target-companies";let W=d("twilio"),H=d(!1),X=d("CZ"),ee=d(R(N.defaultFromNumber)),$=d(""),k=d(""),I=d("en"),F=d(""),le=d(!1),T=d(!1),h=d(null),x=d("idle"),p=d(R([{name:"",phone:""}])),Ye=d(null),L=d(null),We=d(!1),ce=null,D=d(R([])),He=d(null),Xe=d(null),O=d(R([])),te=d(R([{id:"gemini",name:"Google Gemini Live",status:"available",capabilities:{realtime:!0,multimodal:!0,functionCalling:!0}},{id:"openai",name:"OpenAI Realtime",status:"available",capabilities:{realtime:!0,multimodal:!1,functionCalling:!0}},{id:"deepgram_nova3",name:"Deepgram Nova 3",status:"available",capabilities:{realtime:!0,multimodal:!1,functionCalling:!0}}])),ae=d("gemini");const A=vr({provider:e(ae)});let v=d(R(A.getState())),de=d(!1);const Jt=A.subscribe(t=>{o(v,t,!0)}),C=gr();let _=d(R(C.getState()));const Kt=C.subscribe(t=>{o(_,t,!0)});C.sendCapturedFrame(t=>{try{const a=btoa(String.fromCharCode(...new Uint8Array(t.buffer)));A.send(JSON.stringify({type:"audio-data",audioData:a}))}catch(a){console.error("Failed to send captured audio frame",a)}});let et=d(null),tt=d(!1);const Zt=Be({queryKey:["available-voices"],queryFn:ir}),Yt=Be({queryKey:["available-models"],queryFn:or}),Wt=Be({queryKey:["voice-config"],queryFn:nr}),at=b(()=>Z().data),rt=b(()=>Y().data),Ht=b(()=>Je().data),st=b(()=>e(at)?.voices??{}),it=b(()=>Object.keys(e(st))),Xt=b(()=>e(Ht)?.voiceDescriptions??{}),ot=b(()=>e(rt)?.availableModels??{}),ue=b(()=>e(at)?.currentDefault),pe=b(()=>e(rt)?.defaultModel),ea=b(()=>Z().isPending||Y().isPending||Je().isPending);z(()=>{const t=e(it);if(t.length&&!t.includes(e(k))){const a=e(ue)&&t.includes(e(ue))?e(ue):t[0];o(k,a??"",!0)}}),z(()=>{const t=Object.keys(e(ot));if(t.length&&!t.includes(e($))){const a=e(pe)&&t.includes(e(pe))?e(pe):t[0];o($,a??"",!0)}}),Ka(()=>{ta()}),Za(()=>{ce&&clearTimeout(ce),A.disconnect(),Jt(),C.cleanup(),Kt()}),z(()=>{const t=Ke.find(a=>a.code===e(X));o(ee,t?.phoneNumber??N.defaultFromNumber,!0)}),z(()=>{if(e(We))try{localStorage.setItem(Ze,JSON.stringify(e(p)))}catch(t){console.warn("Failed to persist companies",t)}});async function ta(){try{const t=localStorage.getItem(Ze);if(t){const a=JSON.parse(t);Array.isArray(a)&&a.length>0&&o(p,a.map(r=>({name:r.name??"",phone:r.phone??""})),!0)}}catch(t){console.warn("Failed to hydrate companies",t)}o(We,!0)}z(()=>{if(e(v).status==="connected"&&!e(de)){const t=ba();A.send(JSON.stringify(t)),o(de,!0)}e(v).status!=="connected"&&o(de,!1)}),z(()=>{if(!e(v).lastEventAt||e(et)===e(v).lastEventAt)return;o(et,e(v).lastEventAt,!0);const t=e(v).lastEvent;if(t&&typeof t=="object"&&"type"in t){const a=t;if(a.type==="audio"&&a.audio&&(C.playBase64Audio(a.audio,a.mimeType).catch(r=>{console.error("Failed to play realtime audio chunk",r)}),o(tt,!1)),a.type==="session-started"&&(C.setMessage("Session ready. Speak to interact with Gemini."),o(D,[],!0)),a.type==="turn-complete"&&(C.setMessage("Gemini turn complete. Awaiting new input."),o(tt,!1)),a.type==="transcription"&&a.text&&a.role&&ct(a.role,a.text),a.type==="text"&&a.text&&ct("assistant",a.text),a.type==="intent-analysis"&&o(He,a.data,!0),a.type==="sentiment-analysis"&&o(Xe,a.data,!0),a.type==="suggestion"){const r={id:a.data.id||Math.random().toString(36).substr(2,9),type:a.data.type||"response",title:a.data.title||"AI Suggestion",description:a.data.description||"",priority:a.data.priority||"medium",confidence:a.data.confidence||.5,status:"pending",timestamp:new Date};o(O,[...e(O),r],!0)}}});function nt(t,a,r){o(p,e(p).map((l,c)=>c===t?{...l,[a]:r}:l),!0)}function aa(t){return a=>{const r=a.currentTarget;nt(t,"name",r.value)}}function ra(t){return a=>{const r=a.currentTarget;nt(t,"phone",r.value)}}function sa(t){if(e(p).length===1){o(p,[{name:"",phone:""}],!0);return}o(p,e(p).filter((a,r)=>r!==t),!0)}function ia(){o(p,[...e(p),{name:"",phone:""}],!0)}function oa(t){const a=e(Xt)[t];if(a)return a;const r=e(st)[t];if(r){const l=[r.gender,r.characteristics].filter(Boolean).join(" Â· ");return l?`${t} â€” ${l}`:t}return t}async function na(t){o(le,!0),o(h,null);try{const a=await lr(t),r=a.name??`Campaign ${t}`;o(I,a.language??e(I),!0),o(F,la(a,r),!0)}catch(a){console.error("Failed to load campaign",a),o(h,`Unable to load campaign script ${t}.`)}finally{o(le,!1)}}function la(t,a){try{return`You are an enterprise outreach agent executing the â€œ${a}â€ campaign. Follow this structured conversation:

${JSON.stringify(t,null,2)}

Maintain professional tone, capture key details, and escalate if transfer steps are present.`}catch(r){return console.warn("Failed to convert campaign to instructions",r),e(F)}}function ca(t){return!e($)||!e(k)?(o(h,"Select an AI model and voice before starting a call."),!1):e(F).trim()?t.phone.trim()?!0:(o(h,"Target phone number is required."),!1):(o(h,"Load a campaign script or provide AI instructions."),!1)}async function da(t,a){if(ca(t)){o(T,!0),o(h,null),o(x,"configuring");try{await cr({model:e($),voice:e(k),language:e(I),fromPhoneNumber:e(ee),audioMode:e(W),aiInstructions:e(F),deEssing:e(H)}),o(x,"initiating-call");const r=await dr({company:{name:t.name,phone:t.phone},voice:e(k),model:e($),language:e(I),audioMode:e(W),deEssing:e(H),fromPhoneNumber:e(ee),aiInstructions:e(F),countryCode:e(X)});o(Ye,r.callSid,!0),o(p,e(p).map((l,c)=>c===a?{...l,status:"in-progress",callSid:r.callSid}:l),!0),o(x,"in-progress"),await lt(r.callSid,a)}catch(r){console.error("Failed to process outbound call",r),o(h,r instanceof Error?r.message:"Failed to start outbound call.",!0),o(p,e(p).map((l,c)=>c===a?{...l,status:"failed"}:l),!0),o(x,"failed")}finally{o(T,!1)}}}async function lt(t,a,r=0){r===0&&o(x,"polling-results");try{const l=await pr(t);if(l?.status&&["completed","failed"].includes(l.status)){o(L,l,!0),o(p,e(p).map((c,m)=>m===a?{...c,status:l.status==="completed"?"completed":"failed"}:c),!0),o(x,l.status==="completed"?"completed":"failed",!0);return}}catch(l){console.warn("Failed to poll call result",l)}if(r>20){o(x,"failed");return}ce=setTimeout(async()=>{await lt(t,a,r+1)},3e3)}async function ua(t,a){if(t){o(T,!0);try{await ur(t),o(p,e(p).map((r,l)=>l===a?{...r,status:"failed"}:r),!0),o(x,"failed")}catch(r){console.warn("Failed to stop call",r)}finally{o(T,!1)}}}function pa(){o(L,null),o(x,"idle"),o(Ye,null)}function va(t){switch(t){case"in-progress":return"In progress";case"polling-results":return"Processing results";case"completed":return"Completed";case"failed":return"Failed";default:return"Pending"}}function ma(t){switch(t){case"configuring":return"Sending session configuration to backend...";case"initiating-call":return"Dialing target company via telephony provider...";case"in-progress":return"Live call in progress.";case"polling-results":return"Awaiting call summary and analytics...";case"completed":return"Call completed successfully. Review summary below.";case"failed":return"Call failed or was stopped. Check logs and retry.";default:return"Ready to launch the next outbound call."}}async function fa(){if(e(_).status!=="recording"){const t=await C.startMicrophone();if(!t.success){o(h,t.error??"Unable to start microphone.",!0);return}}A.connect()}function ga(){A.disconnect(),C.stop()}function ba(){const t=e(p)[0]??{name:"",phone:""};return{type:"start-session",voice:e(k),model:e($),language:e(I),aiInstructions:e(F),company:t}}async function _a(){const t=await C.startMicrophone();t.success||o(h,t.error??"Unable to access microphone.",!0)}function ya(){C.stop()}async function ha(t){console.log("Switching to provider:",t);const a=t;if(a!==e(ae))try{await A.switchProvider(a),o(ae,a,!0),o(te,e(te).map(r=>({...r,status:r.id===t?"active":"available"})),!0),o(D,[...e(D),{role:"assistant",content:`ðŸ”„ Switched to ${e(te).find(r=>r.id===t)?.name}`,timestamp:new Date}],!0)}catch(r){console.error("Failed to switch provider:",r),o(h,"Failed to switch provider. Please try again.")}}function ct(t,a){o(D,[...e(D),{role:t,content:a,timestamp:new Date}],!0)}function xa(t,a){if(o(O,e(O).map(r=>r.id===t?{...r,status:a==="accept"?"accepted":"rejected"}:r),!0),a==="accept"){const r=e(O).find(l=>l.id===t);r&&A.send(JSON.stringify({type:"suggestion-action",suggestionId:t,action:"accept",suggestion:r}))}}var ve=zr(),dt=n(i(ve),2);{var Sa=t=>{var a=Ar(),r=i(a,!0);s(a),y(()=>u(r,e(h))),f(t,a)};P(dt,t=>{e(h)&&t(Sa)})}var ut=n(dt,2),me=i(ut),pt=i(me);{let t=b(()=>e(x)==="in-progress"||e(v).status==="connected");mr(pt,{get providers(){return e(te)},get currentProvider(){return e(ae)},get isLive(){return e(t)},onSwitch:ha})}var fe=n(pt,2),vt=n(i(fe),2),mt=i(vt);{var Ca=t=>{var a=Pr(),r=n(i(a));r.__click=()=>{Z().refetch(),Y().refetch()},s(a),f(t,a)};P(mt,t=>{(Z().isError||Y().isError)&&t(Ca)})}var ft=n(mt,2);{var wa=t=>{var a=Nr();f(t,a)};P(ft,t=>{e(ea)&&t(wa)})}var ge=n(ft,2),be=n(i(ge),2);j(be,21,()=>Ke,Q,(t,a)=>{var r=$r(),l=i(r);s(r);var c={};y(()=>{u(l,`${e(a).flag??""} ${e(a).name??""} (${e(a).phoneNumber??""})`),c!==(c=e(a).code)&&(r.value=(r.__value=e(a).code)??"")}),f(t,r)}),s(be),s(ge);var _e=n(ge,2),gt=n(i(_e),2);ie(gt),s(_e);var ye=n(_e,2),he=n(i(ye),2);j(he,21,()=>Object.entries(e(ot)),Q,(t,a)=>{var r=b(()=>Xa(e(a),2));let l=()=>e(r)[0],c=()=>e(r)[1];var m=kr(),M=i(m,!0);s(m);var w={};y(()=>{u(M,typeof c()=="object"&&c()&&"name"in c()?c().name:l()),w!==(w=l())&&(m.value=(m.__value=l())??"")}),f(t,m)}),s(he),s(ye);var xe=n(ye,2),Se=n(i(xe),2);j(Se,21,()=>e(it),Q,(t,a)=>{var r=Fr(),l=i(r,!0);s(r);var c={};y(m=>{u(l,m),c!==(c=e(a))&&(r.value=(r.__value=e(a))??"")},[()=>oa(e(a))]),f(t,r)}),s(Se),s(xe);var Ce=n(xe,2),we=i(Ce),Ae=n(i(we),2);j(Ae,21,()=>Gt,Q,(t,a)=>{var r=Lr(),l=i(r,!0);s(r);var c={};y(()=>{u(l,e(a).label),c!==(c=e(a).code)&&(r.value=(r.__value=e(a).code)??"")}),f(t,r)}),s(Ae),s(we);var bt=n(we,2),Pe=n(i(bt),2),Ne=i(Pe);Ne.value=Ne.__value="twilio";var _t=n(Ne);_t.value=_t.__value="local",s(Pe),s(bt),s(Ce);var yt=n(Ce,2),ht=n(i(yt),2),xt=i(ht);ie(xt),U(4),s(ht),s(yt),s(vt),s(fe);var St=n(fe,2),$e=i(St),ke=n(i($e),2);ke.__click=pa;var Aa=i(ke);br(Aa,{class:"size-4"}),U(),s(ke),s($e);var Ct=n($e,2),Fe=i(Ct);j(Fe,21,()=>Bt,Q,(t,a)=>{var r=Mr();r.__click=()=>na(e(a).id);var l=i(r);xr(l,{class:"size-4"});var c=n(l);s(r),y(()=>{r.disabled=e(le),u(c,` ${e(a).title??""}`)}),f(t,r)}),s(Fe);var wt=n(Fe,2);Ha(wt),s(Ct),s(St),s(me);var At=n(me,2),Le=i(At),Me=i(Le),Ie=n(i(Me),2);Ie.__click=ia;var Pa=i(Ie);yr(Pa,{class:"size-4"}),U(),s(Ie),s(Me);var Pt=n(Me,2);j(Pt,21,()=>e(p),Q,(t,a,r)=>{var l=Ir(),c=i(l),m=i(c),M=i(m);oe(M,"for",`company-${r}`);var w=n(i(M),2);ie(w),oe(w,"id",`company-${r}`);var je=b(()=>aa(r));w.__input=function(...S){e(je)?.apply(this,S)},s(M);var E=n(M,2);oe(E,"for",`phone-${r}`);var q=n(i(E),2);ie(q),oe(q,"id",`phone-${r}`);var re=b(()=>ra(r));q.__input=function(...S){e(re)?.apply(this,S)},s(E),s(m);var se=n(m,2),B=i(se);B.__click=()=>da(e(a),r);var ja=i(B);{var Qa=S=>{fr(S,{class:"size-4 animate-spin"})},Va=S=>{wr(S,{class:"size-4"})};P(ja,S=>{e(a).status==="in-progress"?S(Qa):S(Va,!1)})}U(),s(B);var J=n(B,2);J.__click=()=>ua(e(a).callSid,r);var Ga=i(J);Sr(Ga,{class:"size-4"}),U(),s(J);var Qe=n(J,2);Qe.__click=()=>sa(r);var Ba=i(Qe);Cr(Ba,{class:"size-4"}),s(Qe),s(se),s(c);var Ut=n(c,2),Ja=i(Ut);s(Ut),s(l),y(S=>{Ve(w,e(a).name),Ve(q,e(a).phone),B.disabled=e(T),J.disabled=!e(a).callSid||e(T),u(Ja,`Status: ${S??""}`)},[()=>va(e(a).status)]),f(t,l)}),s(Pt),s(Le);var Nt=n(Le,2);{let t=b(()=>e(x)==="in-progress"||e(v).status==="connected");_r(Nt,{get messages(){return e(D)},get isLive(){return e(t)},get intent(){return e(He)},get sentiment(){return e(Xe)},get suggestions(){return e(O)},onSuggestionAction:xa})}var Ee=n(Nt,2),Re=i(Ee),$t=n(i(Re),2),Na=i($t);s($t),s(Re);var kt=n(Re,2),Ft=i(kt);{var $a=t=>{var a=Er(),r=i(a,!0);s(a),y(()=>u(r,e(_).error)),f(t,a)};P(Ft,t=>{e(_).error&&t($a)})}var Lt=n(Ft,2);{var ka=t=>{var a=Rr(),r=i(a,!0);s(a),y(()=>u(r,e(_).message)),f(t,a)};P(Lt,t=>{e(_).message&&t(ka)})}var Te=n(Lt,2),V=i(Te);V.__click=_a;var Fa=i(V,!0);s(V);var Mt=n(V,2);Mt.__click=ya,s(Te);var La=n(Te,2);{var Ma=t=>{var a=Tr(),r=i(a);s(a),y(l=>u(r,`Last playback: ${l??""}`),[()=>new Date(e(_).lastPlaybackAt).toLocaleTimeString()]),f(t,a)};P(La,t=>{e(_).lastPlaybackAt&&t(Ma)})}s(kt),s(Ee);var De=n(Ee,2),Oe=i(De),It=i(Oe),Ia=i(It);hr(Ia,{class:"size-4"}),U(2),s(It),s(Oe);var Et=n(Oe,2),qe=i(Et),Ea=i(qe,!0);s(qe);var Ra=n(qe,2);{var Ta=t=>{var a=Dr(),r=n(i(a),2),l=i(r,!0);s(r);var c=n(r,2),m=i(c),M=i(m);s(m);var w=n(m,2),je=i(w);s(w);var E=n(w,2),q=i(E);s(E);var re=n(E,2),se=i(re);s(re),s(c),s(a),y(()=>{u(l,e(L).call_summary),u(M,`Sentiment: ${e(L).customer_sentiment??"N/A"??""}`),u(je,`Duration: ${e(L).duration??"N/A"??""}`),u(q,`Recorded: ${e(L).recordingTimestamp??"Not available"??""}`),u(se,`Recording URL: ${e(L).recordingUrl??"Not available"??""}`)}),f(t,a)},Da=t=>{var a=Or();f(t,a)};P(Ra,t=>{e(L)?t(Ta):t(Da,!1)})}s(Et),s(De);var Rt=n(De,2),ze=i(Rt),Tt=n(i(ze),2),Oa=i(Tt);s(Tt),s(ze);var Dt=n(ze,2),Ot=i(Dt);{var qa=t=>{var a=qr(),r=i(a,!0);s(a),y(()=>u(r,e(v).error)),f(t,a)};P(Ot,t=>{e(v).error&&t(qa)})}var Ue=n(Ot,2),G=i(Ue);G.__click=fa;var za=i(G,!0);s(G);var qt=n(G,2);qt.__click=ga,s(Ue);var zt=n(Ue,2),Ua=i(zt);s(zt),s(Dt),s(Rt),s(At),s(ut),s(ve),y((t,a)=>{Ve(gt,e(ee)),u(Na,`Status: ${e(_).status??""}`),V.disabled=e(_).status==="requesting-mic"||e(_).status==="recording",u(Fa,e(_).status==="requesting-mic"?"Requestingâ€¦":"Start microphone"),Mt.disabled=e(_).status==="idle"||e(_).status==="ready",u(Ea,t),u(Oa,`Provider: ${e(v).provider??""} â€¢ Status: ${e(v).status??""}`),G.disabled=e(v).status==="connecting"||e(v).status==="connected",u(za,e(v).status==="connecting"?"Connectingâ€¦":"Connect session"),qt.disabled=e(v).status==="idle"||e(v).status==="disconnected",u(Ua,`Last event: ${a??""}`)},[()=>ma(e(x)),()=>e(v).lastEventAt?new Date(e(v).lastEventAt).toLocaleTimeString():"â€”"]),K(be,()=>e(X),t=>o(X,t)),K(he,()=>e($),t=>o($,t)),K(Se,()=>e(k),t=>o(k,t)),K(Ae,()=>e(I),t=>o(I,t)),K(Pe,()=>e(W),t=>o(W,t)),tr(xt,()=>e(H),t=>o(H,t)),ar(wt,()=>e(F),t=>o(F,t)),f(jt,ve),Wa(),Vt()}er(["click","input"]);export{cs as component};
