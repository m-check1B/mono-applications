import{f as p,a as c,c as ee}from"../chunks/pFl1CK35.js";import{p as te,s as y,a as ae,f as i,i as re,e as n,t as h,c as se,d as o,n as ie,r as a,g as r,h as oe}from"../chunks/aQ_ifger.js";import{s as _}from"../chunks/DBuqHHqM.js";import{i as C}from"../chunks/BTxJJ6eU.js";import{e as ne,i as le}from"../chunks/oqRKM5NY.js";import{d as ce}from"../chunks/C918u5xm.js";import{b as de}from"../chunks/Bo6fAwy7.js";import{c as pe,i as me,j as ue}from"../chunks/BxFt9zDy.js";import"../chunks/J6IVVljB.js";import{q as M}from"../chunks/Bu_bTSTr.js";import{C as ve}from"../chunks/CZh40yCO.js";import{C as fe}from"../chunks/CPLHLQIe.js";import{B as xe}from"../chunks/COyQU7IG.js";var _e=p('<div class="rounded-lg border border-green-500/40 bg-green-500/10 px-3 py-2 text-sm text-green-600 dark:text-green-400 flex items-center gap-2"><!> </div>'),ge=p('<div class="rounded-lg border border-error/40 bg-error/10 px-3 py-2 text-sm text-error"> <button class="ml-2 text-primary underline" type="button">Retry</button></div>'),be=p('<p class="text-xs text-text-muted">Loading companiesâ€¦</p>'),ye=p('<p class="text-sm text-text-secondary">No companies found.</p>'),he=p('<article class="card flex items-center justify-between bg-secondary/80"><div class="flex items-center gap-3 text-text-primary"><!> <div><p class="text-sm font-semibold"> </p> <p class="text-xs text-text-muted"> </p></div></div> <span class="text-xs text-text-muted uppercase tracking-wide"> </span></article>'),Ce=p('<div class="grid gap-3"></div>'),Se=p('<section class="space-y-6"><header class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between"><div class="space-y-1"><h1 class="text-2xl font-semibold text-text-primary">Target Companies</h1> <p class="text-sm text-text-muted">Centralize lead lists, sync CRM exports, and monitor outbound status in one responsive surface.</p></div> <button class="btn btn-primary"><!> Import CSV</button> <input type="file" accept=".csv" class="hidden"/></header> <!> <!> <!></section>');function Me(R,T){te(T,!0);const E=pe({queryKey:["companies"],queryFn:ue,staleTime:3e4});let g=y(ae([])),u=y(!1),d=y(null),b=y(null),S;const N=E.subscribe(e=>{i(g,e.data??[],!0),i(u,e.isPending,!0),i(d,e.isError?e.error?.message??"Failed to load companies.":null,!0)});re(()=>()=>{N()});async function W(){S.click()}async function A(e){const t=e.target,s=t.files?.[0];if(s){if(!s.name.endsWith(".csv")){i(d,"Please select a CSV file");return}i(u,!0),i(d,null),i(b,null);try{const l=await s.text(),f=await me(l);f.success?(i(b,`Successfully imported ${f.count} companies`),await M.invalidateQueries({queryKey:["companies"]})):i(d,f.error||"Failed to import CSV",!0)}catch{i(d,"Failed to import CSV file")}finally{i(u,!1),t.value=""}}}var k=Se(),w=o(k),v=n(o(w),2);v.__click=W;var D=o(v);ve(D,{class:"size-4"}),ie(),a(v);var Q=n(v,2);Q.__change=A,de(Q,e=>S=e,()=>S),a(w);var j=n(w,2);{var G=e=>{var t=_e(),s=o(t);fe(s,{class:"size-4"});var l=n(s);a(t),h(()=>_(l,` ${r(b)??""}`)),c(e,t)};C(j,e=>{r(b)&&e(G)})}var I=n(j,2);{var H=e=>{var t=ge(),s=o(t),l=n(s);l.__click=()=>{M.invalidateQueries({queryKey:["companies"]})},a(t),h(()=>_(s,`${r(d)??""} `)),c(e,t)};C(I,e=>{r(d)&&e(H)})}var J=n(I,2);{var O=e=>{var t=be();c(e,t)},U=e=>{var t=ee(),s=oe(t);{var l=m=>{var x=ye();c(m,x)},f=m=>{var x=Ce();ne(x,21,()=>r(g),le,(X,q)=>{var V=he(),F=o(V),K=o(F);xe(K,{class:"size-5"});var P=n(K,2),z=o(P),Y=o(z,!0);a(z);var B=n(z,2),Z=o(B,!0);a(B),a(P),a(F);var L=n(F,2),$=o(L,!0);a(L),a(V),h(()=>{_(Y,r(q).name),_(Z,r(q).phone),_($,r(q).status??"Pending")}),c(X,V)}),a(x),c(m,x)};C(s,m=>{r(g).length===0?m(l):m(f,!1)},!0)}c(e,t)};C(J,e=>{r(u)&&!r(g).length?e(O):e(U,!1)})}a(k),h(()=>v.disabled=r(u)),c(R,k),se()}ce(["click","change"]);export{Me as component};
