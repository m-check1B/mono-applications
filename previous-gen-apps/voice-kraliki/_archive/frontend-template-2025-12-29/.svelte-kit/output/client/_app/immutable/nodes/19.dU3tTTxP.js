import{f as u,a as o,c as lt}from"../chunks/pFl1CK35.js";import"../chunks/CnJ-dsFT.js";import{o as Da}from"../chunks/0VtO9hYy.js";import{p as Na,K as Ea,L as La,c as Ma,g as t,J,f as h,d as e,r as a,h as Z,t as C,e as r,q as d}from"../chunks/aQ_ifger.js";import{s as l}from"../chunks/DBuqHHqM.js";import{i as A}from"../chunks/BTxJJ6eU.js";import{e as ft,i as bt}from"../chunks/oqRKM5NY.js";import{d as Pa}from"../chunks/C918u5xm.js";import{s as ot}from"../chunks/DGR2HyJN.js";import{i as Ba}from"../chunks/ft9JqUN4.js";import{s as Fa,a as Oa}from"../chunks/BPSUqZ7R.js";import{p as qa}from"../chunks/ahVOO_2e.js";import{g as ta}from"../chunks/CTjsJUPt.js";var Qa=u('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div> <p class="mt-4 text-gray-600">Loading agent...</p></div>'),Ha=u('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"> </div>'),Ja=u('<p class="text-gray-600"> </p>'),Ya=u("<button> </button>"),Ka=u('<span class="px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded"> </span>'),Ra=u('<span class="text-gray-500">No skills listed</span>'),Ua=u('<span class="px-3 py-1 bg-green-100 text-green-800 text-sm rounded"> </span>'),Ga=u('<span class="text-gray-500">No languages listed</span>'),Va=u('<div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Notes</h3> <p class="text-gray-700"> </p></div>'),Wa=u('<div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Contact Information</h3> <dl class="space-y-2"><div class="flex justify-between"><dt class="text-gray-600">Phone:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Extension:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Max Concurrent Calls:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Auto Answer:</dt> <dd class="font-medium"> </dd></div></dl></div> <div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Skills & Languages</h3> <div class="space-y-3"><div><div class="text-sm text-gray-600 mb-2">Skills</div> <div class="flex flex-wrap gap-2"></div></div> <div><div class="text-sm text-gray-600 mb-2">Languages</div> <div class="flex flex-wrap gap-2"></div></div></div></div> <div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Status Information</h3> <dl class="space-y-2"><div class="flex justify-between"><dt class="text-gray-600">Current Status:</dt> <dd class="font-medium capitalize"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Status Since:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Last Activity:</dt> <dd class="font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-600">Available for Calls:</dt> <dd class="font-medium"> </dd></div></dl></div> <!></div>'),Xa=u('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Total Calls</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Answered</div> <div class="text-3xl font-bold text-green-600"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Missed</div> <div class="text-3xl font-bold text-red-600"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Talk Time</div> <div class="text-3xl font-bold"> </div></div></div> <div class="bg-white p-6 rounded-lg shadow"><h3 class="text-lg font-semibold mb-4">Quality Metrics</h3> <dl class="grid grid-cols-2 gap-4"><div><dt class="text-sm text-gray-600">CSAT Score</dt> <dd class="text-2xl font-semibold"> </dd></div> <div><dt class="text-sm text-gray-600">Quality Score</dt> <dd class="text-2xl font-semibold"> </dd></div> <div><dt class="text-sm text-gray-600">First Call Resolution</dt> <dd class="text-2xl font-semibold"> </dd></div> <div><dt class="text-sm text-gray-600">Avg Handle Time</dt> <dd class="text-2xl font-semibold"> </dd></div></dl></div></div>'),Za=u('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600">No performance data available for today</p></div>'),te=u('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600">No shifts scheduled</p></div>'),ae=u('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td></tr>'),ee=u('<div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Scheduled Time</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Clock In</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Clock Out</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),re=u('<div class="mb-6"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-4"><button class="text-gray-600 hover:text-gray-900">‚Üê Back</button> <h1 class="text-3xl font-bold"> </h1> <span> </span></div> <div class="flex gap-2"><button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Edit Profile</button></div></div> <!></div> <div class="mb-6 bg-white rounded-lg shadow p-4"><div class="flex items-center gap-2"><span class="text-sm font-medium text-gray-700">Change Status:</span> <div class="flex gap-2"></div></div></div> <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"><div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Total Calls</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Calls Today</div> <div class="text-3xl font-bold text-blue-600"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Avg Handle Time</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">CSAT Score</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Quality Score</div> <div class="text-3xl font-bold"> </div></div></div> <div class="border-b mb-6"><nav class="flex gap-4"><button>Profile</button> <button>Performance</button> <button>Shifts</button></nav></div> <!>',1),se=u('<div class="container mx-auto p-6"><!></div>');function fe(aa,ea){Na(ea,!1);const Bt=()=>Oa(qa,"$page",ra),[ra,sa]=Fa(),tt=J();let s=J(null),_t=J([]),c=J(null),Ft=J(!0),gt=J(""),T=J("profile"),xt=J(!1);const da={offline:"bg-gray-500",available:"bg-green-500",busy:"bg-yellow-500",on_call:"bg-blue-500",break:"bg-orange-500",training:"bg-purple-500",away:"bg-red-500"},ia={scheduled:"bg-blue-100 text-blue-800",in_progress:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800",no_show:"bg-red-100 text-red-800"};Da(async()=>{await Ot(),await la(),await oa()});async function Ot(){try{const i=localStorage.getItem("token"),n=await fetch(`/api/team-management/agents/${t(tt)}`,{headers:{Authorization:`Bearer ${i}`}});n.ok?h(s,await n.json()):h(gt,"Agent not found")}catch(i){h(gt,`Error loading agent: ${i}`)}finally{h(Ft,!1)}}async function la(){try{const i=localStorage.getItem("token"),n=await fetch(`/api/team-management/shifts?agent_id=${t(tt)}`,{headers:{Authorization:`Bearer ${i}`}});n.ok&&h(_t,await n.json())}catch(i){console.error("Error loading shifts:",i)}}async function oa(){try{const i=localStorage.getItem("token"),n=new Date().toISOString().split("T")[0],j=await fetch(`/api/team-management/agents/${t(tt)}/performance?period_date=${n}`,{headers:{Authorization:`Bearer ${i}`}});j.ok&&h(c,await j.json())}catch(i){console.error("Error loading performance:",i)}}async function va(i){try{h(xt,!0);const n=localStorage.getItem("token");(await fetch(`/api/team-management/agents/${t(tt)}/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({status:i})})).ok?await Ot():alert("Failed to update status")}catch(n){alert(`Error: ${n}`)}finally{h(xt,!1)}}function yt(i){if(i===null)return"-";const n=Math.floor(i/3600),j=Math.floor(i%3600/60),mt=Math.floor(i%60);return n>0?`${n}h ${j}m`:j>0?`${j}m ${mt}s`:`${mt}s`}function na(i){return i===null?"-":`${(i*100).toFixed(1)}%`}function ut(i){return i===null?"-":i.toFixed(2)}function ca(i){return new Date(i).toLocaleDateString()}function pt(i){return i?new Date(i).toLocaleString():"-"}Ea(()=>Bt(),()=>{h(tt,parseInt(Bt().params.id??"0"))}),La(),Ba();var ht=se(),_a=e(ht);{var ga=i=>{var n=Qa();o(i,n)},xa=i=>{var n=lt(),j=Z(n);{var mt=at=>{var et=Ha(),wt=e(et,!0);a(et),C(()=>l(wt,t(gt))),o(at,et)},ua=at=>{var et=lt(),wt=Z(et);{var pa=kt=>{var qt=re(),St=Z(qt),$t=e(St),Ct=e($t),Qt=e(Ct);Qt.__click=()=>ta("/agents");var At=r(Qt,2),ma=e(At,!0);a(At);var Tt=r(At,2),fa=e(Tt,!0);a(Tt),a(Ct);var Ht=r(Ct,2),ba=e(Ht);ba.__click=()=>ta(`/agents/${t(tt)}/edit`),a(Ht),a($t);var ya=r($t,2);{var ha=m=>{var _=Ja(),p=e(_);a(_),C(()=>l(p,`Employee ID: ${t(s),d(()=>t(s).employee_id)??""}`)),o(m,_)};A(ya,m=>{t(s),d(()=>t(s).employee_id)&&m(ha)})}a(St);var jt=r(St,2),Jt=e(jt),Yt=r(e(Jt),2);ft(Yt,4,()=>["available","busy","break","training","away","offline"],bt,(m,_)=>{var p=Ya();p.__click=()=>va(_);var P=e(p,!0);a(p),C(Y=>{p.disabled=(t(xt),t(s),d(()=>t(xt)||t(s).current_status===_)),ot(p,1,`px-3 py-1 text-sm rounded capitalize ${t(s),d(()=>t(s).current_status===_?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200")??""}`),l(P,Y)},[()=>d(()=>_.replace("_"," "))]),o(m,p)}),a(Yt),a(Jt),a(jt);var It=r(jt,2),zt=e(It),Kt=r(e(zt),2),wa=e(Kt,!0);a(Kt),a(zt);var Dt=r(zt,2),Rt=r(e(Dt),2),ka=e(Rt,!0);a(Rt),a(Dt);var Nt=r(Dt,2),Ut=r(e(Nt),2),Sa=e(Ut,!0);a(Ut),a(Nt);var Et=r(Nt,2),Gt=r(e(Et),2),$a=e(Gt,!0);a(Gt),a(Et);var Vt=r(Et,2),Wt=r(e(Vt),2),Ca=e(Wt,!0);a(Wt),a(Vt),a(It);var Lt=r(It,2),Xt=e(Lt),Mt=e(Xt);Mt.__click=()=>h(T,"profile");var Pt=r(Mt,2);Pt.__click=()=>h(T,"performance");var Zt=r(Pt,2);Zt.__click=()=>h(T,"shifts"),a(Xt),a(Lt);var Aa=r(Lt,2);{var Ta=m=>{var _=Wa(),p=e(_),P=r(e(p),2),Y=e(P),I=r(e(Y),2),K=e(I,!0);a(I),a(Y);var R=r(Y,2),rt=r(e(R),2),U=e(rt,!0);a(rt),a(R);var b=r(R,2),S=r(e(b),2),G=e(S,!0);a(S),a(b);var B=r(b,2),y=r(e(B),2),z=e(y,!0);a(y),a(B),a(P),a(p);var $=r(p,2),F=r(e($),2),V=e(F),v=r(e(V),2);ft(v,5,()=>(t(s),d(()=>t(s).skills)),bt,(g,x)=>{var f=Ka(),X=e(f,!0);a(f),C(()=>l(X,t(x))),o(g,f)},g=>{var x=Ra();o(g,x)}),a(v),a(V);var D=r(V,2),O=r(e(D),2);ft(O,5,()=>(t(s),d(()=>t(s).languages)),bt,(g,x)=>{var f=Ua(),X=e(f,!0);a(f),C(()=>l(X,t(x))),o(g,f)},g=>{var x=Ga();o(g,x)}),a(O),a(D),a(F),a($);var N=r($,2),W=r(e(N),2),E=e(W),q=r(e(E),2),st=e(q,!0);a(q),a(E);var w=r(E,2),Q=r(e(w),2),vt=e(Q,!0);a(Q),a(w);var k=r(w,2),H=r(e(k),2),nt=e(H,!0);a(H),a(k);var L=r(k,2),M=r(e(L),2),ct=e(M,!0);a(M),a(L),a(W),a(N);var dt=r(N,2);{var it=g=>{var x=Va(),f=r(e(x),2),X=e(f,!0);a(f),a(x),C(()=>l(X,(t(s),d(()=>t(s).notes)))),o(g,x)};A(dt,g=>{t(s),d(()=>t(s).notes)&&g(it)})}a(_),C((g,x,f)=>{l(K,(t(s),d(()=>t(s).phone_number||"-"))),l(U,(t(s),d(()=>t(s).extension||"-"))),l(G,(t(s),d(()=>t(s).max_concurrent_calls))),l(z,(t(s),d(()=>t(s).auto_answer?"Yes":"No"))),l(st,g),l(vt,x),l(nt,f),l(ct,(t(s),d(()=>t(s).available_for_calls?"Yes":"No")))},[()=>(t(s),d(()=>t(s).current_status.replace("_"," "))),()=>(t(s),d(()=>pt(t(s).status_since))),()=>(t(s),d(()=>pt(t(s).last_activity_at)))]),o(m,_)},ja=m=>{var _=lt(),p=Z(_);{var P=I=>{var K=lt(),R=Z(K);{var rt=b=>{var S=Xa(),G=e(S),B=e(G),y=r(e(B),2),z=e(y,!0);a(y),a(B);var $=r(B,2),F=r(e($),2),V=e(F,!0);a(F),a($);var v=r($,2),D=r(e(v),2),O=e(D,!0);a(D),a(v);var N=r(v,2),W=r(e(N),2),E=e(W,!0);a(W),a(N),a(G);var q=r(G,2),st=r(e(q),2),w=e(st),Q=r(e(w),2),vt=e(Q,!0);a(Q),a(w);var k=r(w,2),H=r(e(k),2),nt=e(H,!0);a(H),a(k);var L=r(k,2),M=r(e(L),2),ct=e(M,!0);a(M),a(L);var dt=r(L,2),it=r(e(dt),2),g=e(it,!0);a(it),a(dt),a(st),a(q),a(S),C((x,f,X,Ia,za)=>{l(z,(t(c),d(()=>t(c).total_calls))),l(V,(t(c),d(()=>t(c).answered_calls))),l(O,(t(c),d(()=>t(c).missed_calls))),l(E,x),l(vt,f),l(nt,X),l(ct,Ia),l(g,za)},[()=>(t(c),d(()=>yt(t(c).total_talk_time))),()=>(t(c),d(()=>ut(t(c).customer_satisfaction_score))),()=>(t(c),d(()=>ut(t(c).quality_score))),()=>(t(c),d(()=>na(t(c).first_call_resolution_rate))),()=>(t(c),d(()=>yt(t(c).average_handle_time)))]),o(b,S)},U=b=>{var S=Za();o(b,S)};A(R,b=>{t(c)?b(rt):b(U,!1)})}o(I,K)},Y=I=>{var K=lt(),R=Z(K);{var rt=U=>{var b=lt(),S=Z(b);{var G=y=>{var z=te();o(y,z)},B=y=>{var z=ee(),$=e(z),F=r(e($));ft(F,5,()=>t(_t),bt,(V,v)=>{var D=ae(),O=e(D),N=e(O),W=e(N,!0);a(N),a(O);var E=r(O),q=e(E),st=e(q);a(q),a(E);var w=r(E),Q=e(w),vt=e(Q,!0);a(Q),a(w);var k=r(w),H=e(k),nt=e(H,!0);a(H),a(k);var L=r(k),M=e(L),ct=e(M,!0);a(M),a(L),a(D),C((dt,it,g,x)=>{l(W,dt),l(st,`${t(v),d(()=>t(v).start_time)??""} - ${t(v),d(()=>t(v).end_time)??""}`),l(vt,it),l(nt,g),ot(M,1,`px-2 text-xs font-semibold rounded-full capitalize ${t(v),d(()=>ia[t(v).status])??""}`),l(ct,x)},[()=>(t(v),d(()=>ca(t(v).shift_date))),()=>(t(v),d(()=>pt(t(v).clock_in_time))),()=>(t(v),d(()=>pt(t(v).clock_out_time))),()=>(t(v),d(()=>t(v).status.replace("_"," ")))]),o(V,D)}),a(F),a($),a(z),o(y,z)};A(S,y=>{t(_t),d(()=>t(_t).length===0)?y(G):y(B,!1)})}o(U,b)};A(R,U=>{t(T)==="shifts"&&U(rt)},!0)}o(I,K)};A(p,I=>{t(T)==="performance"?I(P):I(Y,!1)},!0)}o(m,_)};A(Aa,m=>{t(T)==="profile"?m(Ta):m(ja,!1)})}C((m,_,p,P)=>{l(ma,(t(s),d(()=>t(s).display_name||"Unnamed Agent"))),ot(Tt,1,`px-3 py-1 text-sm font-semibold rounded-full text-white capitalize ${t(s),d(()=>da[t(s).current_status])??""}`),l(fa,m),l(wa,(t(s),d(()=>t(s).total_calls_handled))),l(ka,(t(s),d(()=>t(s).calls_today))),l(Sa,_),l($a,p),l(Ca,P),ot(Mt,1,`pb-2 px-1 ${t(T)==="profile"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`),ot(Pt,1,`pb-2 px-1 ${t(T)==="performance"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`),ot(Zt,1,`pb-2 px-1 ${t(T)==="shifts"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`)},[()=>(t(s),d(()=>t(s).current_status.replace("_"," "))),()=>(t(s),d(()=>yt(t(s).average_handle_time_seconds))),()=>(t(s),d(()=>ut(t(s).satisfaction_score))),()=>(t(s),d(()=>ut(t(s).quality_score)))]),o(kt,qt)};A(wt,kt=>{t(s)&&kt(pa)},!0)}o(at,et)};A(j,at=>{t(gt)?at(mt):at(ua,!1)},!0)}o(i,n)};A(_a,i=>{t(Ft)?i(ga):i(xa,!1)})}a(ht),o(aa,ht),Ma(),sa()}Pa(["click"]);export{fe as component};
