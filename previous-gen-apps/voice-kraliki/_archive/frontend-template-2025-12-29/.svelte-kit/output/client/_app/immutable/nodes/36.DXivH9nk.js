import{f as c,a as v,c as _t}from"../chunks/pFl1CK35.js";import"../chunks/CnJ-dsFT.js";import{o as Ut}from"../chunks/0VtO9hYy.js";import{p as qt,d as a,e as r,t as m,c as Dt,f as A,g as t,J as M,r as e,h as gt,n as ut}from"../chunks/aQ_ifger.js";import{s as d}from"../chunks/DBuqHHqM.js";import{i as g}from"../chunks/BTxJJ6eU.js";import{e as bt,i as mt}from"../chunks/oqRKM5NY.js";import{d as Gt}from"../chunks/C918u5xm.js";import{s as ht}from"../chunks/DGR2HyJN.js";import{i as Kt}from"../chunks/ft9JqUN4.js";import{g as h}from"../chunks/CTjsJUPt.js";var Qt=c('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),Rt=c('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div> <p class="mt-4 text-gray-600">Loading teams...</p></div>'),Wt=c('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600 mb-4">No teams yet</p> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Create First Team</button></div>'),Xt=c('<button class="text-gray-500 hover:text-gray-700 w-6"> </button>'),Yt=c('<div class="w-6"></div>'),Zt=c('<p class="text-sm text-gray-600 mt-1"> </p>'),te=c('<div class="bg-gray-50 rounded-lg p-3 flex items-center justify-between"><button class="flex-1 text-left"><div class="flex items-center gap-2"><span class="text-gray-400">â””â”€</span> <h4 class="font-medium"> </h4> <span> </span></div></button> <div class="flex items-center gap-4 text-sm text-gray-600"><div> </div> <button class="px-3 py-1 text-blue-600 hover:bg-blue-100 rounded">View</button></div></div>'),ee=c('<div class="pl-12 pr-4 pb-4 space-y-2"></div>'),ae=c('<div class="bg-white rounded-lg shadow"><div class="p-4 flex items-center justify-between hover:bg-gray-50"><div class="flex items-center gap-3 flex-1"><!> <button class="flex-1 text-left"><div class="flex items-center gap-3"><h3 class="text-lg font-semibold"> </h3> <span> </span></div> <!></button></div> <div class="flex items-center gap-6 text-sm text-gray-600"><div class="text-center"><div class="font-semibold text-gray-900"> </div> <div>Agents</div></div> <div class="text-center"><div class="font-semibold text-green-600"> </div> <div>Active</div></div> <div class="text-center"><div class="font-semibold text-gray-900"> </div> <div>Calls</div></div> <button class="px-3 py-1 text-blue-600 hover:bg-blue-50 rounded">View</button></div></div> <!></div>'),re=c('<div class="space-y-2"></div>'),se=c('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600 mb-4">No teams yet</p> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Create First Team</button></div>'),ie=c('<div class="text-sm text-gray-500"> </div>'),ve=c('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div> <!></td><td class="px-6 py-4 whitespace-nowrap"><button> </button></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-green-600 font-medium"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="text-blue-600 hover:text-blue-900">View</button></td></tr>'),de=c('<div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Team Name</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Agents</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Active Agents</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Calls</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),oe=c('<div class="container mx-auto p-6"><div class="mb-6 flex items-center justify-between"><div><h1 class="text-3xl font-bold">Teams</h1> <p class="text-gray-600 mt-1">Manage team hierarchy and structure</p></div> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"> </button> <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">+ New Team</button></div></div> <!> <!></div>');function fe(Tt,Vt){qt(Vt,!1);let X=M([]),Y=M([]),Z=M(!0),tt=M(""),z=M("hierarchy"),f=M(new Set);Ut(async()=>{await et()});async function et(){try{A(Z,!0);const s=localStorage.getItem("token");if(t(z)==="hierarchy"){const o=await fetch("/api/team-management/teams/hierarchy",{headers:{Authorization:`Bearer ${s}`}});o.ok&&A(Y,await o.json())}else{const o=await fetch("/api/team-management/teams",{headers:{Authorization:`Bearer ${s}`}});o.ok&&A(X,await o.json())}}catch(s){A(tt,`Error loading teams: ${s}`)}finally{A(Z,!1)}}function jt(s){t(f).has(s)?t(f).delete(s):t(f).add(s),A(f,t(f))}async function St(){A(z,t(z)==="list"?"hierarchy":"list"),await et()}async function Ct(s,o){try{const y=localStorage.getItem("token");(await fetch(`/api/team-management/teams/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({is_active:!o})})).ok?await et():alert("Failed to update team status")}catch(y){alert(`Error updating team: ${y}`)}}Kt();var at=oe(),rt=a(at),ft=r(a(rt),2),D=a(ft);D.__click=St;var Nt=a(D,!0);e(D);var $t=r(D,2);$t.__click=()=>h("/teams/new"),e(ft),e(rt);var yt=r(rt,2);{var Mt=s=>{var o=Qt(),y=a(o,!0);e(o),m(()=>d(y,t(tt))),v(s,o)};g(yt,s=>{t(tt)&&s(Mt)})}var zt=r(yt,2);{var Bt=s=>{var o=Rt();v(s,o)},Et=s=>{var o=_t(),y=gt(o);{var wt=T=>{var B=_t(),st=gt(B);{var it=_=>{var n=Wt(),u=r(a(n),2);u.__click=()=>h("/teams/new"),e(n),v(_,n)},vt=_=>{var n=re();bt(n,5,()=>t(Y),mt,(u,i)=>{var E=ae(),l=a(E),w=a(l),V=a(w);{var F=p=>{var x=Xt();x.__click=()=>jt(t(i).id);var q=a(x,!0);e(x),m(b=>d(q,b),[()=>t(f).has(t(i).id)?"â–¼":"â–¶"]),v(p,x)},dt=p=>{var x=Yt();v(p,x)};g(V,p=>{t(i).child_teams&&t(i).child_teams.length>0?p(F):p(dt,!1)})}var I=r(V,2);I.__click=()=>h(`/teams/${t(i).id}`);var J=a(I),k=a(J),j=a(k,!0);e(k);var L=r(k,2),H=a(L,!0);e(L),e(J);var G=r(J,2);{var ot=p=>{var x=Zt(),q=a(x,!0);e(x),m(()=>d(q,t(i).description)),v(p,x)};g(G,p=>{t(i).description&&p(ot)})}e(I),e(w);var S=r(w,2),C=a(S),K=a(C),O=a(K,!0);e(K),ut(2),e(C);var N=r(C,2),Q=a(N),R=a(Q,!0);e(Q),ut(2),e(N);var P=r(N,2),$=a(P),U=a($,!0);e($),ut(2),e(P);var nt=r(P,2);nt.__click=()=>h(`/teams/${t(i).id}`),e(S),e(l);var It=r(l,2);{var Jt=p=>{var x=ee();bt(x,5,()=>t(i).child_teams,mt,(q,b)=>{var lt=te(),W=a(lt);W.__click=()=>h(`/teams/${t(b).id}`);var kt=a(W),ct=r(a(kt),2),Lt=a(ct,!0);e(ct);var pt=r(ct,2),Ht=a(pt,!0);e(pt),e(kt),e(W);var At=r(W,2),xt=a(At),Ot=a(xt);e(xt);var Pt=r(xt,2);Pt.__click=()=>h(`/teams/${t(b).id}`),e(At),e(lt),m(()=>{d(Lt,t(b).name),ht(pt,1,`px-2 py-1 text-xs rounded-full ${t(b).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),d(Ht,t(b).is_active?"Active":"Inactive"),d(Ot,`${t(b).total_agents??""} agents`)}),v(q,lt)}),e(x),v(p,x)};g(It,p=>{t(f).has(t(i).id)&&t(i).child_teams&&t(i).child_teams.length>0&&p(Jt)})}e(E),m(()=>{d(j,t(i).name),ht(L,1,`px-2 py-1 text-xs rounded-full ${t(i).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),d(H,t(i).is_active?"Active":"Inactive"),d(O,t(i).total_agents),d(R,t(i).active_agents),d(U,t(i).total_calls_handled)}),v(u,E)}),e(n),v(_,n)};g(st,_=>{t(Y).length===0?_(it):_(vt,!1)})}v(T,B)},Ft=T=>{var B=_t(),st=gt(B);{var it=_=>{var n=se(),u=r(a(n),2);u.__click=()=>h("/teams/new"),e(n),v(_,n)},vt=_=>{var n=de(),u=a(n),i=r(a(u));bt(i,5,()=>t(X),mt,(E,l)=>{var w=ve(),V=a(w),F=a(V),dt=a(F,!0);e(F);var I=r(F,2);{var J=$=>{var U=ie(),nt=a(U,!0);e(U),m(()=>d(nt,t(l).description)),v($,U)};g(I,$=>{t(l).description&&$(J)})}e(V);var k=r(V),j=a(k);j.__click=()=>Ct(t(l).id,t(l).is_active);var L=a(j,!0);e(j),e(k);var H=r(k),G=a(H),ot=a(G,!0);e(G),e(H);var S=r(H),C=a(S),K=a(C,!0);e(C),e(S);var O=r(S),N=a(O),Q=a(N,!0);e(N),e(O);var R=r(O),P=a(R);P.__click=()=>h(`/teams/${t(l).id}`),e(R),e(w),m(()=>{d(dt,t(l).name),ht(j,1,`px-2 text-xs font-semibold rounded-full ${t(l).is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`),d(L,t(l).is_active?"Active":"Inactive"),d(ot,t(l).total_agents),d(K,t(l).active_agents),d(Q,t(l).total_calls_handled)}),v(E,w)}),e(i),e(u),e(n),v(_,n)};g(st,_=>{t(X).length===0?_(it):_(vt,!1)})}v(T,B)};g(y,T=>{t(z)==="hierarchy"?T(wt):T(Ft,!1)},!0)}v(s,o)};g(zt,s=>{t(Z)?s(Bt):s(Et,!1)})}e(at),m(()=>d(Nt,t(z)==="hierarchy"?"ðŸ“‹ List View":"ðŸŒ³ Hierarchy View")),v(Tt,at),Dt()}Gt(["click"]);export{fe as component};
