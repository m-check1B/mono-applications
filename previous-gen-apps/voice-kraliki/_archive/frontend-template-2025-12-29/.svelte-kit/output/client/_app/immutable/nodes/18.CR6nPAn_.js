import{f as p,a as n,c as te}from"../chunks/pFl1CK35.js";import"../chunks/CnJ-dsFT.js";import{o as ee}from"../chunks/0VtO9hYy.js";import{p as ae,e as s,d as e,c as re,f as w,g as a,J as M,r as t,t as m,h as wt}from"../chunks/aQ_ifger.js";import{s as d}from"../chunks/DBuqHHqM.js";import{i as k}from"../chunks/BTxJJ6eU.js";import{e as Z,i as tt}from"../chunks/oqRKM5NY.js";import{d as se}from"../chunks/C918u5xm.js";import{s as kt}from"../chunks/DGR2HyJN.js";import{i as ie}from"../chunks/ft9JqUN4.js";import{g as et}from"../chunks/CTjsJUPt.js";var de=p('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),le=p("<button> </button>"),oe=p('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div> <p class="mt-4 text-gray-600">Loading agents...</p></div>'),ne=p('<button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Create First Agent</button>'),ve=p('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600 mb-4"> </p> <!></div>'),ce=p('<div class="text-sm text-gray-500"> </div>'),xe=p('<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded"> </span>'),pe=p('<span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded"> </span>'),ue=p('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div><div class="text-sm font-medium text-gray-900"> </div> <!></div></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="flex flex-col gap-1"><span> </span> <span class="text-xs text-gray-500"> </span></div></td><td class="px-6 py-4"><div class="flex flex-wrap gap-1"><!> <!></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="text-blue-600 hover:text-blue-900">View</button></td></tr>'),ge=p('<div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"><div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Total</div> <div class="text-2xl font-bold"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Available</div> <div class="text-2xl font-bold text-green-600"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">On Call</div> <div class="text-2xl font-bold text-blue-600"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Break</div> <div class="text-2xl font-bold text-orange-600"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Offline</div> <div class="text-2xl font-bold text-gray-600"> </div></div></div> <div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Agent</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Skills</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Calls</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CSAT</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Activity</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div> <div class="mt-4 text-sm text-gray-600"> </div>',1),fe=p('<div class="container mx-auto p-6"><div class="mb-6 flex items-center justify-between"><div><h1 class="text-3xl font-bold">Agents</h1> <p class="text-gray-600 mt-1">Manage agent profiles and monitor status</p></div> <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">+ New Agent</button></div> <!> <div class="mb-6 bg-white rounded-lg shadow p-4"><div class="flex gap-4 mb-4"><input type="text" placeholder="Search by name or employee ID..." class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/></div> <div class="flex gap-2 flex-wrap"></div></div> <!></div>');function De(At,St){ae(St,!1);let u=M([]),L=M([]),N=M(!0),O=M(""),T=M("all"),F="";const Ct={offline:"bg-gray-200 text-gray-800",available:"bg-green-200 text-green-800",busy:"bg-yellow-200 text-yellow-800",on_call:"bg-blue-200 text-blue-800",break:"bg-orange-200 text-orange-800",training:"bg-purple-200 text-purple-800",away:"bg-red-200 text-red-800"},$t=["all","offline","available","busy","on_call","break","training","away"];ee(async()=>{await Dt()});async function Dt(){try{w(N,!0);const r=localStorage.getItem("token"),i=await fetch("/api/team-management/agents",{headers:{Authorization:`Bearer ${r}`}});i.ok&&(w(u,await i.json()),j())}catch(r){w(O,`Error loading agents: ${r}`)}finally{w(N,!1)}}function j(){w(L,a(u).filter(r=>{const i=a(T)==="all"||r.current_status===a(T),o=F===""||r.display_name?.toLowerCase().includes(F.toLowerCase())||r.employee_id?.toLowerCase().includes(F.toLowerCase());return i&&o}))}function Mt(r){w(T,r),j()}function Lt(r){F=r.target.value,j()}function at(r){const i=new Date(r),A=new Date().getTime()-i.getTime(),_=Math.floor(A/6e4);if(_<1)return"Just now";if(_<60)return`${_}m ago`;const g=Math.floor(_/60);return g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`}function Tt(r){return r===null?"-":r.toFixed(2)}ie();var B=fe(),J=e(B),Ft=s(e(J),2);Ft.__click=()=>et("/agents/new"),t(J);var rt=s(J,2);{var zt=r=>{var i=de(),o=e(i,!0);t(i),m(()=>d(o,a(O))),n(r,i)};k(rt,r=>{a(O)&&r(zt)})}var E=s(rt,2),H=e(E),It=e(H);It.__input=Lt,t(H);var st=s(H,2);Z(st,5,()=>$t,tt,(r,i)=>{var o=le();o.__click=()=>Mt(a(i));var A=e(o,!0);t(o),m(_=>{kt(o,1,`px-4 py-2 rounded-md capitalize ${a(T)===a(i)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`),d(A,_)},[()=>a(i)==="all"?"All":a(i).replace("_"," ")]),n(r,o)}),t(st),t(E);var Nt=s(E,2);{var Ot=r=>{var i=oe();n(r,i)},jt=r=>{var i=te(),o=wt(i);{var A=g=>{var b=ve(),y=e(b),S=e(y,!0);t(y);var z=s(y,2);{var Q=h=>{var C=ne();C.__click=()=>et("/agents/new"),n(h,C)};k(z,h=>{a(u).length===0&&h(Q)})}t(b),m(()=>d(S,a(u).length===0?"No agents yet":"No agents match your filters")),n(g,b)},_=g=>{var b=ge(),y=wt(b),S=e(y),z=s(e(S),2),Q=e(z,!0);t(z),t(S);var h=s(S,2),C=s(e(h),2),Bt=e(C,!0);t(C),t(h);var U=s(h,2),it=s(e(U),2),Jt=e(it,!0);t(it),t(U);var V=s(U,2),dt=s(e(V),2),Et=e(dt,!0);t(dt),t(V);var lt=s(V,2),ot=s(e(lt),2),Ht=e(ot,!0);t(ot),t(lt),t(y);var q=s(y,2),nt=e(q),vt=s(e(nt));Z(vt,5,()=>a(L),tt,(v,l)=>{var $=ue(),D=e($),xt=e(D),pt=e(xt),G=e(pt),Ut=e(G,!0);t(G);var Vt=s(G,2);{var qt=c=>{var x=ce(),f=e(x);t(x),m(()=>d(f,`ID: ${a(l).employee_id??""}`)),n(c,x)};k(Vt,c=>{a(l).employee_id&&c(qt)})}t(pt),t(xt),t(D);var K=s(D),ut=e(K),I=e(ut),Gt=e(I,!0);t(I);var gt=s(I,2),Kt=e(gt,!0);t(gt),t(ut),t(K);var P=s(K),ft=e(P),_t=e(ft);Z(_t,1,()=>a(l).skills.slice(0,3),tt,(c,x)=>{var f=xe(),Y=e(f,!0);t(f),m(()=>d(Y,a(x))),n(c,f)});var Pt=s(_t,2);{var Rt=c=>{var x=pe(),f=e(x);t(x),m(()=>d(f,`+${a(l).skills.length-3}`)),n(c,x)};k(Pt,c=>{a(l).skills.length>3&&c(Rt)})}t(ft),t(P);var R=s(P),mt=e(R),Wt=e(mt,!0);t(mt),t(R);var W=s(R),bt=e(W),Xt=e(bt,!0);t(bt),t(W);var X=s(W),yt=e(X),Yt=e(yt,!0);t(yt),t(X);var ht=s(X),Zt=e(ht);Zt.__click=()=>et(`/agents/${a(l).id}`),t(ht),t($),m((c,x,f,Y)=>{d(Ut,a(l).display_name||"Unnamed Agent"),kt(I,1,`px-2 text-xs font-semibold rounded-full capitalize ${Ct[a(l).current_status]??""}`),d(Gt,c),d(Kt,x),d(Wt,a(l).total_calls_handled),d(Xt,f),d(Yt,Y)},[()=>a(l).current_status.replace("_"," "),()=>at(a(l).status_since),()=>Tt(a(l).satisfaction_score),()=>at(a(l).last_activity_at)]),n(v,$)}),t(vt),t(nt),t(q);var ct=s(q,2),Qt=e(ct);t(ct),m((v,l,$,D)=>{d(Q,a(u).length),d(Bt,v),d(Jt,l),d(Et,$),d(Ht,D),d(Qt,`Showing ${a(L).length??""} of ${a(u).length??""} agents`)},[()=>a(u).filter(v=>v.current_status==="available").length,()=>a(u).filter(v=>v.current_status==="on_call").length,()=>a(u).filter(v=>v.current_status==="break").length,()=>a(u).filter(v=>v.current_status==="offline").length]),n(g,b)};k(o,g=>{a(L).length===0?g(A):g(_,!1)},!0)}n(r,i)};k(Nt,r=>{a(N)?r(Ot):r(jt,!1)})}t(B),n(At,B),re()}se(["click","input"]);export{De as component};
