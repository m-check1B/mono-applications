import{f as v,a as c,c as ve}from"../chunks/pFl1CK35.js";import"../chunks/CnJ-dsFT.js";import{o as ue}from"../chunks/0VtO9hYy.js";import{p as pe,J as k,e as i,t as m,g as t,c as ge,f as h,d as r,r as a,N as xe,h as Ct}from"../chunks/aQ_ifger.js";import{s as l}from"../chunks/DBuqHHqM.js";import{i as f}from"../chunks/BTxJJ6eU.js";import{e as et,i as at}from"../chunks/oqRKM5NY.js";import{b as _e,r as me,s as fe}from"../chunks/BqAhscvM.js";import{s as It}from"../chunks/DGR2HyJN.js";import{d as be}from"../chunks/C918u5xm.js";import{i as he}from"../chunks/ft9JqUN4.js";import{g as rt}from"../chunks/CTjsJUPt.js";var ye=v('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),we=v("<button> </button>"),ke=v('<div><label for="date" class="block text-sm font-medium text-gray-700 mb-2">Select Date</label> <input type="date" id="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/></div>'),Se=v('<option class="capitalize"> </option>'),De=v('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div> <p class="mt-4 text-gray-600">Loading shifts...</p></div>'),Ce=v('<button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Schedule First Shift</button>'),Ie=v('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600 mb-4"> </p> <!></div>'),$e=v('<div class="text-sm text-gray-500"> </div>'),Oe=v('<span class="ml-1 text-xs text-gray-500">ðŸ”„</span>'),Te=v('<button class="text-green-600 hover:text-green-900">Clock In</button>'),ze=v('<button class="text-orange-600 hover:text-orange-900">Clock Out</button>'),Ae=v('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div> <!></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span> <!></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex justify-end gap-2"><!> <!> <button class="text-blue-600 hover:text-blue-900">View</button></div></td></tr>'),Me=v('<div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"><div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Total</div> <div class="text-2xl font-bold"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Scheduled</div> <div class="text-2xl font-bold text-blue-600"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">In Progress</div> <div class="text-2xl font-bold text-green-600"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Completed</div> <div class="text-2xl font-bold text-gray-600"> </div></div> <div class="bg-white p-4 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Issues</div> <div class="text-2xl font-bold text-red-600"> </div></div></div> <div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Agent</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Scheduled Time</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Clock In</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Clock Out</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div> <div class="mt-4 text-sm text-gray-600"> </div>',1),Fe=v('<div class="container mx-auto p-6"><div class="mb-6 flex items-center justify-between"><div><h1 class="text-3xl font-bold">Shift Management</h1> <p class="text-gray-600 mt-1">View and manage agent schedules</p></div> <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">+ Schedule Shift</button></div> <!> <div class="mb-6 bg-white rounded-lg shadow p-4"><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">View Mode</label> <div class="flex gap-2"></div></div> <!> <div><label class="block text-sm font-medium text-gray-700 mb-2">Status</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 capitalize"></select></div></div></div> <!></div>');function Ke($t,Ot){pe(Ot,!1);let C=k([]),x=k([]),B=k(!0),E=k(""),S=k("today"),I=k("all"),M=k(new Date().toISOString().split("T")[0]);const Tt={scheduled:"bg-blue-100 text-blue-800",in_progress:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800",no_show:"bg-red-100 text-red-800"},zt=["all","scheduled","in_progress","completed","cancelled","no_show"];ue(async()=>{await $()});async function $(){try{h(B,!0);const e=localStorage.getItem("token");let s="/api/team-management/shifts";t(S)==="today"&&(s+=`?date=${t(M)}`);const o=await fetch(s,{headers:{Authorization:`Bearer ${e}`}});o.ok&&(h(C,await o.json()),st())}catch(e){h(E,`Error loading shifts: ${e}`)}finally{h(B,!1)}}function st(){const e=new Date().toISOString().split("T")[0],s=new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0];h(x,t(C).filter(o=>{const _=t(I)==="all"||o.status===t(I);let g=!0;return t(S)==="today"?g=o.shift_date===t(M):t(S)==="week"&&(g=o.shift_date>=s&&o.shift_date<=e),_&&g})),t(x).sort((o,_)=>{const g=o.shift_date.localeCompare(_.shift_date);return g!==0?g:o.start_time.localeCompare(_.start_time)})}async function At(e){h(S,e),await $()}async function Mt(e){h(M,e.target.value),await $()}async function Ft(e){try{const s=localStorage.getItem("token");(await fetch(`/api/team-management/shifts/${e}/clock-in`,{method:"POST",headers:{Authorization:`Bearer ${s}`}})).ok?await $():alert("Failed to clock in")}catch(s){alert(`Error: ${s}`)}}async function Vt(e){try{const s=localStorage.getItem("token");(await fetch(`/api/team-management/shifts/${e}/clock-out`,{method:"POST",headers:{Authorization:`Bearer ${s}`}})).ok?await $():alert("Failed to clock out")}catch(s){alert(`Error: ${s}`)}}function jt(e){return new Date(e).toLocaleDateString()}function it(e){return e?new Date(e).toLocaleTimeString():"-"}function Bt(e){return e.status==="scheduled"&&!e.clock_in_time}function Et(e){return e.status==="in_progress"&&e.clock_in_time&&!e.clock_out_time}he();var L=Fe(),N=r(L),Lt=i(r(N),2);Lt.__click=()=>rt("/shifts/new"),a(N);var ot=i(N,2);{var Nt=e=>{var s=ye(),o=r(s,!0);a(s),m(()=>l(o,t(E))),c(e,s)};f(ot,e=>{t(E)&&e(Nt)})}var P=i(ot,2),dt=r(P),J=r(dt),lt=i(r(J),2);et(lt,4,()=>["today","week","all"],at,(e,s)=>{var o=we();o.__click=()=>At(s);var _=r(o,!0);a(o),m(()=>{It(o,1,`px-4 py-2 rounded-md capitalize ${t(S)===s?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`),l(_,s)}),c(e,o)}),a(lt),a(J);var nt=i(J,2);{var Pt=e=>{var s=ke(),o=i(r(s),2);me(o),o.__change=Mt,a(s),m(()=>fe(o,t(M))),c(e,s)};f(nt,e=>{t(S)==="today"&&e(Pt)})}var ct=i(nt,2),F=i(r(ct),2);m(()=>{t(I),xe(()=>{})}),F.__change=()=>st(),et(F,5,()=>zt,at,(e,s)=>{var o=Se(),_=r(o,!0);a(o);var g={};m(b=>{l(_,b),g!==(g=t(s))&&(o.value=(o.__value=t(s))??"")},[()=>t(s)==="all"?"All Statuses":t(s).replace("_"," ")]),c(e,o)}),a(F),a(ct),a(dt),a(P);var Jt=i(P,2);{var Ut=e=>{var s=De();c(e,s)},qt=e=>{var s=ve(),o=Ct(s);{var _=b=>{var D=Ie(),y=r(D),O=r(y,!0);a(y);var V=i(y,2);{var U=w=>{var T=Ce();T.__click=()=>rt("/shifts/new"),c(w,T)};f(V,w=>{t(C).length===0&&w(U)})}a(D),m(()=>l(O,t(C).length===0?"No shifts scheduled":"No shifts match your filters")),c(b,D)},g=b=>{var D=Me(),y=Ct(D),O=r(y),V=i(r(O),2),U=r(V,!0);a(V),a(O);var w=i(O,2),T=i(r(w),2),Gt=r(T,!0);a(T),a(w);var q=i(w,2),vt=i(r(q),2),Ht=r(vt,!0);a(vt),a(q);var G=i(q,2),ut=i(r(G),2),Kt=r(ut,!0);a(ut),a(G);var pt=i(G,2),gt=i(r(pt),2),Qt=r(gt,!0);a(gt),a(pt),a(y);var H=i(y,2),xt=r(H),_t=i(r(xt));et(_t,5,()=>t(x),at,(p,d)=>{var z=Ae(),A=r(z),K=r(A),Wt=r(K,!0);a(K);var Xt=i(K,2);{var Yt=n=>{var u=$e(),tt=r(u);a(u),m(()=>l(tt,`ID: ${t(d).agent.employee_id??""}`)),c(n,u)};f(Xt,n=>{t(d).agent?.employee_id&&n(Yt)})}a(A);var Q=i(A),ft=r(Q),Zt=r(ft,!0);a(ft),a(Q);var R=i(Q),W=r(R),te=r(W);a(W);var bt=i(W,2),ee=r(bt,!0);a(bt),a(R);var X=i(R),ht=r(X),ae=r(ht,!0);a(ht),a(X);var Y=i(X),yt=r(Y),re=r(yt,!0);a(yt),a(Y);var Z=i(Y),j=r(Z),se=r(j,!0);a(j);var ie=i(j,2);{var oe=n=>{var u=Oe();c(n,u)};f(ie,n=>{t(d).is_recurring&&n(oe)})}a(Z);var wt=i(Z),kt=r(wt),St=r(kt);{var de=n=>{var u=Te();u.__click=()=>Ft(t(d).id),c(n,u)};f(St,n=>{Bt(t(d))&&n(de)})}var Dt=i(St,2);{var le=n=>{var u=ze();u.__click=()=>Vt(t(d).id),c(n,u)};f(Dt,n=>{Et(t(d))&&n(le)})}var ne=i(Dt,2);ne.__click=()=>rt(`/shifts/${t(d).id}`),a(kt),a(wt),a(z),m((n,u,tt,ce)=>{l(Wt,t(d).agent?.display_name||"Unknown"),l(Zt,n),l(te,`${t(d).start_time??""} - ${t(d).end_time??""}`),l(ee,t(d).timezone),l(ae,u),l(re,tt),It(j,1,`px-2 text-xs font-semibold rounded-full capitalize ${Tt[t(d).status]??""}`),l(se,ce)},[()=>jt(t(d).shift_date),()=>it(t(d).clock_in_time),()=>it(t(d).clock_out_time),()=>t(d).status.replace("_"," ")]),c(p,z)}),a(_t),a(xt),a(H);var mt=i(H,2),Rt=r(mt);a(mt),m((p,d,z,A)=>{l(U,t(x).length),l(Gt,p),l(Ht,d),l(Kt,z),l(Qt,A),l(Rt,`Showing ${t(x).length??""} of ${t(C).length??""} shifts`)},[()=>t(x).filter(p=>p.status==="scheduled").length,()=>t(x).filter(p=>p.status==="in_progress").length,()=>t(x).filter(p=>p.status==="completed").length,()=>t(x).filter(p=>p.status==="no_show"||p.status==="cancelled").length]),c(b,D)};f(o,b=>{t(x).length===0?b(_):b(g,!1)},!0)}c(e,s)};f(Jt,e=>{t(B)?e(Ut):e(qt,!1)})}a(L),_e(F,()=>t(I),e=>h(I,e)),c($t,L),ge()}be(["click","change"]);export{Ke as component};
