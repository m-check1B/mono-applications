import{f as m,a as g,c as Ct}from"../chunks/pFl1CK35.js";import"../chunks/CnJ-dsFT.js";import{o as na}from"../chunks/0VtO9hYy.js";import{p as va,K as ca,L as pa,c as ga,g as t,J as _,f as v,d as e,r as a,t as w,h as C,e as r,q as d}from"../chunks/aQ_ifger.js";import{s as l}from"../chunks/DBuqHHqM.js";import{i as L}from"../chunks/BTxJJ6eU.js";import{e as Lt,i as St}from"../chunks/oqRKM5NY.js";import{d as xa}from"../chunks/C918u5xm.js";import{s as at}from"../chunks/DGR2HyJN.js";import{s as ma}from"../chunks/C8vjnfWO.js";import{i as ua}from"../chunks/ft9JqUN4.js";import{s as _a,a as fa}from"../chunks/BPSUqZ7R.js";import{p as ba}from"../chunks/ahVOO_2e.js";import{g as ya}from"../chunks/CTjsJUPt.js";var ha=m('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),wa=m("<button> </button>"),ka=m('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div> <p class="mt-4 text-gray-600">Loading contacts...</p></div>'),$a=m('<div class="text-center py-12 bg-gray-50 rounded-lg"><p class="text-gray-600">No contacts found</p></div>'),Pa=m('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td></tr>'),Ca=m('<div class="bg-white rounded-lg shadow overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Phone</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Attempts</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Attempt</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div> <div class="mt-4 flex justify-between items-center"><button class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button> <span class="text-gray-600"> </span> <button class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Next</button></div>',1),La=m('<div class="mb-6"><button class="text-gray-600 hover:text-gray-900 mb-2">‚Üê Back to Campaign</button> <h1 class="text-3xl font-bold"> </h1> <p class="text-gray-600 mt-1"> </p></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"><div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Total Contacts</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Processed</div> <div class="text-3xl font-bold"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Successful</div> <div class="text-3xl font-bold text-green-600"> </div></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-sm text-gray-600 mb-1">Failed</div> <div class="text-3xl font-bold text-red-600"> </div></div></div> <div class="bg-white p-4 rounded-lg shadow mb-6"><div class="flex justify-between text-sm text-gray-600 mb-2"><span>Progress</span> <span> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-blue-600 h-2 rounded-full transition-all duration-300"></div></div></div> <div class="mb-4 flex gap-2"><button>All</button> <!></div> <!>',1),Sa=m('<div class="container mx-auto p-6"><!></div>');function Ga(At,jt){va(jt,!1);const et=()=>fa(ba,"$page",zt),[zt,Ft]=_a(),S=_();let s=_(null),f=_([]),A=_(!0),k=_(""),x=_(0),j=50,h=_("all");const It={pending:"bg-gray-200 text-gray-800",calling:"bg-blue-200 text-blue-800",completed:"bg-green-200 text-green-800",failed:"bg-red-200 text-red-800",skipped:"bg-yellow-200 text-yellow-800"};na(async()=>{await Nt(),await $()});async function Nt(){try{const i=localStorage.getItem("token"),n=await fetch(`/api/campaign-management/contact-lists/${t(S)}`,{headers:{Authorization:`Bearer ${i}`}});n.ok?v(s,await n.json()):v(k,"Contact list not found")}catch(i){v(k,`Error loading contact list: ${i}`)}}async function $(){try{v(A,!0);const i=localStorage.getItem("token"),n=t(h)!=="all"?`&status=${t(h)}`:"",b=await fetch(`/api/campaign-management/contact-lists/${t(S)}/contacts?skip=${t(x)*j}&limit=${j}${n}`,{headers:{Authorization:`Bearer ${i}`}});b.ok&&v(f,await b.json())}catch(i){console.error("Error loading contacts:",i)}finally{v(A,!1)}}async function rt(i){v(h,i),v(x,0),await $()}function Bt(i){return i?new Date(i).toLocaleString():"-"}function st(){return t(s)&&t(s).total_contacts>0?t(s).processed_contacts/t(s).total_contacts*100:0}ca(()=>et(),()=>{v(S,parseInt(et().params.id??"0"))}),pa(),ua();var z=Sa(),Et=e(z);{var Dt=i=>{var n=ha(),b=e(n,!0);a(n),w(()=>l(b,t(k))),g(i,n)},Mt=i=>{var n=Ct(),b=C(n);{var qt=F=>{var it=La(),I=C(it),dt=e(I);dt.__click=()=>ya(`/campaigns/${t(s).campaign_id}`);var N=r(dt,2),Jt=e(N,!0);a(N);var ot=r(N,2),Kt=e(ot,!0);a(ot),a(I);var B=r(I,2),E=e(B),lt=r(e(E),2),Tt=e(lt,!0);a(lt),a(E);var D=r(E,2),nt=r(e(D),2),Gt=e(nt,!0);a(nt),a(D);var M=r(D,2),vt=r(e(M),2),Ht=e(vt,!0);a(vt),a(M);var ct=r(M,2),pt=r(e(ct),2),Ot=e(pt,!0);a(pt),a(ct),a(B);var q=r(B,2),J=e(q),gt=r(e(J),2),Qt=e(gt);a(gt),a(J);var xt=r(J,2),Rt=e(xt);a(xt),a(q);var K=r(q,2),T=e(K);T.__click=()=>rt("all");var Ut=r(T,2);Lt(Ut,0,()=>["pending","calling","completed","failed","skipped"],St,(c,p)=>{var u=wa();u.__click=()=>rt(p);var G=e(u,!0);a(u),w(()=>{at(u,1,`px-4 py-2 rounded capitalize ${t(h)===p?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`),l(G,p)}),g(c,u)}),a(K);var Vt=r(K,2);{var Wt=c=>{var p=ka();g(c,p)},Xt=c=>{var p=Ct(),u=C(p);{var G=y=>{var P=$a();g(y,P)},Yt=y=>{var P=Ca(),H=C(P),mt=e(H),ut=r(e(mt));Lt(ut,5,()=>t(f),St,(ta,o)=>{var R=Pa(),U=e(R),bt=e(U),aa=e(bt);a(bt),a(U);var V=r(U),yt=e(V),ea=e(yt,!0);a(yt),a(V);var W=r(V),ht=e(W),ra=e(ht,!0);a(ht),a(W);var X=r(W),wt=e(X),sa=e(wt,!0);a(wt),a(X);var Y=r(X),Z=e(Y),ia=e(Z,!0);a(Z),a(Y);var tt=r(Y),kt=e(tt),da=e(kt,!0);a(kt),a(tt);var $t=r(tt),Pt=e($t),oa=e(Pt,!0);a(Pt),a($t),a(R),w(la=>{l(aa,`${t(o),d(()=>t(o).first_name)??""} ${t(o),d(()=>t(o).last_name)??""}`),l(ea,(t(o),d(()=>t(o).phone_number))),l(ra,(t(o),d(()=>t(o).email||"-"))),l(sa,(t(o),d(()=>t(o).company||"-"))),at(Z,1,`px-2 text-xs font-semibold rounded-full ${t(o),d(()=>It[t(o).status])??""}`),l(ia,(t(o),d(()=>t(o).status))),l(da,(t(o),d(()=>t(o).attempts))),l(oa,la)},[()=>(t(o),d(()=>Bt(t(o).last_attempt_at)))]),g(ta,R)}),a(ut),a(mt),a(H);var _t=r(H,2),O=e(_t);O.__click=()=>{v(x,Math.max(0,t(x)-1)),$()};var Q=r(O,2),Zt=e(Q);a(Q);var ft=r(Q,2);ft.__click=()=>{v(x,t(x)+1),$()},a(_t),w(()=>{O.disabled=t(x)===0,l(Zt,`Page ${t(x)+1}`),ft.disabled=(t(f),d(()=>t(f).length<j))}),g(y,P)};L(u,y=>{t(f),d(()=>t(f).length===0)?y(G):y(Yt,!1)},!0)}g(c,p)};L(Vt,c=>{t(A)?c(Wt):c(Xt,!1)})}w((c,p)=>{l(Jt,(t(s),d(()=>t(s).name))),l(Kt,(t(s),d(()=>t(s).description||"No description provided"))),l(Tt,(t(s),d(()=>t(s).total_contacts))),l(Gt,(t(s),d(()=>t(s).processed_contacts))),l(Ht,(t(s),d(()=>t(s).successful_contacts))),l(Ot,(t(s),d(()=>t(s).failed_contacts))),l(Qt,`${c??""}%`),ma(Rt,`width: ${p??""}%`),at(T,1,`px-4 py-2 rounded ${t(h)==="all"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`)},[()=>d(()=>st().toFixed(1)),()=>d(st)]),g(F,it)};L(b,F=>{t(s)&&F(qt)},!0)}g(i,n)};L(Et,i=>{t(k)?i(Dt):i(Mt,!1)})}a(z),g(At,z),ga(),Ft()}xa(["click"]);export{Ga as component};
