const i="/api";class c extends Error{constructor(t,s,a){super(s),this.status=t,this.data=a,this.name="ApiError"}}async function o(e,t={}){const{method:s="GET",body:a,token:n}=t,p={"Content-Type":"application/json"};n&&(p.Authorization=`Bearer ${n}`);const r=await fetch(`${i}${e}`,{method:s,headers:p,body:a?JSON.stringify(a):void 0,credentials:"include"});if(!r.ok){const d=await r.json().catch(()=>({}));throw new c(r.status,d.detail||"Request failed",d)}return r.json()}const m={login:(e,t)=>o("/auth/login",{method:"POST",body:{email:e,password:t}}),register:e=>o("/auth/register",{method:"POST",body:e}),refresh:e=>o("/auth/refresh",{method:"POST",body:{refresh_token:e}}),me:e=>o("/auth/me",{token:e})},v={list:e=>o("/vop/surveys",{token:e}),get:(e,t)=>o(`/vop/surveys/${e}`,{token:t}),create:(e,t)=>o("/vop/surveys",{method:"POST",body:e,token:t}),update:(e,t,s)=>o(`/vop/surveys/${e}`,{method:"PATCH",body:t,token:s}),launch:(e,t)=>o(`/vop/surveys/${e}/launch`,{method:"POST",token:t}),pause:(e,t)=>o(`/vop/surveys/${e}/pause`,{method:"POST",token:t}),stats:(e,t)=>o(`/vop/surveys/${e}/stats`,{token:t})},h={list:(e,t)=>o(`/vop/actions${t?`?status_filter=${t}`:""}`,{token:e}),create:(e,t)=>o("/vop/actions",{method:"POST",body:e,token:t}),update:(e,t,s)=>o(`/vop/actions/${e}`,{method:"PATCH",body:t,token:s}),public:e=>o(`/vop/actions/public?token=${e}`)},u={list:(e,t)=>{const s=new URLSearchParams;return t!=null&&t.severity&&s.set("severity",t.severity),t!=null&&t.type&&s.set("type_filter",t.type),(t==null?void 0:t.is_read)!==void 0&&s.set("is_read",String(t.is_read)),o(`/vop/alerts?${s}`,{token:e})},unreadCount:e=>o("/vop/alerts/unread-count",{token:e}),update:(e,t,s)=>o(`/vop/alerts/${e}`,{method:"PATCH",body:t,token:s}),createAction:(e,t)=>o(`/vop/alerts/${e}/create-action`,{method:"POST",token:t})},y={overview:(e,t=30)=>o(`/vop/insights/overview?period_days=${t}`,{token:e}),departments:(e,t=30)=>o(`/vop/insights/departments?period_days=${t}`,{token:e}),trends:(e,t="sentiment",s="month")=>o(`/vop/insights/trends?metric=${t}&period=${s}`,{token:e}),quotes:(e,t=10,s)=>{const a=new URLSearchParams({limit:String(t)});return s&&a.set("sentiment",s),o(`/vop/insights/quotes?${a}`,{token:e})}},$={list:(e,t)=>{const s=t?`?department_id=${t}`:"";return o(`/vop/employees${s}`,{token:e})},create:(e,t)=>o("/vop/employees",{method:"POST",body:e,token:t}),update:(e,t,s)=>o(`/vop/employees/${e}`,{method:"PATCH",body:t,token:s}),departments:e=>o("/vop/employees/departments/list",{token:e}),import:async(e,t)=>{const s=new FormData;s.append("file",e);const a=await fetch(`${i}/vop/employees/import`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s});if(!a.ok)throw new c(a.status,"Import failed");return a.json()}},l={start:(e,t="voice")=>o(`/vop/voice/start?token=${e}&mode=${t}`,{method:"POST"}),fallbackToText:(e,t="user_requested")=>o(`/vop/voice/fallback-text?token=${e}&reason=${t}`,{method:"POST"}),complete:(e,t,s)=>o(`/vop/voice/complete?token=${e}`,{method:"POST",body:{transcript:t,duration_seconds:s}})},T={transcript:e=>o(`/vop/employee/transcript/${e}`),redact:(e,t)=>o(`/vop/employee/transcript/${e}/redact`,{method:"POST",body:{turn_indices:t}}),consent:e=>o(`/vop/employee/consent/${e}`,{method:"POST"}),deleteData:e=>o(`/vop/employee/data/${e}`,{method:"DELETE"})};export{u as a,h as b,m as c,T as d,$ as e,y as i,v as s,l as v};
