import{d as oe,f as g,a as y,s,c as Vt,e as ie}from"../chunks/C3NdowuV.js";import{o as ve}from"../chunks/BEA_S9YB.js";import{p as ne,b as M,e as jt,u as de,h as a,i as $t,g as v,c as e,s as r,t as k,a as pe,d as me,$ as ce,r as t}from"../chunks/BIIBwolN.js";import{e as St,i as Ft}from"../chunks/C5feot9S.js";import{i as L}from"../chunks/BMZK_lNp.js";import{h as ue}from"../chunks/DCFnHnzv.js";import{r as ut}from"../chunks/kJGk4-vF.js";import{s as qt}from"../chunks/3ECVvnw7.js";import{b as _t}from"../chunks/V2_FqNi0.js";import{b as zt}from"../chunks/HfYSDCGL.js";import{s as _e,a as Tt}from"../chunks/BfLFXwF2.js";import{g as be}from"../chunks/BKtAgaYV.js";import{a as fe,i as xe}from"../chunks/9ICADEXz.js";import{e as nt}from"../chunks/BXAMcmxS.js";import{t as ye}from"../chunks/Czbc-fPz.js";var he=g("<option> </option>"),ge=g('<div class="mb-6"><select class="brutal-input"><option> </option><!></select></div>'),Ce=g('<div class="text-center py-12"><span class="animate-pulse"> </span></div>'),ke=g('<div class="brutal-card p-12 text-center"><p class="text-muted-foreground mb-4"> </p> <div class="flex gap-2 justify-center"><button class="brutal-btn"> </button> <button class="brutal-btn brutal-btn-primary"> </button></div></div>'),we=g('<tr class="border-b border-foreground/20 hover:bg-card/50"><td class="p-4"> </td><td class="p-4"> </td><td class="p-4 text-sm text-muted-foreground"> </td><td class="p-4 text-sm"> </td><td class="p-4 text-sm"> </td><td class="p-4"><button> </button></td><td class="p-4"><span> </span></td></tr>'),Ue=g('<div class="brutal-card overflow-hidden"><table class="w-full"><thead class="bg-card border-b-2 border-foreground"><tr><th class="text-left p-4 text-sm"> </th><th class="text-left p-4 text-sm"> </th><th class="text-left p-4 text-sm"> </th><th class="text-left p-4 text-sm"> </th><th class="text-left p-4 text-sm"> </th><th class="text-left p-4 text-sm"> </th><th class="text-left p-4 text-sm"> </th></tr></thead><tbody></tbody></table></div>'),je=g("<option> </option>"),$e=g('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="brutal-card max-w-lg w-full p-6"><div class="flex items-center justify-between mb-6"><h2 class="text-xl"> </h2> <button class="text-2xl hover:text-terminal-green">X</button></div> <form><div class="space-y-4"><div class="grid grid-cols-2 gap-4"><div><label for="emp-first-name" class="block text-sm mb-1"> </label> <input id="emp-first-name" type="text" class="brutal-input w-full" required/></div> <div><label for="emp-last-name" class="block text-sm mb-1"> </label> <input id="emp-last-name" type="text" class="brutal-input w-full" required/></div></div> <div><label for="emp-email" class="block text-sm mb-1"> </label> <input id="emp-email" type="email" class="brutal-input w-full" required/></div> <div><label for="emp-department" class="block text-sm mb-1"> </label> <select id="emp-department" class="brutal-input w-full"><option>-- Select --</option><!></select></div> <div><label for="emp-job-title" class="block text-sm mb-1"> </label> <input id="emp-job-title" type="text" class="brutal-input w-full"/></div></div> <div class="flex gap-3 mt-6 pt-6 border-t-2 border-foreground/20"><button type="button" class="brutal-btn flex-1"> </button> <button type="submit" class="brutal-btn brutal-btn-primary flex-1"> </button></div></form></div></div>'),Se=g('<span class="text-terminal-green"> </span>'),Fe=g('<span class="text-muted-foreground">Click to select CSV file</span>'),Te=g('<div class="text-terminal-green text-sm"> </div>'),Ae=g('<div class="text-system-red text-sm"> </div>'),Ee=g('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="brutal-card max-w-lg w-full p-6"><div class="flex items-center justify-between mb-6"><h2 class="text-xl"> </h2> <button class="text-2xl hover:text-terminal-green">X</button></div> <div class="space-y-4"><p class="text-sm text-muted-foreground">Upload a CSV file with columns: first_name, last_name, email, department, job_title</p> <div class="border-2 border-dashed border-foreground/30 p-6 text-center"><input type="file" accept=".csv" class="hidden" id="csv-upload"/> <label for="csv-upload" class="cursor-pointer"><!></label></div> <!></div> <div class="flex gap-3 mt-6 pt-6 border-t-2 border-foreground/20"><button type="button" class="brutal-btn flex-1"> </button> <button class="brutal-btn brutal-btn-primary flex-1"> </button></div></div></div>'),Ie=g('<div class="container mx-auto p-6"><div class="flex items-center justify-between mb-8"><div><a href="/dashboard" class="text-sm text-muted-foreground hover:text-foreground mb-2 inline-block"> </a> <h1 class="text-3xl"> </h1></div> <div class="flex gap-2"><button class="brutal-btn"> </button> <button class="brutal-btn brutal-btn-primary"> </button></div></div> <!> <!></div> <!> <!>',1);function Qe(Dt,Xt){ne(Xt,!0);const Kt=()=>Tt(xe,"$isAuthenticated",bt),at=()=>Tt(fe,"$accessToken",bt),o=()=>Tt(ye,"$t",bt),[bt,Lt]=_e();let ft=M(jt([])),rt=M(jt([])),xt=M(!0),Q=M(!1),R=M(!1),dt=M(""),w=M(jt({first_name:"",last_name:"",email:"",department_id:"",job_title:""})),O=M(null),X=M("idle"),pt=M("");ve(async()=>{if(!Kt()){be("/login");return}await Promise.all([st(),Ot()])});async function st(){try{v(xt,!0);const l=a(dt)||void 0;v(ft,await nt.list(at(),l),!0)}catch(l){console.error("Failed to load employees",l)}finally{v(xt,!1)}}async function Ot(){try{v(rt,await nt.departments(at()),!0)}catch(l){console.error("Failed to load departments",l)}}async function Pt(){try{await nt.create(a(w),at()),v(Q,!1),v(w,{first_name:"",last_name:"",email:"",department_id:"",job_title:""},!0),await st()}catch(l){console.error("Failed to add employee",l)}}async function Bt(l){try{await nt.update(l.id,{is_active:!l.is_active},at()),await st()}catch(i){console.error("Failed to toggle employee status",i)}}function Gt(l){const i=l.target;i.files&&i.files[0]&&v(O,i.files[0],!0)}async function Ht(){if(a(O))try{v(X,"loading");const l=await nt.import(a(O),at());v(X,"success"),v(pt,`Imported ${l.imported} employees`),await st(),setTimeout(()=>{v(R,!1),v(X,"idle"),v(O,null)},2e3)}catch{v(X,"error"),v(pt,"Import failed. Check CSV format.")}}de(()=>{a(dt)!==void 0&&st()});var At=Ie();ue("poswkx",l=>{me(i=>{ce.title=`${i??""} - Speak by Kraliki`},[()=>o()("employees.title")])});var yt=$t(At),ht=e(yt),gt=e(ht),Ct=e(gt),Jt=e(Ct);t(Ct);var Et=r(Ct,2),Qt=e(Et,!0);t(Et),t(gt);var It=r(gt,2),mt=e(It);mt.__click=()=>v(R,!0);var Rt=e(mt,!0);t(mt);var kt=r(mt,2);kt.__click=()=>v(Q,!0);var Wt=e(kt,!0);t(kt),t(It),t(ht);var Mt=r(ht,2);{var Yt=l=>{var i=ge(),x=e(i),c=e(x),C=e(c);t(c),c.value=c.__value="";var U=r(c);St(U,17,()=>a(rt),Ft,(b,d)=>{var u=he(),h=e(u,!0);t(u);var _={};k(()=>{s(h,a(d).name),_!==(_=a(d).id)&&(u.value=(u.__value=a(d).id)??"")}),y(b,u)}),t(x),t(i),k((b,d)=>s(C,`${b??""} ${d??""}`),[()=>o()("common.all"),()=>o()("employees.department")]),zt(x,()=>a(dt),b=>v(dt,b)),y(l,i)};L(Mt,l=>{a(rt).length>0&&l(Yt)})}var Zt=r(Mt,2);{var te=l=>{var i=Ce(),x=e(i),c=e(x,!0);t(x),t(i),k(C=>s(c,C),[()=>o()("common.loading").toUpperCase()]),y(l,i)},ee=l=>{var i=Vt(),x=$t(i);{var c=U=>{var b=ke(),d=e(b),u=e(d,!0);t(d);var h=r(d,2),_=e(h);_.__click=()=>v(R,!0);var N=e(_,!0);t(_);var F=r(_,2);F.__click=()=>v(Q,!0);var K=e(F,!0);t(F),t(h),t(b),k((A,V,q)=>{s(u,A),s(N,V),s(K,q)},[()=>o()("employees.noEmployees"),()=>o()("employees.import").toUpperCase(),()=>o()("employees.add").toUpperCase()]),y(U,b)},C=U=>{var b=Ue(),d=e(b),u=e(d),h=e(u),_=e(h),N=e(_,!0);t(_);var F=r(_),K=e(F,!0);t(F);var A=r(F),V=e(A,!0);t(A);var q=r(A),P=e(q,!0);t(q);var j=r(q),B=e(j,!0);t(j);var E=r(j),W=e(E,!0);t(E);var n=r(E),p=e(n,!0);t(n),t(h),t(u);var $=r(u);St($,21,()=>a(ft),Ft,(z,m)=>{var T=we(),I=e(T),G=e(I,!0);t(I);var H=r(I),Y=e(H,!0);t(H);var Z=r(H),tt=e(Z,!0);t(Z);var lt=r(Z),ct=e(lt,!0);t(lt);var ot=r(lt),f=e(ot,!0);t(ot);var D=r(ot),S=e(D);S.__click=()=>Bt(a(m));var it=e(S,!0);t(S),t(D);var J=r(D),vt=e(J),wt=e(vt,!0);t(vt),t(J),t(T),k((et,Ut,le)=>{s(G,a(m).first_name),s(Y,a(m).last_name),s(tt,a(m).email),s(ct,et),s(f,a(m).job_title||"-"),qt(S,1,`text-sm ${a(m).is_active?"text-terminal-green":"text-system-red"}`),s(it,Ut),qt(vt,1,`text-sm ${a(m).vop_opted_out?"text-system-red":"text-muted-foreground"}`),s(wt,le)},[()=>{var et;return((et=a(rt).find(Ut=>Ut.id===a(m).department_id))==null?void 0:et.name)||"-"},()=>a(m).is_active?o()("common.yes"):o()("common.no"),()=>a(m).vop_opted_out?o()("common.yes"):o()("common.no")]),y(z,T)}),t($),t(d),t(b),k((z,m,T,I,G,H,Y)=>{s(N,z),s(K,m),s(V,T),s(P,I),s(B,G),s(W,H),s(p,Y)},[()=>o()("employees.firstName").toUpperCase(),()=>o()("employees.lastName").toUpperCase(),()=>o()("employees.email").toUpperCase(),()=>o()("employees.department").toUpperCase(),()=>o()("employees.jobTitle").toUpperCase(),()=>o()("status.active").toUpperCase(),()=>o()("employees.optedOut").toUpperCase()]),y(U,b)};L(x,U=>{a(ft).length===0?U(c):U(C,!1)},!0)}y(l,i)};L(Zt,l=>{a(xt)?l(te):l(ee,!1)})}t(yt);var Nt=r(yt,2);{var ae=l=>{var i=$e(),x=e(i),c=e(x),C=e(c),U=e(C,!0);t(C);var b=r(C,2);b.__click=()=>v(Q,!1),t(c);var d=r(c,2),u=e(d),h=e(u),_=e(h),N=e(_),F=e(N,!0);t(N);var K=r(N,2);ut(K),t(_);var A=r(_,2),V=e(A),q=e(V,!0);t(V);var P=r(V,2);ut(P),t(A),t(h);var j=r(h,2),B=e(j),E=e(B,!0);t(B);var W=r(B,2);ut(W),t(j);var n=r(j,2),p=e(n),$=e(p,!0);t(p);var z=r(p,2),m=e(z);m.value=m.__value="";var T=r(m);St(T,17,()=>a(rt),Ft,(f,D)=>{var S=je(),it=e(S,!0);t(S);var J={};k(()=>{s(it,a(D).name),J!==(J=a(D).id)&&(S.value=(S.__value=a(D).id)??"")}),y(f,S)}),t(z),t(n);var I=r(n,2),G=e(I),H=e(G,!0);t(G);var Y=r(G,2);ut(Y),t(I),t(u);var Z=r(u,2),tt=e(Z);tt.__click=()=>v(Q,!1);var lt=e(tt,!0);t(tt);var ct=r(tt,2),ot=e(ct,!0);t(ct),t(Z),t(d),t(x),t(i),k((f,D,S,it,J,vt,wt,et)=>{s(U,f),s(F,D),s(q,S),s(E,it),s($,J),s(H,vt),s(lt,wt),s(ot,et)},[()=>o()("employees.add").toUpperCase(),()=>o()("employees.firstName").toUpperCase(),()=>o()("employees.lastName").toUpperCase(),()=>o()("employees.email").toUpperCase(),()=>o()("employees.department").toUpperCase(),()=>o()("employees.jobTitle").toUpperCase(),()=>o()("common.cancel").toUpperCase(),()=>o()("common.create").toUpperCase()]),ie("submit",d,f=>{f.preventDefault(),Pt()}),_t(K,()=>a(w).first_name,f=>a(w).first_name=f),_t(P,()=>a(w).last_name,f=>a(w).last_name=f),_t(W,()=>a(w).email,f=>a(w).email=f),zt(z,()=>a(w).department_id,f=>a(w).department_id=f),_t(Y,()=>a(w).job_title,f=>a(w).job_title=f),y(l,i)};L(Nt,l=>{a(Q)&&l(ae)})}var re=r(Nt,2);{var se=l=>{var i=Ee(),x=e(i),c=e(x),C=e(c),U=e(C,!0);t(C);var b=r(C,2);b.__click=()=>v(R,!1),t(c);var d=r(c,2),u=r(e(d),2),h=e(u);h.__change=Gt;var _=r(h,2),N=e(_);{var F=n=>{var p=Se(),$=e(p,!0);t(p),k(()=>s($,a(O).name)),y(n,p)},K=n=>{var p=Fe();y(n,p)};L(N,n=>{a(O)?n(F):n(K,!1)})}t(_),t(u);var A=r(u,2);{var V=n=>{var p=Te(),$=e(p,!0);t(p),k(()=>s($,a(pt))),y(n,p)},q=n=>{var p=Vt(),$=$t(p);{var z=m=>{var T=Ae(),I=e(T,!0);t(T),k(()=>s(I,a(pt))),y(m,T)};L($,m=>{a(X)==="error"&&m(z)},!0)}y(n,p)};L(A,n=>{a(X)==="success"?n(V):n(q,!1)})}t(d);var P=r(d,2),j=e(P);j.__click=()=>v(R,!1);var B=e(j,!0);t(j);var E=r(j,2);E.__click=Ht;var W=e(E,!0);t(E),t(P),t(x),t(i),k((n,p,$)=>{s(U,n),s(B,p),E.disabled=!a(O)||a(X)==="loading",s(W,$)},[()=>o()("employees.import").toUpperCase(),()=>o()("common.cancel").toUpperCase(),()=>a(X)==="loading"?o()("common.loading").toUpperCase():o()("employees.import").toUpperCase()]),y(l,i)};L(re,l=>{a(R)&&l(se)})}k((l,i,x,c)=>{s(Jt,`< ${l??""}`),s(Qt,i),s(Rt,x),s(Wt,c)},[()=>o()("nav.dashboard"),()=>o()("employees.title").toUpperCase(),()=>o()("employees.import").toUpperCase(),()=>o()("employees.add").toUpperCase()]),y(Dt,At),pe(),Lt()}oe(["click","change"]);export{Qe as component};
