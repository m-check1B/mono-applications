import{z as n,A as l}from"./BIIBwolN.js";const i={user:null,accessToken:localStorage.getItem("access_token"),refreshToken:localStorage.getItem("refresh_token"),loading:!0};function u(){const{subscribe:e,set:t,update:s}=l(i);return{subscribe:e,setTokens:(o,a)=>{localStorage.setItem("access_token",o),localStorage.setItem("refresh_token",a),s(c=>({...c,accessToken:o,refreshToken:a}))},setUser:o=>{s(a=>({...a,user:o,loading:!1}))},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),t({user:null,accessToken:null,refreshToken:null,loading:!1})},setLoading:o=>{s(a=>({...a,loading:o}))}}}const r=u();function m(e){try{const s=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(atob(s).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch{return null}}function g(e){const t=m(e);return t?{id:t.sub,email:t.email,first_name:t.first_name,last_name:t.last_name,role:t.role,company_id:t.company_id,company_name:t.company_name}:null}const p=n(r,e=>!!e.accessToken&&!!e.user),_=n(r,e=>e.user),k=n(r,e=>e.accessToken);export{k as a,r as b,_ as c,g,p as i};
